{"version":3,"file":"js/877.085baaaf.js","mappings":"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","sources":["webpack://friends/./src/views/search/index.vue","webpack://friends/./src/components/SearchItem.vue","webpack://friends/src/components/SearchItem.vue","webpack://friends/./src/components/SearchItem.vue?6f17","webpack://friends/./src/components/SearchItem.vue?83bb","webpack://friends/src/views/search/index.vue","webpack://friends/./src/views/search/index.vue?e0e8","webpack://friends/./src/views/search/index.vue?7f48"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-container\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":function($event){return _vm.$router.push('/friends')}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('van-tabs',{on:{\"click\":_vm.onClick}},[(this.list.length==0)?_c('van-tab',{attrs:{\"title\":\"请输入要搜索的内容\"}}):_vm._l((_vm.speakerlist),function(item){return _c('van-tab',{key:item[0],attrs:{\"title\":item[0]}},[_c('van-badge',{attrs:{\"slot\":\"title\",\"content\":item[1]},slot:\"title\"},[_vm._v(_vm._s(item[0]))]),_vm._l((_vm.filterList),function(item,idx){return _c('search-item',{key:idx,attrs:{\"item\":item}})})],2)})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"searchResult-container\"},[_c('van-cell',[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"round\":\"\"}},[_vm._v(_vm._s(_vm.item.Order))]),_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"mini\",\"round\":\"\"}},[_vm._v(_vm._s(_vm.item.Speaker))]),_c('van-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\",\"round\":\"\"}},[_vm._v(\"Line:\"+_vm._s(_vm.item.LineNumber))]),_c('span',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.item.Content)}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"searchResult-container\">\n    <!-- <van-cell :title=\"item.Order\" :value=\"item.Content\" :label=\"item.Speaker\" /> -->\n    <van-cell  >\n        <van-button type=\"primary\" size=\"mini\" round>{{item.Order}}</van-button>\n        <van-button type=\"info\" size=\"mini\" round>{{item.Speaker}}</van-button>\n        <van-button type=\"warning\" size=\"mini\" round>Line:{{item.LineNumber}}</van-button>\n        <span class=\"content\" v-html=\"item.Content\"></span>\n    </van-cell>\n    \n  </div>\n</template>\n<script>\nexport default {\n  name: 'SearchResult',\n  components: {},\n  data() {\n    return {\n        \n    }\n  },\n  computed: {},\n  watch: {},\n  props: {\n    item:{\n      type:Object,\n      require: true\n    }\n  },\n  methods: {},\n  created() {},\n}\n</script>\n\n<style scoped lang=\"less\">\n.searchResult-container{\n    .content{\n        padding-left: 5px;\n        font-style: 24px;\n        vertical-align: bottom;\n        // border-left: 1px solid rgb(169, 183, 156);\n        // border-right: 1px solid rgb(169, 183, 156);\n        // border-radius: 999px;\n        margin-left: 4px;\n        padding-right: 5px;\n\n\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchItem.vue?vue&type=template&id=28b2472d&scoped=true&\"\nimport script from \"./SearchItem.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchItem.vue?vue&type=style&index=0&id=28b2472d&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28b2472d\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"search-container\">\n    <form action=\"/\">\n      <van-search\n        v-model=\"value\"\n        show-action\n        placeholder=\"请输入搜索关键词\"\n        @search=\"onSearch\"\n        @cancel=\"$router.push('/friends')\"\n      />\n    </form>\n    <van-tabs @click=\"onClick\">\n      <van-tab  title=\"请输入要搜索的内容\" v-if=\"this.list.length==0\">\n      </van-tab>\n      <van-tab v-else v-for=\"item in speakerlist\" :title=\"item[0]\" :key=\"item[0]\">\n        <van-badge slot=\"title\" :content=\"item[1]\">{{item[0]}}</van-badge>\n        <search-item v-for=\"(item,idx) in filterList\" :key=\"idx\" :item=\"item\"></search-item>\n      </van-tab>\n    </van-tabs>\n    \n  </div>\n</template>\n<script>\nimport SearchItem from '@/components/SearchItem.vue';\nimport arr from '@/assets/source.json'\nexport default {\n  name: 'SearchView',\n  components: {SearchItem},\n  data() {\n    return {\n      value: '',\n      list:[],\n      speakerlist:[],\n      selected:\"全部\"\n    }\n  },\n  computed: {\n    filterList: function(){\n      if(this.selected===\"全部\" || this.list.length==0){\n        return this.list\n      }\n      return this.list.filter(obj=>obj.Speaker===this.selected)\n    }\n  },\n  watch: {},\n  props: {},\n  methods: {\n    onClick(name,title){\n      console.log(name)\n      this.selected = title\n    },\n    onSearch(val) {\n      this.list=[]\n      this.speakerlist=[]\n      this.selected=\"全部\"\n      const map =new Map();\n      for(let i=0;i<arr.length;i++){\n        let Order = \"S\"+arr[i].no_scene+\"E\"+arr[i].no_ep\n        for(let j=0;j<arr[i].lines.length;j++){\n          let str = arr[i].lines[j].content\n          if(str.length>0 && str.search(new RegExp(val,\"i\"))!=-1 ){\n            let n = str.replace(new RegExp(val,\"igm\"), '<span style=\"color:red;vertical-align: bottom;font-weight:bold;\">'+val+'</span>');\n            if(arr[i].lines[j].speaker){\n              this.list.push({\n                Order:Order,\n                Speaker: arr[i].lines[j].speaker,\n                Content:n,\n                LineNumber:arr[i].lines[j].line_number\n              })\n              if(map.has(arr[i].lines[j].speaker)){\n                map.set(arr[i].lines[j].speaker,map.get(arr[i].lines[j].speaker)+1);\n              }else{\n                map.set(arr[i].lines[j].speaker,1)\n              }\n            }\n          }\n        }\n      }\n      if(this.list.length==0){\n        this.$toast(\"当前台词不存在\")\n        return\n      }\n      this.speakerlist = Array.from(map)\n      \n      this.speakerlist.unshift([\"全部\",this.list.length])\n      this.speakerlist.sort((a,b)=>b[1]-a[1])\n    },\n    \n  },\n  created() {\n  \n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n.search-container{\n  padding-bottom: 50px;\n  /deep/ .van-tab__text--ellipsis{\n    padding: 10px 10px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=683e85f2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=683e85f2&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"683e85f2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onSearch","$event","$router","push","model","value","callback","$$v","expression","onClick","list","length","_l","speakerlist","item","key","slot","_v","_s","filterList","idx","staticRenderFns","Order","Speaker","LineNumber","domProps","Content","name","components","data","computed","watch","props","type","require","methods","created","component","SearchItem","selected","console","map"],"sourceRoot":""}