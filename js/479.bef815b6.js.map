{"version":3,"file":"js/479.bef815b6.js","mappings":"2JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,qBAAqBC,MAAM,CAAC,GAAK,YAAY,CAACL,EAAIM,GAAG,yBAC9I,EACIC,EAAkB,G,mGCmDlBC,EAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAOhE,OALAS,EAAMG,KAAOL,EAAWK,KACxBH,EAAMI,WAAa,CACjBD,KAAM,MACNE,YAAY,GAEPL,CACT,CA4BA,OAvCAM,EAAAA,EAAAA,IAAUR,EAAYC,GAatBD,EAAWK,KAAO,QAClBL,EAAWS,cAAgB,CAEzBC,EAAG,EACHC,MAAM,EACNC,KAAM,GACNC,OAAQ,QACRC,QAAS,GACTC,UAAW,QACXC,KAAM,EACNC,IAAK,EACLC,gBAAiB,gBACjBC,YAAa,OACbC,YAAa,EACbC,QAAS,EACTC,QAAS,GACTC,UAAW,CACTC,SAAU,GACVC,WAAY,OACZC,MAAO,WAETC,aAAc,CACZH,SAAU,GACVE,MAAO,YAGJ1B,CACT,CAzCA,CAyCE4B,EAAAA,GAGEC,EAEJ,SAAU5B,GAGR,SAAS4B,IACP,IAAI3B,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAOwB,EAAUxB,KAChBH,CACT,CAqIA,OA5IAM,EAAAA,EAAAA,IAAUqB,EAAW5B,GASrB4B,EAAUC,UAAUvC,OAAS,SAAUwC,EAAYC,EAASC,GAG1D,GAFAxC,KAAKyC,MAAMC,YAENJ,EAAWK,IAAI,QAApB,CAIA,IAAIF,EAAQzC,KAAKyC,MACbG,EAAiBN,EAAWO,SAAS,aACrCC,EAAoBR,EAAWO,SAAS,gBACxCE,EAAYT,EAAWK,IAAI,aAC3BK,EAAoBC,EAAAA,UAAiBX,EAAWK,IAAI,gBAAiBL,EAAWK,IAAI,sBACpFO,EAAS,IAAIC,EAAAA,GAAa,CAC5BC,OAAOC,EAAAA,EAAAA,IAAgBT,EAAgB,CACrCzB,KAAMmB,EAAWK,IAAI,QACrBW,KAAMV,EAAeW,gBACpB,CACDC,YAAY,IAEdC,GAAI,KAEFC,EAAWR,EAAOS,kBAClBC,EAAUtB,EAAWK,IAAI,WACzBkB,EAAY,IAAIV,EAAAA,GAAa,CAC/BC,OAAOC,EAAAA,EAAAA,IAAgBP,EAAmB,CACxC3B,KAAMyC,EACNN,KAAMR,EAAkBS,eACxBO,EAAGJ,EAASK,OAASzB,EAAWK,IAAI,WACpCqB,cAAe,OACd,CACDR,YAAY,IAEdC,GAAI,KAEFQ,EAAO3B,EAAWK,IAAI,QACtBuB,EAAU5B,EAAWK,IAAI,WACzBwB,EAAe7B,EAAWK,IAAI,gBAAgB,GAClDO,EAAOkB,QAAUH,IAASE,EAC1BN,EAAUO,QAAUF,IAAYC,EAE5BF,GACFf,EAAOmB,GAAG,SAAS,YACjBC,EAAAA,EAAAA,IAAWL,EAAM,IAAM3B,EAAWK,IAAI,UACxC,IAGEuB,GACFL,EAAUQ,GAAG,SAAS,YACpBC,EAAAA,EAAAA,IAAWJ,EAAS,IAAM5B,EAAWK,IAAI,aAC3C,KAGF4B,EAAAA,EAAAA,GAAUrB,GAAQsB,WAAYD,EAAAA,EAAAA,GAAUV,GAAWW,UAAYL,EAAe,CAC5EM,cAAe,QACfC,eAAgBpC,EAAWoC,gBACzB,KACJjC,EAAMkC,IAAIzB,GACVU,GAAWnB,EAAMkC,IAAId,GAErB,IAAIe,EAAYnC,EAAMkB,kBAClBkB,EAAevC,EAAWwC,qBAC9BD,EAAaE,MAAQH,EAAUG,MAC/BF,EAAad,OAASa,EAAUb,OAChC,IAAIiB,GAAaC,EAAAA,EAAAA,IAAcJ,EAAc,CAC3CE,MAAOvC,EAAI0C,WACXnB,OAAQvB,EAAI2C,aACX7C,EAAWK,IAAI,YAEbI,IAEHA,EAAYT,EAAWK,IAAI,SAAWL,EAAWK,IAAI,SAEnC,WAAdI,IACFA,EAAY,UAII,UAAdA,EACFiC,EAAWI,GAAKJ,EAAWD,MACJ,WAAdhC,IACTiC,EAAWI,GAAKJ,EAAWD,MAAQ,IAIlC/B,IACHA,EAAoBV,EAAWK,IAAI,QAAUL,EAAWK,IAAI,UAElC,WAAtBK,IACFA,EAAoB,UAGI,WAAtBA,EACFgC,EAAWlB,GAAKkB,EAAWjB,OACI,WAAtBf,IACTgC,EAAWlB,GAAKkB,EAAWjB,OAAS,GAGtCf,EAAoBA,GAAqB,OAG3CP,EAAM2C,EAAIJ,EAAWI,EACrB3C,EAAMqB,EAAIkB,EAAWlB,EACrBrB,EAAM4C,aACN,IAAIC,EAAa,CACfC,MAAOxC,EACPiB,cAAehB,GAEjBE,EAAOsC,SAASF,GAChBzB,EAAU2B,SAASF,GAGnBV,EAAYnC,EAAMkB,kBAClB,IAAI/B,EAAUoD,EAAWS,OACrBrC,EAAQd,EAAWoD,aAAa,CAAC,QAAS,YAC9CtC,EAAME,KAAOhB,EAAWK,IAAI,mBAC5B,IAAIgD,EAAO,IAAIxC,EAAAA,EAAa,CAC1ByC,MAAO,CACLR,EAAGR,EAAUQ,EAAIxD,EAAQ,GACzBkC,EAAGc,EAAUd,EAAIlC,EAAQ,GACzBmD,MAAOH,EAAUG,MAAQnD,EAAQ,GAAKA,EAAQ,GAC9CmC,OAAQa,EAAUb,OAASnC,EAAQ,GAAKA,EAAQ,GAChDiE,EAAGvD,EAAWK,IAAI,iBAEpBS,MAAOA,EACP0C,kBAAkB,EAClB1B,QAAQ,IAEV3B,EAAMkC,IAAIgB,EA1HV,CA2HF,EAEAvD,EAAUxB,KAAO,QACVwB,CACT,CA9IA,CA8IE2D,EAAAA,GAEK,SAASC,EAAQC,GACtBA,EAAUC,uBAAuB3F,GACjC0F,EAAUE,sBAAsB/D,EAClC,C,sBCzMO,SAASgE,EAAQ7D,EAASC,GAC/B,IAAI6D,EAAS,CAcXC,SAAU,CAAC,EACXC,gBAAgB,EAMhBC,iBAAkB,CAAC,EACnBC,YAAa,CAAC,GAKhB,OAHAC,EAAgBL,EAAQ9D,EAASC,GAEjC6D,EAAOE,gBAAkBI,EAAkBN,EAAQ9D,GAC5C8D,CACT,CAEA,SAASK,EAAgBL,EAAQ9D,EAASC,GACxC,IAAIoE,EAAqBrE,EAAQsE,aAAa,WAC1CC,EAAyBvE,EAAQsE,aAAa,eAE9CE,EAAcD,EAAuBnE,IAAI,QAAQ,IAAS,GAC1DqE,EAAa,IAEjBC,EAAAA,EAAAA,MAAKzE,EAAI0E,wBAAwB,SAAUC,GAEzC,GAAKA,EAASC,mBAAd,CAIA,IAAIC,EAAcC,EAAQH,EAASI,OAC/BC,EAAqBnB,EAAOG,iBAAiBa,GAAe,CAAC,EACjEhB,EAAOI,YAAYY,GAAeF,EAGlC,IAAIM,EAAgBN,EAASI,MACzBG,EAAmBD,EAAc5E,SAAS,UAAW+D,GAIzD,IAHAK,EAAAA,EAAAA,MAAKE,EAASQ,WAAWC,EAAAA,EAAAA,OAAMC,GAAqB,EAAO,OAGvDV,EAASW,gBAAkBlB,GAE5Bc,EAAiB/E,IAAI,QAAS,CAG/B,IAAIoF,EAAkD,SAApCL,EAAiB/E,IAAI,WACnCqF,EAA0D,UAAlDN,EAAiB/E,IAAI,CAAC,cAAe,SAC7CsF,EAAcd,EAASW,eAAeJ,EAAiB/E,IAAI,CAAC,cAAe,WAE3EoF,GAAeC,KACjBf,EAAAA,EAAAA,MAAKgB,EAAYC,UAAUN,EAAAA,EAAAA,OAAMC,GAAqBG,GAAQ,QAAgBD,IAG5EC,IACFf,EAAAA,EAAAA,MAAKgB,EAAYE,WAAWP,EAAAA,EAAAA,OAAMC,EAAqB,SAAS,GAEpE,CA5BA,CAgCA,SAASA,EAAoBO,EAAaC,EAAgBC,GACxD,IAAIC,EAAmBD,EAAKf,MAAM1E,SAAS,cAAeiE,GACtD0B,EAAkBD,EAAiB5F,IAAI,QAE3C,GAAK6F,IAAuC,SAApBA,GAA+BJ,GAAgBK,EAAgBF,IAAvF,CAIsB,MAAlBF,IACFA,EAAiBE,EAAiB5F,IAAI,mBAGxC4F,EAAmBH,EAAcM,EAAqBJ,EAAMZ,EAAkBZ,EAAwBvE,EAAS6F,EAAaC,GAAkBE,EAC9I,IAAII,EAAOJ,EAAiB5F,IAAI,QAC5BiG,EAAUtB,EAAQgB,EAAKf,OACvBsB,EAAgBR,GAAkBM,GAAsB,aAAdL,EAAK1H,KAE/CkI,EAAWzC,EAAOC,SAASsC,GAAW,CACxCG,IAAKH,EACLN,KAAMA,EACNnB,SAAUA,EACVoB,iBAAkBA,EAClBF,eAAgBA,EAChBQ,cAAeA,EACfF,KAAMA,EACNK,UAAWP,EAAgBF,GAC3BU,aAAc,GACdC,UAAW,MAEb1B,EAAmBoB,GAAWE,EAC9BzC,EAAOE,eAAiBF,EAAOE,gBAAkBsC,EACjD,IAAIM,EAAaC,EAAkBrC,EAAauB,GAEhD,GAAkB,MAAda,EAAoB,CACtB,IAAID,EAAYlC,EAAWmC,KAAgBnC,EAAWmC,GAAc,CAClE7C,SAAU,CAAC,IAEb4C,EAAU5C,SAASsC,GAAWE,EAC9BI,EAAUG,OAAStC,EAAYoC,GAAYE,OAC3CP,EAASI,UAAYA,CACvB,CAlCA,CAmCF,CACF,GACF,CAEA,SAASR,EAAqBJ,EAAMZ,EAAkBZ,EAAwBvE,EAAS6F,EAAaC,GAClG,IAAIiB,EAA0B5B,EAAiB7E,SAAS,eACpD0G,EAAS,CAAC,OAAQ,OAAQ,YAAa,cAAe,QAAS,YAAa,0BAA2B,wBAAyB,KAChIC,EAAiB,CAAC,GACtBvC,EAAAA,EAAAA,MAAKsC,GAAQ,SAAUE,GACrBD,EAAeC,IAASC,EAAAA,EAAAA,OAAMJ,EAAwB3G,IAAI8G,GAC5D,IAIAD,EAAeb,KAAqB,aAAdL,EAAK1H,QAAyByH,EAGR,UAAxCiB,EAAwB3G,IAAI,UAC9B6G,EAAe5I,KAAO,QAGxB,IAAI+I,EAAcH,EAAeI,QAAUJ,EAAeI,MAAQ,CAAC,GAInE,GAFoB,MAApBD,EAAYzI,OAAiByI,EAAYzI,MAAO,GAE5B,UAAhBkH,EAAyB,CAE3B,IAAIyB,EAA8BP,EAAwB3G,IAAI,CAAC,QAAS,SAIxE,GAHAgH,EAAYzI,KAAsC,MAA/B2I,GAAsCA,GAGpDxB,EAAgB,CACnB,IAAIyB,EAAaN,EAAeO,UAAYT,EAAwB3G,IAAI,cACxEmH,IAAcE,EAAAA,EAAAA,UAASL,EAAaG,EAAWhI,UACjD,CACF,CAEA,OAAOwG,EAAKf,MAAM1E,SAAS,cAAe,IAAIoH,EAAAA,EAAMT,EAAgB1C,EAAwBvE,GAC9F,CAEA,SAASoE,EAAkBN,EAAQ9D,GAEjCA,EAAQ2H,YAAW,SAAUC,GAE3B,IAAIhD,EAAWgD,EAAYC,iBACvBC,EAAuBF,EAAYxH,IAAI,CAAC,UAAW,YAAY,GAC/D2H,EAAoBH,EAAYxH,IAAI,CAAC,UAAW,SAAS,GAExDwE,GAAqC,SAAzBkD,IAA4D,IAAzBA,GAA2D,SAAzBA,IAAyD,IAAtBC,IAAkF,IAAnDH,EAAYxH,IAAI,CAAC,cAAe,SAAS,KAIjMsE,EAAAA,EAAAA,MAAKZ,EAAOG,iBAAiBc,EAAQH,EAASI,SAAS,SAAUuB,GAC/D,IAAIR,EAAOQ,EAASR,KAEhBnB,EAASoD,QAAQjC,EAAKkC,OAASlC,IACjCQ,EAASG,aAAawB,KAAKN,GACC,MAA5BrB,EAAS4B,kBAA4B5B,EAAS4B,gBAAkB,GAChE5B,EAAS4B,iBAAmBP,EAAYQ,UAAUC,QAEtD,GACF,GACF,CAiBA,SAASxB,EAAkBrC,EAAauB,GAItC,IAHA,IAAIuC,EAAYvC,EAAKf,MACjBiD,EAAMlC,EAAKkC,IAENM,EAAI,EAAGA,EAAI/D,EAAYgE,OAAQD,IAAK,CAC3C,IAAIE,EAAajE,EAAY+D,IAAM,CAAC,EAEpC,GAAIG,EAAgBD,EAAWR,EAAM,UAAWK,EAAUK,KAAOD,EAAgBD,EAAWR,EAAM,aAAcK,EAAUnG,iBAAmBuG,EAAgBD,EAAWR,EAAM,YAAaK,EAAUM,MACnM,OAAOL,CAEX,CACF,CAEA,SAASG,EAAgBG,EAAeC,GACtC,MAAyB,QAAlBD,IAA2BE,EAAAA,EAAAA,SAAQF,KAAkBG,EAAAA,EAAAA,SAAQH,EAAeC,IAAkB,GAAKD,IAAkBC,CAC9H,CAEO,SAASG,EAASX,GACvB,IAAI/B,EAAW2C,EAAYZ,GAE3B,GAAK/B,EAAL,CAIA,IAAIP,EAAmBO,EAASP,iBAC5BmD,EAAQ5C,EAASR,KAAKoD,MACtBC,EAASpD,EAAiBoD,OAC1BC,EAASrD,EAAiB5F,IAAI,UAC9BkJ,EAAQtD,EAAiB5F,IAAI,SAEpB,MAATkJ,IACFA,EAAQH,EAAMI,MAAMD,IAGtB,IAAI7C,EAAYP,EAAgBF,GAGlB,MAAVqD,IACFD,EAAOC,OAAS5C,EAAY,OAAS,QAGvC,IAAI+C,EAASL,EAAMM,YAAYC,QAC/BF,EAAO,GAAKA,EAAO,IAAMA,EAAOG,WAGvB,MAATL,GAEGA,EAAQE,EAAO,MAEhBF,EAAQE,EAAO,IAGbF,EAAQE,EAAO,KACjBF,EAAQE,EAAO,IAGjBJ,EAAOE,MAAQA,EAEX7C,IACF2C,EAAOC,OAAS9C,EAASR,KAAKoD,MAAMS,UAAY,OAAS,OArC3D,CAuCF,CACO,SAASV,EAAYZ,GAC1B,IAAIrE,GAAoBqE,EAAUtI,QAAQsE,aAAa,gBAAkB,CAAC,GAAGL,iBAC7E,OAAOA,GAAoBA,EAAiBF,SAASgB,EAAQuD,GAC/D,CACO,SAASuB,EAAoBvB,GAClC,IAAI/B,EAAW2C,EAAYZ,GAC3B,OAAO/B,GAAYA,EAASP,gBAC9B,CAEA,SAASE,EAAgBF,GACvB,QAASA,EAAiB5F,IAAI,CAAC,SAAU,QAC3C,CAOO,SAAS2E,EAAQC,GACtB,OAAOA,EAAM3G,KAAO,KAAO2G,EAAM2D,EACnC,CCrRA,IAAImB,EAAmB,CAAC,EAKpBC,EAEJ,SAAU9L,GAGR,SAAS8L,IACP,IAAI7L,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAO0L,EAAS1L,KACfH,CACT,CAgFA,OAvFAM,EAAAA,EAAAA,IAAUuL,EAAU9L,GAapB8L,EAASjK,UAAUvC,OAAS,SAAU+K,EAAWtI,EAASC,EAAK+J,GAM7DvM,KAAKwM,kBAAoBC,EAAgC5B,GAEzDrK,EAAO6B,UAAUvC,OAAOY,MAAMV,KAAMW,WAEpCX,KAAK0M,0BAA0B7B,EAAWrI,GAAK,EACjD,EAMA8J,EAASjK,UAAUsK,kBAAoB,SAAU9B,EAAWtI,EAASC,EAAK+J,GACxEvM,KAAK0M,0BAA0B7B,EAAWrI,GAAK,EACjD,EAMA8J,EAASjK,UAAUuK,OAAS,SAAUrK,EAASC,GAC7C,IAAIqK,EAAc7M,KAAK8M,aACvBD,GAAeA,EAAYD,OAAOpK,EACpC,EAMA8J,EAASjK,UAAU0K,QAAU,SAAUxK,EAASC,GAC9CxC,KAAKgN,oBAAoBxK,GAEzBhC,EAAO6B,UAAU0K,QAAQrM,MAAMV,KAAMW,UACvC,EAEA2L,EAASjK,UAAUqK,0BAA4B,SAAU7B,EAAWrI,EAAKyK,GACvE,IAAIC,EAAQZ,EAASa,oBAAoBnN,KAAKwM,kBAE9C,GAAKU,EAAL,CAIA,IAAI3E,EAAmBkE,EAA2C5B,GAClEtC,GAAoBvI,KAAK8M,eAAiB9M,KAAK8M,aAAe,IAAII,IAAUpN,OAAO+K,EAAWtC,EAAkB/F,EAAKyK,GAAejN,KAAKgN,oBAAoBxK,EAH7J,CAIF,EAEA8J,EAASjK,UAAU2K,oBAAsB,SAAUxK,GACjDxC,KAAK8M,cAAgB9M,KAAK8M,aAAaC,QAAQvK,GAC/CxC,KAAK8M,aAAe,IACtB,EAEAR,EAASc,yBAA2B,SAAUxM,EAAMyM,GAOlDhB,EAAiBzL,GAAQyM,CAC3B,EAIAf,EAASa,oBAAsB,SAAUvM,GACvC,OAAOA,GAAQyL,EAAiBzL,EAClC,EAGA0L,EAAS1L,KAAO,OACT0L,CACT,CAzFA,CAyFEvG,EAAAA,GAEF,I,4DC/FIuH,GAAQC,EAAAA,EAAAA,MACR7D,EAAQzG,EAAAA,MACRuK,EAAOvK,EAAAA,KAKPwK,EAEJ,WACE,SAASA,IACPzN,KAAK0N,WAAY,EAMjB1N,KAAK2N,mBAAqB,EAC5B,CAkWA,OA5VAF,EAAgBpL,UAAUvC,OAAS,SAAU+K,EAAWtC,EAAkB/F,EAAKyK,GAC7E,IAAIpB,EAAQtD,EAAiB5F,IAAI,SAC7BiJ,EAASrD,EAAiB5F,IAAI,UASlC,GANA3C,KAAK4N,WAAa/C,EAClB7K,KAAK6N,kBAAoBtF,EACzBvI,KAAK8N,KAAOtL,EAIPyK,GAAejN,KAAK+N,aAAelC,GAAS7L,KAAKgO,cAAgBpC,EAAtE,CAIA5L,KAAK+N,WAAalC,EAClB7L,KAAKgO,YAAcpC,EACnB,IAAInJ,EAAQzC,KAAKiO,OACbC,EAASlO,KAAKmO,QAElB,IAAKvC,GAAqB,SAAXA,EAIb,OAFAnJ,GAASA,EAAM2L,YACfF,GAAUA,EAAOE,QAInB3L,GAASA,EAAMvB,OACfgN,GAAUA,EAAOhN,OAEjB,IAAImN,EAAW,CAAC,EAChBrO,KAAKsO,aAAaD,EAAUxC,EAAOhB,EAAWtC,EAAkB/F,GAEhE,IAAI+L,EAAaF,EAASE,WAEtBA,IAAevO,KAAKwO,iBACtBxO,KAAKyO,MAAMjM,GAGbxC,KAAKwO,gBAAkBD,EACvB,IAAIG,EAAgB1O,KAAK2O,eAAiB3O,KAAK4O,mBAAmB/D,EAAWtC,GAE7E,GAAK9F,EAKE,CACL,IAAIoM,EAAgB5L,EAAAA,MAAa6L,EAAavG,EAAkBmG,GAChE1O,KAAK+O,gBAAgBtM,EAAO4L,EAAUQ,GACtC7O,KAAKgP,cAAcvM,EAAO4L,EAAUQ,EAAetG,EACrD,MARE9F,EAAQzC,KAAKiO,OAAS,IAAI9K,EAAAA,EAC1BnD,KAAKiP,gBAAgBxM,EAAO4L,EAAUxD,EAAWtC,GACjDvI,KAAKkP,cAAczM,EAAO4L,EAAUxD,EAAWtC,GAC/C/F,EAAI2M,QAAQxK,IAAIlC,GAOlB2M,EAAqB3M,EAAO8F,GAAkB,GAE9CvI,KAAKqP,cAAcxD,EA1CnB,CA2CF,EAMA4B,EAAgBpL,UAAUuK,OAAS,SAAUpK,GAC3CxC,KAAKyO,MAAMjM,EACb,EAMAiL,EAAgBpL,UAAU0K,QAAU,SAAUvK,GAC5CxC,KAAKyO,MAAMjM,EACb,EAMAiL,EAAgBpL,UAAUuM,mBAAqB,SAAU/D,EAAWtC,GAClE,IAAI+G,EAAY/G,EAAiB5F,IAAI,aACjC2F,EAAOuC,EAAUvC,KACjBiH,EAA+B,aAAdjH,EAAK1H,KACtB4O,EAAUjH,EAAiB5F,IAAI,QAEnC,IAAK6M,IAAYD,EACf,OAAO,EAGT,GAAkB,SAAdD,GAAqC,MAAbA,EAAmB,CAC7C,IAAI3B,EAAqB3N,KAAK2N,mBAE9B,GAAI4B,GAAkBjH,EAAKmH,eAAiB9B,EAC1C,OAAO,EAMT,GAAI6B,EAAS,CACX,IAAI9E,EAAkB+B,EAAmC5B,GAAWH,gBAChEgF,EAAapH,EAAK0D,YAEtB,OAAO2D,KAAKC,IAAIF,EAAW,GAAKA,EAAW,IAAMhF,EAAkBiD,CACrE,CAEA,OAAO,CACT,CAEA,OAAqB,IAAd2B,CACT,EAOA7B,EAAgBpL,UAAUiM,aAAe,SAAUD,EAAUxC,EAAOhB,EAAWtC,EAAkB/F,GACjG,EAMAiL,EAAgBpL,UAAU4M,gBAAkB,SAAUxM,EAAO4L,EAAUxD,EAAWtC,GAChF,IAAIsH,EAAgBxB,EAASyB,QAE7B,GAAID,EAAe,CACjB,IAAIE,EAAYzC,EAAM7K,GAAOsN,UAAY,IAAI5M,EAAQ0M,EAAcjP,MAAM8I,EAAM2E,EAASyB,UACxFrN,EAAMkC,IAAIoL,EACZ,CACF,EAMAtC,EAAgBpL,UAAU6M,cAAgB,SAAUzM,EAAO4L,EAAUxD,EAAWtC,GAC9E,GAAI8F,EAASzE,MAAO,CAClB,IAAIoG,EAAU1C,EAAM7K,GAAOuN,QAAU,IAAI7M,EAAAA,GAAauG,EAAM2E,EAASzE,QACrEnH,EAAMkC,IAAIqL,GACVC,EAAoBD,EAASzH,EAC/B,CACF,EAMAkF,EAAgBpL,UAAU0M,gBAAkB,SAAUtM,EAAO4L,EAAUS,GACrE,IAAIiB,EAAYzC,EAAM7K,GAAOsN,UAEzBA,GAAa1B,EAASyB,UACxBC,EAAUvK,SAAS6I,EAASyB,QAAQ1M,OACpC0L,EAAYiB,EAAW,CACrBnK,MAAOyI,EAASyB,QAAQlK,QAG9B,EAMA6H,EAAgBpL,UAAU2M,cAAgB,SAAUvM,EAAO4L,EAAUS,EAAavG,GAChF,IAAIyH,EAAU1C,EAAM7K,GAAOuN,QAEvBA,IACFA,EAAQxK,SAAS6I,EAASzE,MAAMxG,OAChC0L,EAAYkB,EAAS,CAKnB5K,EAAGiJ,EAASzE,MAAMxE,EAClBtB,EAAGuK,EAASzE,MAAM9F,IAEpBmM,EAAoBD,EAASzH,GAEjC,EAMAkF,EAAgBpL,UAAUgN,cAAgB,SAAUxD,GAClD,IAAI7L,KAAK0N,WAAc1N,KAAKkQ,sBAA5B,CAIA,IAcIC,EAdA5H,EAAmBvI,KAAK6N,kBAExBuC,EAAKpQ,KAAK8N,KAAKqB,QAEfjB,EAASlO,KAAKmO,QACdkC,EAAc9H,EAAiB1F,SAAS,UACxC+I,EAASrD,EAAiB5F,IAAI,UAElC,IAAK0N,EAAY1N,IAAI,UAAYiJ,GAAqB,SAAXA,EAGzC,OAFAsC,GAAUkC,EAAGxD,OAAOsB,QACpBlO,KAAKmO,QAAU,MAMZnO,KAAKmO,UACRgC,GAAS,EACTjC,EAASlO,KAAKmO,QAAUhL,EAAQmN,WAAWD,EAAY1N,IAAI,QAAS,CAClE4N,OAAQ,OACRC,WAAW,EACXC,YAAa,SAAUC,GAErBC,EAAAA,GAAeD,EAAEE,MACnB,EACAC,YAAarD,EAAKxN,KAAK8Q,kBAAmB9Q,KAAM,EAAG,GACnD+Q,MAAOvD,EAAKxN,KAAK8Q,kBAAmB9Q,MACpCgR,UAAWxD,EAAKxN,KAAKiR,iBAAkBjR,QAEzCoQ,EAAGzL,IAAIuJ,IAGTkB,EAAqBlB,EAAQ3F,GAAkB,GAE/C2F,EAAO1I,SAAS6K,EAAY3K,aAAa,KAAM,CAAC,QAAS,cAAe,cAAe,UAAW,cAAe,aAAc,gBAAiB,mBAEhJ,IAAIwL,EAAab,EAAY1N,IAAI,QAE5BM,EAAAA,QAAeiO,KAClBA,EAAa,CAACA,EAAYA,IAG5BhD,EAAOiD,OAASD,EAAW,GAAK,EAChChD,EAAOkD,OAASF,EAAW,GAAK,EAChCG,EAAAA,GAA4BrR,KAAM,yBAA0BqQ,EAAY1N,IAAI,aAAe,EAAG,WAE9F3C,KAAKsR,mBAAmBzF,EAAOsE,EAhD/B,CAiDF,EAEA1C,EAAgBpL,UAAUiP,mBAAqB,SAAUzF,EAAOsE,GAC9DrB,EAAY9O,KAAK6N,mBAAoBsC,GAAUnQ,KAAK2O,eAAgB3O,KAAKmO,QAASoD,EAAoBvR,KAAKwR,mBAAmB3F,EAAO7L,KAAK4N,WAAY5N,KAAK6N,oBAC7J,EAEAJ,EAAgBpL,UAAUyO,kBAAoB,SAAUW,EAAIC,GAC1D,IAAIxD,EAASlO,KAAKmO,QAElB,GAAKD,EAAL,CAIAlO,KAAK0N,WAAY,EAEjB,IAAIiE,EAAQ3R,KAAKkQ,sBAAsBqB,EAAoBrD,GAAS,CAACuD,EAAIC,GAAK1R,KAAK4N,WAAY5N,KAAK6N,mBACpG7N,KAAK4R,aAAeD,EACpBzD,EAAO2D,gBACP3D,EAAO4D,KAAKP,EAAoBI,IAChCrE,EAAMY,GAAQ6D,SAAW,KAEzB/R,KAAKgS,wBAVL,CAWF,EAMAvE,EAAgBpL,UAAU2P,uBAAyB,WACjD,IAAI9D,EAASlO,KAAKmO,QAElB,GAAKD,EAAL,CAIA,IAAI+D,EAAcjS,KAAK4R,aACnB/G,EAAY7K,KAAK4N,WAErB5N,KAAK8N,KAAKoE,eAAe,CACvBtR,KAAM,oBACNwE,EAAG6M,EAAYE,YAAY,GAC3BrO,EAAGmO,EAAYE,YAAY,GAC3BC,cAAeH,EAAYG,cAC3B9L,SAAU,CAAC,CACT+L,QAASxH,EAAUvC,KAAKkC,IACxB8H,UAAWzH,EAAUnG,kBAZzB,CAeF,EAEA+I,EAAgBpL,UAAU4O,iBAAmB,WAC3CjR,KAAK0N,WAAY,EACjB,IAAIQ,EAASlO,KAAKmO,QAElB,GAAKD,EAAL,CAIA,IAAIrC,EAAQ7L,KAAK6N,kBAAkBlL,IAAI,SAKvC3C,KAAKsR,mBAAmBzF,GAIxB7L,KAAK8N,KAAKoE,eAAe,CACvBtR,KAAM,WAZR,CAcF,EAMA6M,EAAgBpL,UAAUoM,MAAQ,SAAUjM,GAC1CxC,KAAK+N,WAAa,KAClB/N,KAAKgO,YAAc,KACnB,IAAIoC,EAAK5N,EAAI2M,QACT1M,EAAQzC,KAAKiO,OACbC,EAASlO,KAAKmO,QAEdiC,GAAM3N,IACRzC,KAAKwO,gBAAkB,KACvB/L,GAAS2N,EAAGxD,OAAOnK,GACnByL,GAAUkC,EAAGxD,OAAOsB,GACpBlO,KAAKiO,OAAS,KACdjO,KAAKmO,QAAU,KACfnO,KAAK4R,aAAe,MAGtBP,EAAAA,GAAmBrR,KAAM,yBAC3B,EAMAyN,EAAgBpL,UAAUkQ,QAAU,WACpC,EAEA9E,EAAgBpL,UAAUmQ,WAAa,SAAUC,EAAIC,EAAIC,GAEvD,OADAA,EAAYA,GAAa,EAClB,CACLvN,EAAGqN,EAAGE,GACN7O,EAAG2O,EAAG,EAAIE,GACV5N,MAAO2N,EAAGC,GACV5O,OAAQ2O,EAAG,EAAIC,GAEnB,EAEOlF,CACT,CA5WA,GA8WA,SAASqB,EAAY8D,EAAgBlE,EAAemE,EAAIC,GAEjDC,EAAWzF,EAAMuF,GAAId,SAAUe,KAClCxF,EAAMuF,GAAId,SAAWe,EACrBpE,EAAgBvL,EAAAA,EAAoB0P,EAAIC,EAAOF,IAAmBC,EAAGhB,gBAAiBgB,EAAGf,KAAKgB,IAElG,CAEA,SAASC,EAAWC,EAAWC,GAC7B,GAAIhQ,EAAAA,SAAgB+P,IAAc/P,EAAAA,SAAgBgQ,GAAW,CAC3D,IAAIC,GAAW,EAIf,OAHAjQ,EAAAA,KAAYgQ,GAAU,SAAUE,EAAMpK,GACpCmK,EAAWA,GAAYH,EAAWC,EAAUjK,GAAMoK,EACpD,MACSD,CACX,CACE,OAAOF,IAAcC,CAEzB,CAEA,SAAShD,EAAoBD,EAASzH,GACpCyH,EAAQzH,EAAiB5F,IAAI,CAAC,QAAS,SAAW,OAAS,SAC7D,CAEA,SAAS4O,EAAoBI,GAC3B,MAAO,CACLvM,EAAGuM,EAAMvM,GAAK,EACdtB,EAAG6N,EAAM7N,GAAK,EACdsP,SAAUzB,EAAMyB,UAAY,EAEhC,CAEA,SAAShE,EAAqB3M,EAAO8F,EAAkBnE,GACrD,IAAInD,EAAIsH,EAAiB5F,IAAI,KACzB0Q,EAAS9K,EAAiB5F,IAAI,UAClCF,GAASA,EAAM6Q,UAAS,SAAUT,GAChB,UAAZA,EAAGjS,OACA,MAALK,IAAc4R,EAAG5R,EAAIA,GACX,MAAVoS,IAAmBR,EAAGQ,OAASA,GAC/BR,EAAGzO,OAASA,EAEhB,GACF,CAEA,Q,mFC9ZImP,GAAK5D,KAAK4D,GAwBVC,GAEJ,WACE,SAASA,EAAY3I,EAAW4I,GAC9BzT,KAAKyC,MAAQ,IAAIU,EAAAA,EACjBnD,KAAKyT,IAAMA,EACXzT,KAAK6K,UAAYA,GAEjBb,EAAAA,EAAAA,UAASyJ,EAAK,CACZC,YAAa,EACbC,cAAe,EACfC,cAAe,EACfC,eAAgB,EAChBzP,QAAQ,EACR0P,gBAAiB,WACf,OAAO,CACT,IAGF,IAAIC,EAAiB,IAAI5Q,EAAAA,EAAc,CACrCiC,EAAGqO,EAAIO,SAAS,GAChBlQ,EAAG2P,EAAIO,SAAS,GAChBZ,SAAUK,EAAIL,WAIhBW,EAAeE,kBACfjU,KAAKkU,gBAAkBH,CACzB,CA2DA,OAzDAP,EAAYnR,UAAU8R,WAAa,SAAUhJ,GAC3C,QAASiJ,GAASjJ,EACpB,EAEAqI,EAAYnR,UAAUsC,IAAM,SAAUwG,GACpCiJ,GAASjJ,GAAMnL,KAAKyT,IAAKzT,KAAK6K,UAAW7K,KAAKyC,MAAOzC,KAAKkU,gBAC5D,EAEAV,EAAYnR,UAAUgS,SAAW,WAC/B,OAAOrU,KAAKyC,KACd,EAEA+Q,EAAYc,gBAAkB,SAAUC,EAAcC,EAAcC,GAClE,IACI1R,EACAC,EAFA0R,GAAeC,EAAAA,EAAAA,IAAUH,EAAeD,GAsB5C,OAlBIK,EAAAA,EAAAA,IAAmBF,IAErB1R,EAAoByR,EAAY,EAAI,MAAQ,SAC5C1R,EAAY,WACH6R,EAAAA,EAAAA,IAAmBF,EAAenB,KAE3CvQ,EAAoByR,EAAY,EAAI,SAAW,MAC/C1R,EAAY,WAEZC,EAAoB,SAGlBD,EADE2R,EAAe,GAAKA,EAAenB,GACzBkB,EAAY,EAAI,QAAU,OAE1BA,EAAY,EAAI,OAAS,SAIlC,CACLrB,SAAUsB,EACV3R,UAAWA,EACXC,kBAAmBA,EAEvB,EAEAwQ,EAAYqB,sBAAwB,SAAUhK,GAC5C,IAAIrG,EAAY,CACdC,cAAeoG,EAAUiK,SACzBpQ,eAAgBmG,EAAUnG,gBAG5B,OADAF,EAAUqG,EAAUiK,SAAW,SAAWjK,EAAUnG,eAC7CF,CACT,EAEAgP,EAAYuB,cAAgB,SAAUlK,GACpC,IAAImK,EAAanK,EAAUlI,IAAI,WAC/B,OAAOkI,EAAUlI,IAAI,aAChBkI,EAAUlI,IAAI,iBAAmBqS,GAAcA,EAAW9T,KACjE,EAEOsS,CACT,CAtFA,GAyFIY,GAAW,CACba,SAAU,SAAUxB,EAAK5I,EAAWpI,EAAOsR,GACzC,IAAImB,EAAQrK,EAAUlI,IAAI,CAAC,WAAY,SAMvC,GAJc,SAAVuS,GAAoBzB,EAAIK,kBAC1BoB,EAAQzB,EAAIK,gBAAgB,aAGzBoB,EAAL,CAIA,IAAInJ,EAASlB,EAAUvC,KAAK0D,YACxBmJ,EAASpB,EAAeqB,UACxBC,EAAM,CAACtJ,EAAO,GAAI,GAClBuJ,EAAM,CAACvJ,EAAO,GAAI,GAClBwJ,EAAUF,EAAI,GAAKC,EAAI,GAEvBH,KACFK,EAAAA,GAAAA,gBAAiBH,EAAKA,EAAKF,IAC3BK,EAAAA,GAAAA,gBAAiBF,EAAKA,EAAKH,IAG7B,IAAIpL,GAAY0L,EAAAA,EAAAA,QAAO,CACrBC,QAAS,SACR7K,EAAUhI,SAAS,CAAC,WAAY,cAAc8S,gBAC7CC,EAAO,IAAIzS,EAAAA,EAAa,CAC1ByC,MAAO,CACLiQ,GAAIR,EAAI,GACRS,GAAIT,EAAI,GACRU,GAAIT,EAAI,GACRU,GAAIV,EAAI,IAEVlS,MAAO2G,EACPkM,uBAAwBxC,EAAIwC,wBAA0B,EACtD7R,QAAQ,EACRX,GAAI,IAENN,EAAQ+S,qBAAqBN,EAAKhQ,MAAOgQ,EAAKxS,MAAM+S,WACpDP,EAAKQ,KAAO,OACZ3T,EAAMkC,IAAIiR,GACV,IAAIS,EAASxL,EAAUlI,IAAI,CAAC,WAAY,WAExC,GAAc,MAAV0T,EAAgB,CAClB,IAAIC,EAAYzL,EAAUlI,IAAI,CAAC,WAAY,gBAEvC4T,EAAAA,EAAAA,UAASF,KAEXA,EAAS,CAACA,EAAQA,MAGhBE,EAAAA,EAAAA,UAASD,KAAcE,EAAAA,EAAAA,UAASF,MAElCA,EAAY,CAACA,EAAWA,IAG1B,IAAIG,GAAcC,EAAAA,GAAAA,IAAsB7L,EAAUlI,IAAI,CAAC,WAAY,kBAAoB,EAAG2T,GACtFK,EAAgBL,EAAU,GAC1BM,EAAiBN,EAAU,IAC/BrP,EAAAA,EAAAA,MAAK,CAAC,CACJ4P,OAAQpD,EAAIL,SAAWzD,KAAK4D,GAAK,EACjCuD,OAAQL,EAAY,GACpB5Q,EAAG,GACF,CACDgR,OAAQpD,EAAIL,SAAWzD,KAAK4D,GAAK,EACjCuD,OAAQL,EAAY,GACpB5Q,EAAG8J,KAAKoH,MAAM1B,EAAI,GAAKC,EAAI,KAAOD,EAAI,GAAKC,EAAI,KAAOD,EAAI,GAAKC,EAAI,KAAOD,EAAI,GAAKC,EAAI,QACrF,SAAU0B,EAAOC,GACnB,GAAsB,SAAlBZ,EAAOY,IAAsC,MAAjBZ,EAAOY,GAAgB,CACrD,IAAIC,GAASC,EAAAA,GAAAA,IAAad,EAAOY,IAASN,EAAgB,GAAIC,EAAiB,EAAGD,EAAeC,EAAgB7M,EAAUqN,QAAQ,GAE/HvR,EAAImR,EAAMnR,EAAImR,EAAMF,OACpBO,EAAK9B,EAAUD,EAAMD,EACzB6B,EAAOpF,KAAK,CACVsB,SAAU4D,EAAMH,OAChBzR,EAAGiS,EAAG,GAAKxR,EAAI8J,KAAK2H,IAAI7D,EAAIL,UAC5BtP,EAAGuT,EAAG,GAAKxR,EAAI8J,KAAK4H,IAAI9D,EAAIL,UAC5BhP,QAAQ,EACRX,GAAI,KAENhB,EAAMkC,IAAIuS,EACZ,CACF,GACF,CAzEA,CA0EF,EACAM,cAAe,SAAU/D,EAAK5I,EAAWpI,EAAOsR,GAC9C,IAAI0D,EAAWC,GAAoBjV,EAAOsR,EAAgBlJ,EAAW4I,GACjEkE,EAAWC,GAAenV,EAAOsR,EAAgBlJ,EAAW4I,GAKhE,GAJAoE,GAAmBhN,EAAW8M,EAAUF,GACxCK,GAAoBrV,EAAOsR,EAAgBlJ,EAAW4I,EAAIG,eAGtD/I,EAAUlI,IAAI,CAAC,YAAa,gBAAiB,CAC/C,IAAIoV,GAAYC,EAAAA,GAAAA,KAAkBC,EAAAA,EAAAA,KAAIN,GAAU,SAAU/N,GACxD,MAAO,CACLA,MAAOA,EACPsO,SAAUtO,EAAMnG,GAChB0U,YAAa,CACXC,OAAQxO,EAAMwO,QAGpB,MACAC,EAAAA,GAAAA,IAAYN,EACd,CACF,EACAO,SAAU,SAAU7E,EAAK5I,EAAWpI,EAAOsR,GACzC,IAAI5I,GAAOoN,EAAAA,EAAAA,UAAS9E,EAAI6E,SAAUzN,EAAUlI,IAAI,SAEhD,GAAKwI,EAAL,CAIA,IAQIqN,EAOAC,EAfAC,EAAe7N,EAAUlI,IAAI,gBAC7BgR,EAAgBF,EAAIE,cACpB/Q,EAAiBiI,EAAUhI,SAAS,iBACpC8V,EAAM9N,EAAUlI,IAAI,YAAc,EAClCoJ,EAASlB,EAAUvC,KAAK0D,YACxB4M,EAAY7M,EAAO,GAAKA,EAAO,IAAM,EAAI,EACzC8M,EAAM,CAAkB,UAAjBH,EAA2B3M,EAAO,GAAK6M,EAAYD,EAAuB,QAAjBD,EAAyB3M,EAAO,GAAK6M,EAAYD,GAAO5M,EAAO,GAAKA,EAAO,IAAM,EACrJ+M,GAAqBJ,GAAgBjF,EAAIC,YAAcC,EAAgBgF,EAAM,GAEzEI,EAAelO,EAAUlI,IAAI,cAEb,MAAhBoW,IACFA,EAAeA,EAAexF,GAAK,KAKjCuF,GAAqBJ,GACvBF,EAAchF,GAAYc,gBAAgBb,EAAIL,SAA0B,MAAhB2F,EAAuBA,EAAetF,EAAIL,SAClGO,IAEA6E,EAAcQ,GAAcvF,EAAIL,SAAUsF,EAAcK,GAAgB,EAAGhN,GAC3E0M,EAAyBhF,EAAIgF,uBAEC,MAA1BA,IACFA,EAAyB9I,KAAKC,IAAI6I,EAAyB9I,KAAK4H,IAAIiB,EAAYpF,YAC/E6F,SAASR,KAA4BA,EAAyB,QAInE,IAAIS,EAAWtW,EAAeuW,UAC1BC,EAAcvO,EAAUlI,IAAI,gBAAgB,IAAS,CAAC,EACtD0W,EAAWD,EAAYC,SACvBC,GAAWf,EAAAA,EAAAA,UAAS9E,EAAI8F,qBAAsBH,EAAYE,SAAUb,GACpEvV,EAAS,IAAIC,EAAAA,GAAa,CAC5BiC,EAAGyT,EAAI,GACP/U,EAAG+U,EAAI,GACPzF,SAAUoF,EAAYpF,SACtBhP,OAAQoP,GAAYuB,cAAclK,GAClCzH,OAAOC,EAAAA,EAAAA,IAAgBT,EAAgB,CACrCzB,KAAMgK,EACNqO,KAAMN,EACNO,SAAU,WACV1U,MAAOuU,EACPD,SAAUA,EACV/V,KAAMV,EAAeW,gBAAkBsH,EAAUlI,IAAI,CAAC,WAAY,YAAa,UAC/E4C,MAAO3C,EAAeD,IAAI,UAAY6V,EAAYzV,UAClDiB,cAAepB,EAAeD,IAAI,kBAAoB6V,EAAYxV,oBAEpES,GAAI,IAWN,GATAN,EAAQuW,iBAAiB,CACvB7G,GAAI3P,EACJyW,eAAgB9O,EAChB+O,SAAUzO,IAEZjI,EAAO2W,WAAa1O,EAEpBjI,EAAOkT,KAAO,OAEVvL,EAAUlI,IAAI,gBAAiB,CACjC,IAAI6B,EAAYgP,GAAYqB,sBAAsBhK,GAClDrG,EAAUsV,WAAa,WACvBtV,EAAU2G,KAAOA,GACjB5G,EAAAA,EAAAA,GAAUrB,GAAQsB,UAAYA,CAChC,CAGAuP,EAAepP,IAAIzB,GACnBA,EAAO+Q,kBACPxR,EAAMkC,IAAIzB,GACVA,EAAO6W,oBAzEP,CA0EF,GAGF,SAASf,GAAc5F,EAAU4G,EAAcC,EAAYlO,GACzD,IACIhJ,EACAC,EAFA0R,GAAeC,EAAAA,EAAAA,IAAUsF,EAAa7G,GAGtCmC,EAAUxJ,EAAO,GAAKA,EAAO,GAC7BmO,EAA0B,UAAjBF,IAA6BzE,GAA4B,UAAjByE,GAA4BzE,EAkBjF,OAhBIX,EAAAA,EAAAA,IAAmBF,EAAenB,GAAK,IACzCvQ,EAAoBkX,EAAS,SAAW,MACxCnX,EAAY,WACH6R,EAAAA,EAAAA,IAAmBF,EAAoB,IAALnB,KAC3CvQ,EAAoBkX,EAAS,MAAQ,SACrCnX,EAAY,WAEZC,EAAoB,SAGlBD,EADE2R,EAAoB,IAALnB,IAAYmB,EAAenB,GAAK,EACrC2G,EAAS,OAAS,QAElBA,EAAS,QAAU,QAI5B,CACL9G,SAAUsB,EACV3R,UAAWA,EACXC,kBAAmBA,EAEvB,CAEA,SAAS6U,GAAmBhN,EAAW8M,EAAUwC,GAC/C,KAAIC,EAAAA,EAAAA,IAAoBvP,EAAUvC,MAAlC,CAOA,IAAI+R,EAAexP,EAAUlI,IAAI,CAAC,YAAa,iBAC3C2X,EAAezP,EAAUlI,IAAI,CAAC,YAAa,iBAG/CgV,EAAWA,GAAY,GACvBwC,EAAUA,GAAW,GACrB,IAAII,EAAa5C,EAAS,GACtB6C,EAAY7C,EAAS,GACrB8C,EAAY9C,EAASA,EAAS5M,OAAS,GACvC2P,EAAY/C,EAASA,EAAS5M,OAAS,GACvC4P,EAAYR,EAAQ,GACpBS,EAAWT,EAAQ,GACnBU,EAAWV,EAAQA,EAAQpP,OAAS,GACpC+P,EAAWX,EAAQA,EAAQpP,OAAS,IAEnB,IAAjBsP,GACFU,GAASR,GACTQ,GAASJ,IACAK,GAAqBT,EAAYC,KACtCH,GACFU,GAASP,GACTO,GAASH,KAETG,GAASR,GACTQ,GAASJ,MAIQ,IAAjBL,GACFS,GAASN,GACTM,GAASF,IACAG,GAAqBN,EAAWD,KACrCH,GACFS,GAASL,GACTK,GAASD,KAETC,GAASN,GACTM,GAASF,IA1Cb,CA6CF,CAEA,SAASE,GAASlI,GAChBA,IAAOA,EAAGuF,QAAS,EACrB,CAEA,SAAS4C,GAAqBC,EAASC,GAErC,IAAIC,EAAYF,GAAWA,EAAQtX,kBAAkB+F,QACjD0R,EAAWF,GAAQA,EAAKvX,kBAAkB+F,QAE9C,GAAKyR,GAAcC,EAAnB,CAMA,IAAIC,EAAgBC,EAAAA,SAAoB,IAIxC,OAHAA,EAAAA,OAAkBD,EAAeA,GAAgBJ,EAAQ7H,UACzD+H,EAAUI,eAAeD,EAAAA,IAAe,GAAID,EAAeJ,EAAQO,sBACnEJ,EAASG,eAAeD,EAAAA,IAAe,GAAID,EAAeH,EAAKM,sBACxDL,EAAUM,UAAUL,EAR3B,CASF,CAEA,SAAStC,GAAqBJ,GAC5B,MAAwB,WAAjBA,GAA8C,WAAjBA,CACtC,CAEA,SAASgD,GAAYC,EAAaC,EAAeC,EAAcC,EAAeC,GAK5E,IAJA,IAAI5B,EAAU,GACV9E,EAAM,GACNC,EAAM,GAEDxK,EAAI,EAAGA,EAAI6Q,EAAY5Q,OAAQD,IAAK,CAC3C,IAAIkR,EAAYL,EAAY7Q,GAAGmR,MAC/B5G,EAAI,GAAK2G,EACT3G,EAAI,GAAK,EACTC,EAAI,GAAK0G,EACT1G,EAAI,GAAKuG,EAELD,KACFpG,EAAAA,GAAAA,gBAAiBH,EAAKA,EAAKuG,IAC3BpG,EAAAA,GAAAA,gBAAiBF,EAAKA,EAAKsG,IAI7B,IAAIM,EAAS,IAAI/Y,EAAAA,EAAa,CAC5ByC,MAAO,CACLiQ,GAAIR,EAAI,GACRS,GAAIT,EAAI,GACRU,GAAIT,EAAI,GACRU,GAAIV,EAAI,IAEVlS,MAAO0Y,EACPrY,GAAI,EACJ0Y,WAAW,EACX/X,QAAQ,IAEVjB,EAAQ+S,qBAAqBgG,EAAOtW,MAAOsW,EAAO9Y,MAAM+S,WACxD+F,EAAO9F,KAAO2F,EAAa,IAAMJ,EAAY7Q,GAAGsR,UAChDjC,EAAQ1P,KAAKyR,EACf,CAEA,OAAO/B,CACT,CAEA,SAASzC,GAAoBjV,EAAOsR,EAAgBlJ,EAAW4I,GAC7D,IAAInL,EAAOuC,EAAUvC,KACjB+T,EAAYxR,EAAUhI,SAAS,YAC/BqS,EAAQmH,EAAU1Z,IAAI,QAM1B,GAJc,SAAVuS,GAAoBzB,EAAIK,kBAC1BoB,EAAQzB,EAAIK,gBAAgB,aAGzBoB,IAAS5M,EAAKoD,MAAMS,UAAzB,CAWA,IAPA,IAAImQ,EAAiBD,EAAUxZ,SAAS,aACpCgZ,EAAepI,EAAIG,cAAgByI,EAAU1Z,IAAI,UACjDgZ,EAAcrT,EAAKiU,iBACnB9E,EAAWiE,GAAYC,EAAa5H,EAAeqB,UAAWyG,GAAc7R,EAAAA,EAAAA,UAASsS,EAAe3G,eAAgB,CACtHyB,OAAQvM,EAAUlI,IAAI,CAAC,WAAY,YAAa,YAC9C,SAEKmI,EAAI,EAAGA,EAAI2M,EAAS1M,OAAQD,IACnCrI,EAAMkC,IAAI8S,EAAS3M,IAGrB,OAAO2M,CAbP,CAcF,CAEA,SAASK,GAAoBrV,EAAOsR,EAAgBlJ,EAAW+I,GAC7D,IAAItL,EAAOuC,EAAUvC,KACjBkU,EAAiB3R,EAAUhI,SAAS,aAExC,GAAK2Z,EAAe7Z,IAAI,UAAW2F,EAAKoD,MAAMS,UAA9C,CAIA,IAAIsQ,EAAmBnU,EAAKoU,sBAE5B,GAAKD,EAAiB1R,OAUtB,IANA,IAAIuR,EAAiBE,EAAe3Z,SAAS,aACzCgZ,EAAejI,EAAgB4I,EAAe7Z,IAAI,UAClDga,GAAqB3S,EAAAA,EAAAA,UAASsS,EAAe3G,gBAAgB3L,EAAAA,EAAAA,UAASa,EAAUhI,SAAS,YAAY8S,eAAgB,CACvHyB,OAAQvM,EAAUlI,IAAI,CAAC,WAAY,YAAa,aAGzCmI,EAAI,EAAGA,EAAI2R,EAAiB1R,OAAQD,IAG3C,IAFA,IAAI8R,EAAgBlB,GAAYe,EAAiB3R,GAAIiJ,EAAeqB,UAAWyG,EAAcc,EAAoB,cAAgB7R,GAExH+R,EAAI,EAAGA,EAAID,EAAc7R,OAAQ8R,IACxCpa,EAAMkC,IAAIiY,EAAcC,GAlB5B,CAqBF,CAEA,SAASjF,GAAenV,EAAOsR,EAAgBlJ,EAAW4I,GACxD,IAAInL,EAAOuC,EAAUvC,KACjBpH,GAAOqX,EAAAA,EAAAA,UAAS9E,EAAIqJ,cAAejS,EAAUlI,IAAI,CAAC,YAAa,UAEnE,GAAKzB,IAAQoH,EAAKoD,MAAMS,UAAxB,CAIA,IAAI4Q,EAAalS,EAAUhI,SAAS,aAChCma,EAAcD,EAAWpa,IAAI,UAC7Bsa,EAAS3U,EAAK4U,gBAEdC,IAAiB5E,EAAAA,EAAAA,UAAS9E,EAAI2J,YAAaL,EAAWpa,IAAI,YAAc,GAAK4Q,GAAK,IAClFiF,EAAchF,GAAYc,gBAAgBb,EAAIL,SAAU+J,EAAe1J,EAAII,gBAC3EwJ,EAAkBxS,EAAUyS,eAAiBzS,EAAUyS,eAAc,GACrE3F,EAAW,GACXvT,EAASoP,GAAYuB,cAAclK,GACnC1G,EAAe0G,EAAUlI,IAAI,gBA2DjC,OA1DAsE,EAAAA,EAAAA,MAAKgW,GAAQ,SAAUM,EAAWtG,GAChC,IAAImF,EAAgC,YAApB9T,EAAKoD,MAAM9K,KAAqB0H,EAAKoD,MAAM8R,oBAAoBD,EAAUnB,WAAamB,EAAUnB,UAC5GqB,EAAiBF,EAAUE,eAC3BC,EAAWH,EAAUG,SACrBC,EAAiBZ,EAErB,GAAIM,GAAmBA,EAAgBjB,GAAY,CACjD,IAAIwB,EAAkBP,EAAgBjB,IAElCyB,EAAAA,EAAAA,UAASD,IAAoBA,EAAgB9b,YAC/C6b,EAAiB,IAAI1T,EAAAA,EAAM2T,EAAgB9b,UAAWib,EAAYlS,EAAUtI,SAEhF,CAEA,IAAIub,EAAYH,EAAepa,gBAAkBsH,EAAUlI,IAAI,CAAC,WAAY,YAAa,UACrFqZ,EAAY1T,EAAKyV,YAAY3B,GAC7BlZ,EAAS,IAAIC,EAAAA,GAAa,CAC5BiC,EAAG4W,EACHlY,EAAG2P,EAAIC,YAAcD,EAAII,eAAiBmJ,EAC1C5J,SAAUoF,EAAYpF,SACtBhP,OAAQA,EACRX,GAAI,IAAM8Z,EAAUS,OAAS,GAC7B5a,OAAOC,EAAAA,EAAAA,IAAgBsa,EAAgB,CACrCxc,KAAMsc,EACNlY,MAAOoY,EAAeM,WAAW,SAAS,IAASzF,EAAYzV,UAC/DiB,cAAe2Z,EAAeM,WAAW,iBAAiB,IAASN,EAAeM,WAAW,YAAY,IAASzF,EAAYxV,kBAC9HM,MAAM4a,EAAAA,EAAAA,YAAWJ,GAAaA,EAOhB,aAAdxV,EAAK1H,KAAsB8c,EAAyB,UAAdpV,EAAK1H,KAAmBwb,EAAY,GAAKA,EAAWnF,GAAS6G,MAKvG,GAFA5a,EAAOkT,KAAO,SAAWgG,EAErBjY,EAAc,CAChB,IAAIK,EAAYgP,GAAYqB,sBAAsBhK,GAClDrG,EAAUsV,WAAa,YACvBtV,EAAUqH,MAAQ6R,EAClBlZ,EAAU2Z,UAAYlH,EAEJ,aAAd3O,EAAK1H,OACP4D,EAAU4Z,UAAYhC,IAGxB7X,EAAAA,EAAAA,GAAUrB,GAAQsB,UAAYA,CAChC,CAGAuP,EAAepP,IAAIzB,GACnBA,EAAO+Q,kBACP0D,EAASlN,KAAKvH,GACdT,EAAMkC,IAAIzB,GACVA,EAAO6W,oBACT,IACOpC,CAtEP,CAuEF,CAEA,UCxkBO,SAAS0G,GAAa9V,GAC3B,IAEInF,EAFAkb,EAAkB/V,EAAiB5F,IAAI,QACvC4b,EAAahW,EAAiB1F,SAASyb,EAAkB,SAW7D,MARwB,SAApBA,GACFlb,EAAQmb,EAAW5I,eACnBvS,EAAME,KAAO,MACgB,WAApBgb,IACTlb,EAAQmb,EAAWC,eACnBpb,EAAMgU,OAAS,MAGVhU,CACT,CAKO,SAASqb,GAAmBpQ,EAAUxD,EAAWtC,EAAkB/F,EAAKkc,GAC7E,IAAI7S,EAAQtD,EAAiB5F,IAAI,SAC7BxB,EAAOwd,GAAc9S,EAAOhB,EAAUvC,KAAMuC,EAAUtI,QAASgG,EAAiB5F,IAAI,qBAAsB,CAC5Gic,UAAWrW,EAAiB5F,IAAI,CAAC,QAAS,cAC1Ckc,UAAWtW,EAAiB5F,IAAI,CAAC,QAAS,gBAExCoa,EAAaxU,EAAiB1F,SAAS,SACvCic,EAAWC,EAAAA,GAA6BhC,EAAWpa,IAAI,YAAc,GACrE6W,EAAOuD,EAAW5D,UAClBzV,EAAWsb,EAAAA,GAA4B7d,EAAMqY,GAC7CxF,EAAW0K,EAAS1K,SACpBjP,EAAQrB,EAASqB,MAAQ+Z,EAAS,GAAKA,EAAS,GAChD/a,EAASL,EAASK,OAAS+a,EAAS,GAAKA,EAAS,GAElDvZ,EAAQmZ,EAASnZ,MACX,UAAVA,IAAsByO,EAAS,IAAMjP,GAC3B,WAAVQ,IAAuByO,EAAS,IAAMjP,EAAQ,GAC9C,IAAIf,EAAgB0a,EAAS1a,cACX,WAAlBA,IAA+BgQ,EAAS,IAAMjQ,GAC5B,WAAlBC,IAA+BgQ,EAAS,IAAMjQ,EAAS,GAEvDkb,GAAmBjL,EAAUjP,EAAOhB,EAAQvB,GAC5C,IAAI0c,EAAUnC,EAAWpa,IAAI,mBAExBuc,GAAuB,SAAZA,IACdA,EAAUrU,EAAUlI,IAAI,CAAC,WAAY,YAAa,WAGpD0L,EAASzE,MAAQ,CAEfxE,EAAG4O,EAAS,GACZlQ,EAAGkQ,EAAS,GACZ5Q,OAAOC,EAAAA,EAAAA,IAAgB0Z,EAAY,CACjC5b,KAAMA,EACNqY,KAAMA,EACNlW,KAAMyZ,EAAWxZ,eACjB3B,QAASkd,EACTrd,gBAAiByd,IAGnBzb,GAAI,GAER,CAEA,SAASwb,GAAmBjL,EAAUjP,EAAOhB,EAAQvB,GACnD,IAAI2c,EAAY3c,EAAI0C,WAChBka,EAAa5c,EAAI2C,YACrB6O,EAAS,GAAKrE,KAAK0P,IAAIrL,EAAS,GAAKjP,EAAOoa,GAAapa,EACzDiP,EAAS,GAAKrE,KAAK0P,IAAIrL,EAAS,GAAKjQ,EAAQqb,GAAcrb,EAC3DiQ,EAAS,GAAKrE,KAAK2P,IAAItL,EAAS,GAAI,GACpCA,EAAS,GAAKrE,KAAK2P,IAAItL,EAAS,GAAI,EACtC,CAEO,SAAS2K,GAAc9S,EAAOvD,EAAM/F,EAASgd,EAAmB9L,GACrE5H,EAAQvD,EAAKoD,MAAMI,MAAMD,GACzB,IAAI1K,EAAOmH,EAAKoD,MAAM8T,SAAS,CAC7B3T,MAAOA,GACN,CAGD+S,UAAWnL,EAAImL,YAEbC,EAAYpL,EAAIoL,UAEpB,GAAIA,EAAW,CACb,IAAIY,EAAW,CACb5T,MAAO6T,EAAAA,GAA2BpX,EAAM,CACtCuD,MAAOA,IAET8T,cAAerX,EAAKkC,IACpB8H,UAAWhK,EAAK2O,MAChB2I,WAAY,IAEd3c,EAAAA,KAAYsc,GAAmB,SAAUM,GACvC,IAAIC,EAASvd,EAAQwd,iBAAiBF,EAAQG,aAC1C5B,EAAYyB,EAAQI,gBACpBC,EAAaJ,GAAUA,EAAOK,cAAc/B,GAChD8B,GAAcT,EAASG,WAAWnV,KAAKyV,EACzC,IAEIjd,EAAAA,SAAgB4b,GAClB1d,EAAO0d,EAAUuB,QAAQ,UAAWjf,GAC3B8B,EAAAA,WAAkB4b,KAC3B1d,EAAO0d,EAAUY,GAErB,CAEA,OAAOte,CACT,CACO,SAASkf,GAAuB/X,EAAMuD,EAAOyU,GAClD,IAAIlL,EAAYD,EAAOoL,SAGvB,OAFApL,EAAO0B,OAAOzB,EAAWA,EAAWkL,EAAWlN,UAC/C+B,EAAOqL,UAAUpL,EAAWA,EAAWkL,EAAWtM,UAC3C7Q,EAAQoY,eAAe,CAACjT,EAAKyV,YAAYlS,IAASyU,EAAW5M,aAAe,IAAM4M,EAAWzM,gBAAkB,IAAMyM,EAAWtD,aAAe,IAAK5H,EAC7J,CACO,SAASqL,GAAkC5U,EAAOwC,EAAUiS,EAAYzV,EAAWtC,EAAkB/F,GAE1G,IAAIke,EAAalN,GAAAA,gBAA4B8M,EAAWlN,SAAU,EAAGkN,EAAWzM,gBAChFyM,EAAWtD,YAAczU,EAAiB5F,IAAI,CAAC,QAAS,WACxD8b,GAAmBpQ,EAAUxD,EAAWtC,EAAkB/F,EAAK,CAC7DwR,SAAUqM,GAAuBxV,EAAUvC,KAAMuD,EAAOyU,GACxD/a,MAAOmb,EAAW3d,UAClBiB,cAAe0c,EAAW1d,mBAE9B,CACO,SAAS2d,GAAcC,EAAIC,EAAIlO,GAEpC,OADAA,EAAYA,GAAa,EAClB,CACLkD,GAAI+K,EAAGjO,GACPmD,GAAI8K,EAAG,EAAIjO,GACXoD,GAAI8K,EAAGlO,GACPqD,GAAI6K,EAAG,EAAIlO,GAEf,CACO,SAASmO,GAAcrO,EAAIC,EAAIC,GAEpC,OADAA,EAAYA,GAAa,EAClB,CACLvN,EAAGqN,EAAGE,GACN7O,EAAG2O,EAAG,EAAIE,GACV5N,MAAO2N,EAAGC,GACV5O,OAAQ2O,EAAG,EAAIC,GAEnB,CC9IO,SAASoO,GAAOC,EAAWnW,EAAW4I,GAC3CA,EAAMA,GAAO,CAAC,EACd,IAAIwN,EAAOD,EAAU5W,iBACjB9B,EAAOuC,EAAUvC,KACjByY,EAAS,CAAC,EACVG,EAAoB5Y,EAAK6Y,kBAAkB,GAC3CC,EAAkB9Y,EAAK0L,SACvBqN,EAAeH,EAAoB,SAAWE,EAC9C/O,EAAU/J,EAAKkC,IACf7E,EAAOsb,EAAKK,UACZC,EAAY,CAAC5b,EAAKP,EAAGO,EAAKP,EAAIO,EAAKZ,MAAOY,EAAK7B,EAAG6B,EAAK7B,EAAI6B,EAAK5B,QAChEyd,EAAM,CACRjgB,KAAM,EACNkgB,MAAO,EACPjgB,IAAK,EACLkgB,OAAQ,EACRC,OAAQ,GAENC,EAAa/W,EAAUlI,IAAI,WAAa,EACxCkf,EAAuB,MAAZxP,EAAkB,CAACkP,EAAU,GAAKK,EAAYL,EAAU,GAAKK,GAAc,CAACL,EAAU,GAAKK,EAAYL,EAAU,GAAKK,GAErI,GAAIV,EAAmB,CACrB,IAAIY,EAAcZ,EAAkBa,cAAcb,EAAkBnD,YAAY,IAChF8D,EAASL,EAAIG,QAAUhS,KAAK2P,IAAI3P,KAAK0P,IAAIyC,EAAaD,EAAS,IAAKA,EAAS,GAC/E,CAGAd,EAAO/M,SAAW,CAAa,MAAZ3B,EAAkBwP,EAASL,EAAIH,IAAiBE,EAAU,GAAgB,MAAZlP,EAAkBwP,EAASL,EAAIH,IAAiBE,EAAU,IAE3IR,EAAO3N,SAAWzD,KAAK4D,GAAK,GAAiB,MAAZlB,EAAkB,EAAI,GAEvD,IAAI2P,EAAS,CACXxgB,KAAM,EACNkgB,OAAQ,EACRngB,MAAO,EACPkgB,MAAO,GAETV,EAAOlN,eAAiBkN,EAAOnN,cAAgBmN,EAAOpN,cAAgBqO,EAAOZ,GAC7EL,EAAOrN,YAAcwN,EAAoBW,EAASL,EAAIJ,IAAoBS,EAASL,EAAIG,QAAU,EAE7F9W,EAAUlI,IAAI,CAAC,WAAY,aAC7Boe,EAAOnN,eAAiBmN,EAAOnN,eAG7B3Q,EAAAA,SAAgBwQ,EAAIwO,YAAapX,EAAUlI,IAAI,CAAC,YAAa,cAC/Doe,EAAOlN,gBAAkBkN,EAAOlN,gBAIlC,IAAIuJ,EAAcvS,EAAUlI,IAAI,CAAC,YAAa,WAI9C,OAHAoe,EAAO3D,YAA+B,QAAjBiE,GAA0BjE,EAAcA,EAE7D2D,EAAOtd,GAAK,EACLsd,CACT,CCxDA,IAAImB,GAEJ,SAAU1hB,GAGR,SAAS0hB,IACP,OAAkB,OAAX1hB,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,IAC7D,CA4EA,OAhFAe,EAAAA,EAAAA,IAAUmhB,EAAsB1hB,GAUhC0hB,EAAqB7f,UAAUiM,aAAe,SAAUD,EAAUxC,EAAOhB,EAAWtC,EAAkB/F,GACpG,IAAI8F,EAAOuC,EAAUvC,KACjB2Y,EAAO3Y,EAAK2Y,KACZ3C,EAAkB/V,EAAiB5F,IAAI,QACvCwf,EAAcC,GAAanB,EAAM3Y,GAAM+Z,aAAa/Z,GAAMga,kBAC1DC,EAAaja,EAAKyZ,cAAczZ,EAAKyV,YAAYlS,GAAO,IAE5D,GAAIyS,GAAuC,SAApBA,EAA4B,CACjD,IAAIkE,EAAUC,GAAwBla,GAClCsH,EAAgB6S,GAAoBpE,GAAiBhW,EAAMia,EAAYJ,GAC3EtS,EAAczM,MAAQof,EACtBnU,EAASE,WAAasB,EAAcjP,KACpCyN,EAASyB,QAAUD,CACrB,CAEA,IAAIyQ,EAAaqC,GAA2B1B,EAAK1Z,MAAOsD,GACxD4X,GACA5W,EAAOwC,EAAUiS,EAAYzV,EAAWtC,EAAkB/F,EAC5D,EAMA0f,EAAqB7f,UAAUmP,mBAAqB,SAAU3F,EAAOhB,EAAWtC,GAC9E,IAAI+X,EAAaqC,GAA2B9X,EAAUvC,KAAK2Y,KAAK1Z,MAAOsD,EAAW,CAChFoX,aAAa,IAGf3B,EAAWtD,YAAczU,EAAiB5F,IAAI,CAAC,SAAU,WACzD,IAAIkW,EAAM4J,GAAkC5X,EAAUvC,KAAMuD,EAAOyU,GACnE,MAAO,CACLlb,EAAGyT,EAAI,GACP/U,EAAG+U,EAAI,GACPzF,SAAUkN,EAAWlN,UAAYkN,EAAWzM,eAAiB,EAAIlE,KAAK4D,GAAK,GAE/E,EAMA2O,EAAqB7f,UAAU6N,sBAAwB,SAAUkF,EAAWwN,EAAO/X,EAAWtC,GAC5F,IAAID,EAAOuC,EAAUvC,KACjB2Y,EAAO3Y,EAAK2Y,KACZvR,EAAapH,EAAKga,iBAAgB,GAClCH,EAAcC,GAAanB,EAAM3Y,GAAM+Z,aAAa/Z,GAAMga,kBAC1DO,EAAwB,MAAbva,EAAKkC,IAAc,EAAI,EAClCsY,EAAe,CAAC1N,EAAUhQ,EAAGgQ,EAAUtR,GAC3Cgf,EAAaD,IAAaD,EAAMC,GAChCC,EAAaD,GAAYlT,KAAK0P,IAAI3P,EAAW,GAAIoT,EAAaD,IAC9DC,EAAaD,GAAYlT,KAAK2P,IAAI5P,EAAW,GAAIoT,EAAaD,IAC9D,IAAIE,GAAoBZ,EAAY,GAAKA,EAAY,IAAM,EACvDhQ,EAAc,CAAC4Q,EAAkBA,GACrC5Q,EAAY0Q,GAAYC,EAAaD,GAErC,IAAIG,EAAiB,CAAC,CACpBhf,cAAe,UACd,CACDuB,MAAO,WAET,MAAO,CACLH,EAAG0d,EAAa,GAChBhf,EAAGgf,EAAa,GAChB1P,SAAUgC,EAAUhC,SACpBjB,YAAaA,EACbC,cAAe4Q,EAAeH,GAElC,EAEOX,CACT,CAlFA,CAkFEzU,GAEF,SAAS2U,GAAanB,EAAM3Y,GAC1B,IAAImL,EAAM,CAAC,EAEX,OADAA,EAAInL,EAAKkC,IAAM,aAAelC,EAAK2O,MAC5BgK,EAAKmB,aAAa3O,EAC3B,CAEA,IAAIiP,GAAsB,CACxB9M,KAAM,SAAUtN,EAAMia,EAAYJ,GAChC,IAAIc,EAAcR,GAAyB,CAACF,EAAYJ,EAAY,IAAK,CAACI,EAAYJ,EAAY,IAAKe,GAAgB5a,IACvH,MAAO,CACL1H,KAAM,OACNkF,kBAAkB,EAClBF,MAAOqd,EAEX,EACAE,OAAQ,SAAU7a,EAAMia,EAAYJ,GAClC,IAAIiB,EAAYzT,KAAK2P,IAAI,EAAGhX,EAAKmH,gBAC7B4T,EAAOlB,EAAY,GAAKA,EAAY,GACxC,MAAO,CACLvhB,KAAM,OACNgF,MAAO6c,GAAyB,CAACF,EAAaa,EAAY,EAAGjB,EAAY,IAAK,CAACiB,EAAWC,GAAOH,GAAgB5a,IAErH,GAGF,SAAS4a,GAAgB5a,GACvB,MAAoB,MAAbA,EAAKkC,IAAc,EAAI,CAChC,CAEA,UCrHI8Y,GAEJ,SAAU9iB,GAGR,SAAS8iB,IACP,IAAI7iB,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAO0iB,EAAiB1iB,KACvBH,CACT,CA0DA,OAjEAM,EAAAA,EAAAA,IAAUuiB,EAAkB9iB,GAS5B8iB,EAAiB1iB,KAAO,cACxB0iB,EAAiBtiB,cAAgB,CAE/BE,KAAM,OAEND,EAAG,GACHL,KAAM,OAGN+H,MAAM,EACNN,gBAAgB,EAChBwD,MAAO,KACPD,OAAQ,KACR3H,KAAM,GAGNqL,UAAW,KACXiU,wBAAyB,IACzBxZ,UAAW,CACT9H,MAAO,UACP8C,MAAO,EACPnE,KAAM,UAER4iB,YAAa,CACXvhB,MAAO,yBAET2H,MAAO,CACL1I,MAAM,EACN2d,UAAW,KACXD,UAAW,OACXnZ,OAAQ,EACRxD,MAAO,OACPL,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBH,gBAAiB,OACjBC,YAAa,KACbC,YAAa,EACb8hB,aAAc,GAEhBvV,OAAQ,CACNhN,MAAM,EAENwiB,KAAM,2MACNC,KAAM,GAENle,OAAQ,GAGRxD,MAAO,OACP2hB,WAAY,EACZC,YAAa,OACbC,cAAe,EACfC,cAAe,EAEfC,SAAU,KAGPV,CACT,CAnEA,CAmEEnhB,EAAAA,GAEF,M,WCvEImL,IAAQC,EAAAA,EAAAA,MACRtG,GAAOhE,EAAAA,KASJ,SAASghB,GAASlb,EAAKvG,EAAK0hB,GACjC,IAAIC,GAAAA,EAAAA,KAAJ,CAIA,IAAI/T,EAAK5N,EAAI2M,QACb7B,GAAM8C,GAAIgU,UAAY9W,GAAM8C,GAAIgU,QAAU,CAAC,GAC3CC,GAAoBjU,EAAI5N,GACxB,IAAI8hB,EAAShX,GAAM8C,GAAIgU,QAAQrb,KAASuE,GAAM8C,GAAIgU,QAAQrb,GAAO,CAAC,GAClEub,EAAOJ,QAAUA,CANjB,CAOF,CAEA,SAASG,GAAoBjU,EAAI5N,GAW/B,SAAS+hB,EAAWC,EAAWC,GAC7BrU,EAAG/L,GAAGmgB,GAAW,SAAU9T,GACzB,IAAIgU,EAAMC,GAAmBniB,GAC7ByE,GAAKqG,GAAM8C,GAAIgU,SAAS,SAAUE,GAChCA,GAAUG,EAAGH,EAAQ5T,EAAGgU,EAAIxS,eAC9B,IACA0S,GAAuBF,EAAIG,SAAUriB,EACvC,GACF,CAlBI8K,GAAM8C,GAAI0U,cAIdxX,GAAM8C,GAAI0U,aAAc,EACxBP,EAAW,QAASthB,EAAAA,MAAa8hB,GAAS,UAC1CR,EAAW,YAAathB,EAAAA,MAAa8hB,GAAS,cAE9CR,EAAW,YAAaS,IAW1B,CAEA,SAASJ,GAAuBC,EAAUriB,GACxC,IAEIyiB,EAFAC,EAAUL,EAASM,QAAQpa,OAC3Bqa,EAAUP,EAASQ,QAAQta,OAG3Bma,EACFD,EAAkBJ,EAASM,QAAQD,EAAU,GACpCE,IACTH,EAAkBJ,EAASQ,QAAQD,EAAU,IAG3CH,IACFA,EAAgB/S,eAAiB,KACjC1P,EAAI0P,eAAe+S,GAEvB,CAEA,SAASD,GAAQV,EAAQ5T,EAAGwB,GAC1BoS,EAAOJ,QAAQ,QAAS,KAAMhS,EAChC,CAEA,SAAS6S,GAAQO,EAAahB,EAAQ5T,EAAGwB,GACvCoS,EAAOJ,QAAQoB,EAAa5U,EAAGwB,EACjC,CAEA,SAASyS,GAAmBniB,GAC1B,IAAIqiB,EAAW,CACbM,QAAS,GACTE,QAAS,IAOPnT,EAAiB,SAAU3F,GAC7B,IAAIgZ,EAAcV,EAAStY,EAAQ3L,MAE/B2kB,EACFA,EAAY9a,KAAK8B,IAEjBA,EAAQ2F,eAAiBA,EACzB1P,EAAI0P,eAAe3F,GAEvB,EAEA,MAAO,CACL2F,eAAgBA,EAChB2S,SAAUA,EAEd,CAEO,SAASW,GAAWzc,EAAKvG,GAC9B,IAAI2hB,GAAAA,EAAAA,KAAJ,CAIA,IAAI/T,EAAK5N,EAAI2M,QACTmV,GAAUhX,GAAM8C,GAAIgU,SAAW,CAAC,GAAGrb,GAEnCub,IACFhX,GAAM8C,GAAIgU,QAAQrb,GAAO,KAN3B,CAQF,CC1GA,IAAI0c,GAEJ,SAAUjlB,GAGR,SAASilB,IACP,IAAIhlB,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAO6kB,EAAgB7kB,KACtBH,CACT,CA6BA,OApCAM,EAAAA,EAAAA,IAAU0kB,EAAiBjlB,GAS3BilB,EAAgBpjB,UAAUvC,OAAS,SAAUgH,EAAwBvE,EAASC,GAC5E,IAAIoE,EAAqBrE,EAAQsE,aAAa,WAC1C6e,EAAY5e,EAAuBnE,IAAI,cAAgBiE,GAAsBA,EAAmBjE,IAAI,cAAgB,kBAGxHgjB,GAAwB,cAAenjB,GAAK,SAAU8iB,EAAa5U,EAAGwB,GAElD,SAAdwT,IAAyC,UAAhBJ,GAA2BI,EAAUna,QAAQ+Z,IAAgB,IACxFpT,EAAe,CACbtR,KAAM,oBACN0kB,YAAaA,EACblgB,EAAGsL,GAAKA,EAAEkV,QACV9hB,EAAG4M,GAAKA,EAAEmV,SAGhB,GACF,EAEAJ,EAAgBpjB,UAAUuK,OAAS,SAAUrK,EAASC,GACpDmjB,GAA0B,cAAenjB,EAC3C,EAEAijB,EAAgBpjB,UAAU0K,QAAU,SAAUxK,EAASC,GACrDmjB,GAA0B,cAAenjB,EAC3C,EAEAijB,EAAgB7kB,KAAO,cAChB6kB,CACT,CAtCA,CAsCE1f,EAAAA,GAEF,MCtCe,SAAS+f,GAAoBC,EAAQxjB,GAClD,IAEI4H,EAFA6M,EAAQ,GACRgJ,EAAc+F,EAAO/F,YAGzB,GAAmB,MAAfA,KAAyB7V,EAAc5H,EAAQwd,iBAAiBC,IAClE,MAAO,CACLhJ,MAAO,IAIX,IAAIgP,EAAO7b,EAAYQ,UACnByT,EAAY6H,EAAAA,GAAyBD,EAAMD,GAE/C,GAAiB,MAAb3H,GAAqBA,EAAY,GAAKnb,EAAAA,QAAemb,GACvD,MAAO,CACLpH,MAAO,IAIX,IAAInE,EAAKmT,EAAKE,iBAAiB9H,GAC3BjX,EAAWgD,EAAYC,iBAE3B,GAAID,EAAYgc,mBACdnP,EAAQ7M,EAAYgc,mBAAmB/H,IAAc,QAChD,GAAIjX,GAAYA,EAASif,YAC9B,GAAIL,EAAOM,UAAW,CACpB,IAAIC,EAAWnf,EAASof,cACpBC,EAAYrf,EAASkb,aAAaiE,GAClCG,EAAeD,EAAUhc,IACzBkc,EAAcJ,EAAS9b,IACvBmc,EAAkC,MAAjBF,GAAyC,WAAjBA,EAA4B,EAAI,EACzEG,EAAUZ,EAAKa,aAAaH,GAC5BI,EAAc,GAClBA,EAAYH,GAAkBX,EAAKrjB,IAAIikB,EAASxI,GAChD0I,EAAY,EAAIH,GAAkBX,EAAKrjB,IAAIqjB,EAAKe,mBAAmB,wBAAyB3I,GAC5FpH,EAAQ7P,EAASif,YAAYU,IAAgB,EAC/C,MACE9P,EAAQ7P,EAASif,YAAYJ,EAAKgB,UAAU/jB,EAAAA,IAAWkE,EAAS8f,YAAY,SAAUzc,GACpF,OAAOwb,EAAKa,aAAarc,EAC3B,IAAI4T,KAAe,QAEhB,GAAIvL,EAAI,CAEb,IAAIlN,EAAOkN,EAAGlP,kBAAkB+F,QAChC/D,EAAK4V,eAAe1I,EAAGuC,WACvB4B,EAAQ,CAACrR,EAAKP,EAAIO,EAAKZ,MAAQ,EAAGY,EAAK7B,EAAI6B,EAAK5B,OAAS,EAC3D,CAEA,MAAO,CACLiT,MAAOA,EACPnE,GAAIA,EAER,CCzDA,IAAIvF,IAAQC,EAAAA,EAAAA,MAQG,SAAS2Z,GAAY3a,EAAShK,EAASC,GACpD,IAAI8iB,EAAc/Y,EAAQ+Y,YACtBtO,EAAQ,CAACzK,EAAQnH,EAAGmH,EAAQzI,GAC5BiiB,EAASxZ,EACT2F,EAAiB3F,EAAQ2F,iBAAkB1E,EAAAA,EAAAA,MAAKhL,EAAI0P,eAAgB1P,GACpEgE,EAAmBjE,EAAQsE,aAAa,eAAeL,iBAG3D,GAAKA,EAAL,CAII2gB,GAAanQ,KAGfA,EAAQ8O,GAAoB,CAC1B9F,YAAa+F,EAAO/F,YAGpB5B,UAAW2H,EAAO3H,WACjB7b,GAASyU,OAGd,IAAIoQ,EAAiBD,GAAanQ,GAK9BqQ,EAAgBtB,EAAOzf,SACvBA,EAAWE,EAAiBF,SAC5BghB,EAA6B,UAAhBhC,GAA2B6B,GAAanQ,GACrDuQ,EAAgB,CAAC,EACjBC,EAAe,CAAC,EAChBC,EAAiB,CACnBC,KAAM,GACNzP,IAAK,CAAC,GAEJ0P,EAAW,CACbC,aAAahgB,EAAAA,EAAAA,OAAMggB,GAAaJ,GAChCK,aAAajgB,EAAAA,EAAAA,OAAMigB,GAAaJ,KAGlCxgB,EAAAA,EAAAA,MAAKT,EAAiBC,aAAa,SAAUU,EAAUE,GAErD,IAAIygB,EAAwBV,GAAkBjgB,EAAS4gB,aAAa/Q,IACpE/P,EAAAA,EAAAA,MAAKT,EAAiBA,iBAAiBa,IAAc,SAAUyB,EAAUC,GACvE,IAAIT,EAAOQ,EAASR,KAChB0f,EAAgBC,GAAkBZ,EAAeve,GAErD,IAAKwe,GAAcQ,KAA2BT,GAAiBW,GAAgB,CAC7E,IAAIE,EAAMF,GAAiBA,EAAcnc,MAE9B,MAAPqc,GAAgBd,IAClBc,EAAM5f,EAAK6f,YAAYnR,IAGlB,MAAPkR,GAAeE,GAActf,EAAUof,EAAKP,GAAU,EAAOJ,EAC/D,CACF,GACF,IAEA,IAAIc,EAAe,CAAC,EAsBpB,OArBAphB,EAAAA,EAAAA,MAAKX,GAAU,SAAUgiB,EAAaC,GACpC,IAAIrf,EAAYof,EAAYpf,UAExBA,IAAcse,EAAae,KAC7BthB,EAAAA,EAAAA,MAAKiC,EAAU5C,UAAU,SAAUkiB,EAAaC,GAC9C,IAAIC,EAAalB,EAAaiB,GAE9B,GAAID,IAAgBF,GAAeI,EAAY,CAC7C,IAAIR,EAAMQ,EAAW7c,MACrB3C,EAAUG,SAAW6e,EAAMI,EAAYhgB,KAAKoD,MAAMI,MAAM5C,EAAUG,OAAO6e,EAAKS,GAAgBH,GAAcG,GAAgBL,MAC5HD,EAAaC,EAAYvf,KAAOmf,CAClC,CACF,GAEJ,KACAjhB,EAAAA,EAAAA,MAAKohB,GAAc,SAAUH,EAAKK,GAChCH,GAAc9hB,EAASiiB,GAASL,EAAKP,GAAU,EAAMJ,EACvD,IACAqB,GAAoBpB,EAAclhB,EAAUihB,GAC5CsB,GAAwBpB,EAAgBzQ,EAAOzK,EAAS2F,GACxD4W,GAAyBxiB,EAAU4L,EAAgB1P,GAC5C+kB,CAzEP,CA0EF,CAEA,SAASa,GAActf,EAAUigB,EAAUpB,EAAUqB,EAAQC,GAC3D,IAAI3gB,EAAOQ,EAASR,KAEpB,IAAIA,EAAKoD,MAAMS,WAAc7D,EAAK4gB,YAAYH,GAI9C,GAAKjgB,EAASD,cAAd,CAMA,IAAIoJ,EAAckX,GAAsBJ,EAAUjgB,GAC9CsgB,EAAenX,EAAYmX,aAC3BC,EAAcpX,EAAYoX,YAG1BD,EAAa,IAAkC,MAA5BH,EAAajJ,cAClCvK,EAAAA,EAAAA,QAAOwT,EAAcG,EAAa,KAK/BJ,GAAUlgB,EAASH,MAClBL,EAAK4gB,YAAYG,IAA+B,MAAfA,IACnCN,EAAWM,GAIf1B,EAASC,YAAY9e,EAAUigB,EAAUK,GAGzCzB,EAASE,YAAY/e,EAAUmJ,EAAaoX,EAvB5C,MAFE1B,EAASC,YAAY9e,EAAUigB,EA0BnC,CAEA,SAASI,GAAsBtd,EAAO/C,GACpC,IAAIR,EAAOQ,EAASR,KAChBkC,EAAMlC,EAAKkC,IACX6e,EAAcxd,EACdud,EAAe,GACfE,EAAUC,OAAOC,UACjBC,GAAW,EA+Cf,OA9CAxiB,EAAAA,EAAAA,MAAK6B,EAASG,cAAc,SAAU6W,EAAQ0B,GAC5C,IACIkI,EACAC,EAFAC,EAAU9J,EAAOnV,UAAUkf,iBAAiBrf,GAIhD,GAAIsV,EAAOgK,mBAAoB,CAC7B,IAAIzjB,EAASyZ,EAAOgK,mBAAmBF,EAAS/d,EAAOvD,GACvDqhB,EAActjB,EAAOsjB,YACrBD,EAAqBrjB,EAAO0jB,YAC9B,KAAO,CAML,GALAJ,EAAc7J,EAAOnV,UAAUqf,iBAAiBJ,EAAQ,GAAI/d,EAG9C,aAAdvD,EAAK1H,KAAsB,GAAM,OAE5B+oB,EAAY5e,OACf,OAGF2e,EAAqB5J,EAAOnV,UAAUhI,IAAIinB,EAAQ,GAAID,EAAY,GACpE,CAEA,GAA0B,MAAtBD,GAA+BzQ,SAASyQ,GAA5C,CAIA,IAAIO,EAAOpe,EAAQ6d,EACfQ,EAAOva,KAAKC,IAAIqa,GAEhBC,GAAQZ,KACNY,EAAOZ,GAAWW,GAAQ,GAAKR,EAAU,KAC3CH,EAAUY,EACVT,EAAUQ,EACVZ,EAAcK,EACdN,EAAare,OAAS,IAGxB9D,EAAAA,EAAAA,MAAK0iB,GAAa,SAAUvL,GAC1BgL,EAAa3e,KAAK,CAChBuV,YAAaF,EAAOE,YACpBC,gBAAiB7B,EACjBA,UAAW0B,EAAOnV,UAAUwf,YAAY/L,IAE5C,IAnBF,CAqBF,IACO,CACLgL,aAAcA,EACdC,YAAaA,EAEjB,CAEA,SAASzB,GAAYJ,EAAc1e,EAAU+C,EAAOud,GAClD5B,EAAa1e,EAASC,KAAO,CAC3B8C,MAAOA,EACPud,aAAcA,EAElB,CAEA,SAASvB,GAAYJ,EAAgB3e,EAAUmJ,EAAapG,GAC1D,IAAIud,EAAenX,EAAYmX,aAC3B9gB,EAAOQ,EAASR,KAChBuC,EAAYvC,EAAKf,MACjBgB,EAAmBO,EAASP,iBAGhC,GAAKO,EAAST,gBAAmB+gB,EAAare,OAA9C,CAIA,IAAItD,EAAgBqB,EAAS3B,SAASI,MAClCF,EAAc+iB,EAAoB3iB,GAClC4iB,EAAe5C,EAAexP,IAAI5Q,GAEjCgjB,IACHA,EAAe5C,EAAexP,IAAI5Q,GAAe,CAC/CijB,WAAY7iB,EAAcyD,GAC1Bqf,cAAe9iB,EAAc/C,eAC7B8lB,aAAc/iB,EAAc7G,KAC5B6pB,iBAAkBhjB,EAAcqN,SAChC4V,WAAY,IAEdjD,EAAeC,KAAKjd,KAAK4f,IAG3BA,EAAaK,WAAWjgB,KAAK,CAC3B4H,QAAS/J,EAAKkC,IACd8H,UAAWzH,EAAUnG,eACrBimB,SAAU9f,EAAUjK,KACpBgqB,OAAQ/f,EAAUK,GAClBW,MAAOA,EAKPgf,cAAe,CACbjM,UAAWrW,EAAiB5F,IAAI,CAAC,QAAS,cAC1Ckc,UAAWtW,EAAiB5F,IAAI,CAAC,QAAS,eAE5C4c,kBAAmB6J,EAAand,SA/BlC,CAiCF,CAEA,SAAS2c,GAAoBpB,EAAclhB,EAAUihB,GACnD,IAAIuD,EAAiBvD,EAAcjhB,SAAW,IAE9CW,EAAAA,EAAAA,MAAKX,GAAU,SAAUwC,EAAUC,GACjC,IAAI4C,EAAS7C,EAASP,iBAAiBoD,OACnCof,EAAUvD,EAAaze,GAEvBgiB,IACDjiB,EAASE,YAAc2C,EAAOC,OAAS,QACxCD,EAAOE,MAAQkf,EAAQlf,MAEvBF,EAAO4T,mBAAqBwL,EAAQ3B,cAAgB,IAAInd,UAMrDnD,EAASE,YAAc2C,EAAOC,OAAS,QAI1B,SAAlBD,EAAOC,QAAqBkf,EAAergB,KAAK,CAC9C4H,QAASvJ,EAASR,KAAKkC,IACvB8H,UAAWxJ,EAASR,KAAKf,MAAM7C,eAC/BmH,MAAOF,EAAOE,OAElB,GACF,CAEA,SAASgd,GAAwBpB,EAAgBzQ,EAAOzK,EAAS2F,GAE/D,IAAIiV,GAAanQ,IAAWyQ,EAAeC,KAAK3c,OAAhD,CAWA,IAAIigB,IAAevD,EAAeC,KAAK,GAAGgD,WAAW,IAAM,CAAC,GAAGnL,mBAAqB,IAAI,IAAM,CAAC,EAC/FrN,EAAe,CACbtR,KAAM,UACNqqB,eAAe,EACf7lB,EAAG4R,EAAM,GACTlT,EAAGkT,EAAM,GACT5E,cAAe7F,EAAQ6F,cACvB4B,SAAUzH,EAAQyH,SAClBiM,gBAAiB+K,EAAW/K,gBAC5B7B,UAAW4M,EAAW5M,UACtB4B,YAAagL,EAAWhL,YACxByH,eAAgBA,EAAeC,MAjBjC,MAJExV,EAAe,CACbtR,KAAM,WAsBZ,CAEA,SAASkoB,GAAyBxiB,EAAU4L,EAAgB1P,GAI1D,IAAI4N,EAAK5N,EAAI2M,QACT+b,EAAc,4BACdC,EAAiB7d,GAAM8C,GAAI8a,IAAgB,CAAC,EAC5CE,EAAgB9d,GAAM8C,GAAI8a,GAAe,CAAC,GAG9CjkB,EAAAA,EAAAA,MAAKX,GAAU,SAAUwC,EAAUC,GACjC,IAAI4C,EAAS7C,EAASP,iBAAiBoD,OACrB,SAAlBA,EAAOC,SAAqB3E,EAAAA,EAAAA,MAAK0E,EAAO4T,mBAAmB,SAAU8L,GACnE,IAAItiB,EAAMsiB,EAAUrL,YAAc,MAAQqL,EAAUjN,UACpDgN,EAAcriB,GAAOsiB,CACvB,GACF,IAEA,IAAIC,EAAc,GACdC,EAAa,IACjBtkB,EAAAA,EAAAA,MAAKkkB,GAAgB,SAAUE,EAAWtiB,IACvCqiB,EAAcriB,IAAQwiB,EAAW9gB,KAAK4gB,EACzC,KACApkB,EAAAA,EAAAA,MAAKmkB,GAAe,SAAUC,EAAWtiB,IACtCoiB,EAAepiB,IAAQuiB,EAAY7gB,KAAK4gB,EAC3C,IACAE,EAAWxgB,QAAUvI,EAAI0P,eAAe,CACtCtR,KAAM,WACNqqB,eAAe,EAEfO,SAAS,EACTC,MAAOF,IAETD,EAAYvgB,QAAUvI,EAAI0P,eAAe,CACvCtR,KAAM,YACNqqB,eAAe,EAEfO,SAAS,EACTC,MAAOH,GAEX,CAEA,SAASrD,GAAkBZ,EAAeve,GACxC,IAAK,IAAIgC,EAAI,EAAGA,GAAKuc,GAAiB,IAAItc,OAAQD,IAAK,CACrD,IAAIkd,EAAgBX,EAAcvc,GAElC,GAAIhC,EAASR,KAAKkC,MAAQwd,EAAc3V,SAAWvJ,EAASR,KAAKf,MAAM7C,iBAAmBsjB,EAAc1V,UACtG,OAAO0V,CAEX,CACF,CAEA,SAASW,GAAgB7f,GACvB,IAAI+B,EAAY/B,EAASR,KAAKf,MAC1B4L,EAAO,CAAC,EACR3I,EAAM2I,EAAKd,QAAUvJ,EAASR,KAAKkC,IAIvC,OAHA2I,EAAKb,UAAYa,EAAK3I,EAAM,aAAeK,EAAUnG,eACrDyO,EAAKmF,SAAWnF,EAAK3I,EAAM,YAAcK,EAAUM,KACnDgI,EAAKyX,OAASzX,EAAK3I,EAAM,UAAYK,EAAUK,GACxCiI,CACT,CAEA,SAASgU,GAAanQ,GACpB,OAAQA,GAAqB,MAAZA,EAAM,IAAc0U,MAAM1U,EAAM,KAAmB,MAAZA,EAAM,IAAc0U,MAAM1U,EAAM,GAC1F,CCtWO,SAAShR,GAAQC,GAItBqG,EAAAA,yBAAkC,uBAAwB4V,IAC1Djc,EAAUC,uBAAuBod,IACjCrd,EAAUE,sBAAsBsf,IAChCxf,EAAU0lB,sBAAqB,SAAUhgB,GAEvC,GAAIA,EAAQ,GACRA,EAAOkB,aAA6C,IAA9BlB,EAAOkB,YAAY9B,UAAkBY,EAAOkB,YAAc,CAAC,GACnF,IAAI5I,EAAO0H,EAAOkB,YAAY5I,KAI1BA,KAASqH,EAAAA,EAAAA,SAAQrH,KACnB0H,EAAOkB,YAAY5I,KAAO,CAACA,GAE/B,CACF,IAGAgC,EAAU2lB,kBAAkB3lB,EAAU4lB,SAASC,UAAUC,WAAW,SAAUxpB,EAASC,GAGrFD,EAAQsE,aAAa,eAAeL,iBAAmBJ,EAAQ7D,EAASC,EAC1E,IAEAyD,EAAU+lB,eAAe,CACvBprB,KAAM,oBACNgQ,MAAO,oBACPqb,OAAQ,sBACP/E,GACL,C,eCrCIgF,GAEJ,SAAU1rB,GAGR,SAAS0rB,IACP,IAAIzrB,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAOsrB,EAAatrB,KACnBH,CACT,CAuEA,OA9EAM,EAAAA,EAAAA,IAAUmrB,EAAc1rB,GASxB0rB,EAAatrB,KAAO,UACpBsrB,EAAaC,aAAe,CAAC,eAC7BD,EAAalrB,cAAgB,CAE3BC,EAAG,GACHC,MAAM,EAENkrB,aAAa,EAGbC,QAAS,OAET3G,UAAW,kBACX4G,mBAAmB,EACnBC,YAAa,SACbC,WAAY,OAIZC,QAAS,KACTC,UAAW,EACXC,UAAW,IAEXC,mBAAoB,GACpBC,WAAW,EACXprB,gBAAiB,OAEjBmiB,WAAY,GACZC,YAAa,oBACbC,cAAe,EACfC,cAAe,EAEfN,aAAc,EAEd9hB,YAAa,EAIbC,QAAS,KAETkrB,aAAc,GAEdjgB,YAAa,CAGXjM,KAAM,OAKN0H,KAAM,OACNgH,UAAW,OACXiU,wBAAyB,IACzBwJ,sBAAuB,iBACvBjjB,WAAY,CACV7H,MAAO,OACP8C,MAAO,EACPnE,KAAM,SAENkB,UAAW,CAAC,IAKhBA,UAAW,CACTG,MAAO,OACPF,SAAU,KAGPmqB,CACT,CAhFA,CAgFE/pB,EAAAA,GAEF,M,oBCnFO,SAAS6qB,GAAqBC,GACnC,IAAIC,EAAgBD,EAAatqB,IAAI,WACrC,OAAwB,MAAjBuqB,IAA0BA,EACI,aAAnCD,EAAatqB,IAAI,aACrB,CAEA,SAASwqB,GAAUC,GACjB,GAAKjJ,GAAAA,EAAAA,aAML,IAFA,IAAI/gB,EAAQiqB,SAASC,gBAAgBlqB,MAE5B0H,EAAI,EAAGyiB,EAAMH,EAAWriB,OAAQD,EAAIyiB,EAAKziB,IAChD,GAAIsiB,EAAWtiB,KAAM1H,EACnB,OAAOgqB,EAAWtiB,EAGxB,CAEO,IAAI0iB,GAAmBL,GAAU,CAAC,YAAa,kBAAmB,aAAc,eAAgB,gBAC5FM,GAAoBN,GAAU,CAAC,mBAAoB,aAAc,cAAe,gBAAiB,iBACrG,SAASO,GAAkBC,EAAaC,GAC7C,IAAKD,EACH,OAAOC,EAGTA,GAAYC,EAAAA,EAAAA,IAAYD,GAAW,GACnC,IAAIpM,EAAMmM,EAAYpiB,QAAQqiB,GAE9B,OADAD,GAAuB,IAATnM,EAAaoM,EAAY,IAAMD,EAAY1hB,MAAM,EAAGuV,GAAO,IAAMoM,EACxED,EAAYG,aACrB,CACO,SAASC,GAAiBlb,EAAIzP,GACnC,IAAI4qB,EAAMnb,EAAGob,cAAgBZ,SAASa,aAAeb,SAASa,YAAYH,iBAAiBlb,GAC3F,OAAOmb,EAAM5qB,EAAQ4qB,EAAI5qB,GAAS4qB,EAAM,IAC1C,C,eC9BIG,GAAwBT,GAAkBD,GAAmB,cAC7DW,GAAuBV,GAAkBF,GAAkB,aAE3Da,GAAW,0FAA4FlK,GAAAA,EAAAA,qBAA2B,yBAA2B,IAEjK,SAASmK,GAAUzV,GAEjB,OADAA,EAAc,SAARA,EAAiB,QAAkB,UAARA,EAAkB,OAAiB,QAARA,EAAgB,SAAW,MAChFA,CACT,CAEA,SAAS0V,GAActB,EAAcvrB,EAAa8sB,GAChD,KAAKjY,EAAAA,EAAAA,UAASiY,IAAoC,WAAlBA,EAC9B,MAAO,GAGT,IAAI/sB,EAAkBwrB,EAAatqB,IAAI,mBACnChB,EAAcsrB,EAAatqB,IAAI,eACnCjB,GAAc+sB,EAAAA,EAAAA,IAAqB/sB,GACnC,IAIIgtB,EAJAC,EAAWL,GAAUE,GACrBlY,EAAY3G,KAAK2P,IAA8B,IAA1B3P,KAAKif,MAAMjtB,GAAoB,GACpDktB,EAAgB,GAChBC,EAAiBV,GAAuB,KAGxC7iB,EAAAA,EAAAA,SAAQ,CAAC,OAAQ,SAAUojB,IAAa,GAC1CE,GAAiB,UACjBC,GAAkB,4BAA8BJ,EAAyB,SAAbC,GAAuB,KAAO,IAAM,SAEhGE,GAAiB,WACjBC,GAAkB,4BAA8BJ,EAAyB,QAAbC,EAAqB,IAAM,IAAM,QAG/F,IAAII,EAAeL,EAAY/e,KAAK4D,GAAK,IACrCyb,EAAU1Y,EAAY3U,EACtBstB,EAAYD,EAAUrf,KAAKC,IAAID,KAAK2H,IAAIyX,IAAiBC,EAAUrf,KAAKC,IAAID,KAAK4H,IAAIwX,IACrFtY,EAAc9G,KAAKif,MAA4G,MAApGK,EAAYtf,KAAKuf,MAAQvtB,GAAe,EAAIgO,KAAKuf,MAAQvtB,GAAestB,EAAYD,GAAW,IAAY,IAC1IH,GAAiB,IAAMF,EAAW,KAAOlY,EAAc,KACvD,IAAI0Y,EAAcztB,EAAc,UAAYC,EAAc,MACtDytB,EAAW,CAAC,2BAA6B9Y,EAAY,aAAeA,EAAY,MAAOuY,EAAgB,IAAMC,EAAiB,IAAK,iBAAmBK,EAAa,gBAAkBA,EAAa,oBAAsB1tB,EAAkB,KAC9O,MAAO,eAAkB2tB,EAASC,KAAK,IAAM,UAC/C,CAEA,SAASC,GAAmBC,EAAUC,GACpC,IAAIC,EAAkB,8BAClBC,EAAmB,IAAMH,EAAW,EAAI,KAAOE,EAC/CE,EAAiB,UAAYD,EAAmB,cAAgBA,EAOpE,OALKF,IACHE,EAAmB,IAAMH,EAAW,KAAOE,EAC3CE,GAAkBxL,GAAAA,EAAAA,mBAAyB,IAAMiK,GAAuBsB,EAAmB,QAAUA,EAAmB,OAASA,GAG5HvB,GAAwB,IAAMwB,CACvC,CAEA,SAASC,GAAkBxqB,EAAGtB,EAAG+rB,GAG/B,IAAIC,EAAK1qB,EAAE2qB,QAAQ,GAAK,KACpBC,EAAKlsB,EAAEisB,QAAQ,GAAK,KAExB,IAAK5L,GAAAA,EAAAA,mBACH,OAAO0L,EAAW,OAASG,EAAK,SAAWF,EAAK,IAAM,CAAC,CAAC,MAAOE,GAAK,CAAC,OAAQF,IAI/E,IAAIG,EAAO9L,GAAAA,EAAAA,qBACP3D,EAAY,aAAeyP,EAAO,KAAO,IAAM,IAAMH,EAAK,IAAME,GAAMC,EAAO,KAAO,IAAM,IAC9F,OAAOJ,EAAW,gBAAkBzB,GAAuB,IAAM5N,EAAY,IAAM,CAAC,CAAC,MAAO,GAAI,CAAC,OAAQ,GAAI,CAACgN,GAAkBhN,GAClI,CAQA,SAAS0P,GAAattB,GACpB,IAAIutB,EAAU,GACVpuB,EAAWa,EAAeD,IAAI,YAC9BV,EAAQW,EAAeW,eAC3BtB,GAASkuB,EAAQ1lB,KAAK,SAAWxI,GACjCkuB,EAAQ1lB,KAAK,QAAU7H,EAAeuW,WACtCpX,GACGouB,EAAQ1lB,KAAK,eAAiBkF,KAAKif,MAAiB,EAAX7sB,EAAe,GAAK,MAChE,IAAI8hB,EAAcjhB,EAAeD,IAAI,mBACjCihB,EAAahhB,EAAeD,IAAI,mBAAqB,EACrDmhB,EAAgBlhB,EAAeD,IAAI,sBAAwB,EAC3DohB,EAAgBnhB,EAAeD,IAAI,sBAAwB,EAM/D,OALAkhB,GAAeD,GAAcuM,EAAQ1lB,KAAK,eAAiBqZ,EAAgB,MAAQC,EAAgB,MAAQH,EAAa,MAAQC,IAChI5c,EAAAA,EAAAA,MAAK,CAAC,aAAc,UAAU,SAAUkE,GACtC,IAAI+c,EAAMtlB,EAAeD,IAAIwI,GAC7B+c,GAAOiI,EAAQ1lB,KAAK,QAAUU,EAAO,IAAM+c,EAC7C,IACOiI,EAAQd,KAAK,IACtB,CAEA,SAASe,GAAgBnD,EAAcoD,EAAkBb,GACvD,IAAIW,EAAU,GACVvD,EAAqBK,EAAatqB,IAAI,sBACtClB,EAAkBwrB,EAAatqB,IAAI,mBACnCihB,EAAaqJ,EAAatqB,IAAI,cAC9BkhB,EAAcoJ,EAAatqB,IAAI,eAC/BmhB,EAAgBmJ,EAAatqB,IAAI,iBACjCohB,EAAgBkJ,EAAatqB,IAAI,iBACjCC,EAAiBqqB,EAAapqB,SAAS,aACvCjB,GAAU0uB,EAAAA,GAAAA,IAA2BrD,EAAc,QACnDsD,EAAYzM,EAAgB,MAAQC,EAAgB,MAAQH,EAAa,MAAQC,EAuBrF,OAtBAsM,EAAQ1lB,KAAK,cAAgB8lB,GAE7BF,GAAoBzD,GAAsBuD,EAAQ1lB,KAAK6kB,GAAmB1C,EAAoB4C,IAE1F/tB,GACF0uB,EAAQ1lB,KAAK,oBAAsBhJ,IAIrCwF,EAAAA,EAAAA,MAAK,CAAC,QAAS,QAAS,WAAW,SAAUkE,GAC3C,IAAIqlB,EAAa,UAAYrlB,EACzBslB,GAAY5C,EAAAA,EAAAA,IAAY2C,GACxBtI,EAAM+E,EAAatqB,IAAI8tB,GACpB,MAAPvI,GAAeiI,EAAQ1lB,KAAK+lB,EAAa,IAAMtI,GAAgB,UAAT/c,EAAmB,GAAK,MAChF,IAEAglB,EAAQ1lB,KAAKylB,GAAattB,IAEX,MAAXhB,GACFuuB,EAAQ1lB,KAAK,YAAaimB,EAAAA,EAAAA,IAAkB9uB,GAASytB,KAAK,OAAS,MAG9Dc,EAAQd,KAAK,KAAO,GAC7B,CAGA,SAASsB,GAAeC,EAAKxgB,EAAIygB,EAAcC,EAAKC,GAClD,IAAIC,EAAY5gB,GAAMA,EAAG6gB,QAEzB,GAAIJ,EAAc,CAChB,IAAIK,EAAiBF,GAAaA,EAAUG,kBAExCD,IAEFE,EAAAA,GAAAA,IAAoBR,EAAKM,EAAgB7D,SAASgE,KAAMP,EAAKC,EAEjE,KAAO,CACLH,EAAI,GAAKE,EACTF,EAAI,GAAKG,EAIT,IAAIO,EAAqBN,GAAaA,EAAUO,wBAE5CD,IACFV,EAAI,IAAMU,EAAmBE,WAC7BZ,EAAI,IAAMU,EAAmBG,UAEjC,CAEAb,EAAI,GAAKA,EAAI,GAAKxgB,EAAGlL,WACrB0rB,EAAI,GAAKA,EAAI,GAAKxgB,EAAGjL,WACvB,CAEA,IAAIusB,GAEJ,WACE,SAASA,EAAmBC,EAAWnvB,EAAKiR,GAO1C,GANAzT,KAAK4xB,OAAQ,EACb5xB,KAAK6xB,YAAc,CAAC,EAAG,EAAG,EAAG,GAC7B7xB,KAAK8xB,YAAa,EAClB9xB,KAAK+xB,YAAa,EAClB/xB,KAAKgyB,WAAY,EAEb7N,GAAAA,EAAAA,IACF,OAAO,KAGT,IAAItR,EAAKwa,SAAS4E,cAAc,OAEhCpf,EAAGqf,eAAgB,EACnBlyB,KAAK6S,GAAKA,EACV,IAAIzC,EAAKpQ,KAAKmyB,IAAM3vB,EAAI2M,QACpB0hB,EAAe7wB,KAAKoyB,cAAgB3e,GAAOA,EAAIod,aACnDF,GAAe3wB,KAAK6xB,YAAazhB,EAAIygB,EAAcruB,EAAI0C,WAAa,EAAG1C,EAAI2C,YAAc,GAErF0rB,EACFxD,SAASgE,KAAKgB,YAAYxf,GAE1B8e,EAAUU,YAAYxf,GAGxB7S,KAAKsyB,WAAaX,EAIlB,IAAIY,EAAOvyB,KAEX6S,EAAG2f,aAAe,WAEZD,EAAKT,aACPW,aAAaF,EAAKG,cAClBH,EAAKX,OAAQ,GAGfW,EAAKI,YAAa,CACpB,EAEA9f,EAAGpC,YAAc,SAAUC,GAGzB,GAFAA,EAAIA,GAAKkiB,OAAOhiB,OAEX2hB,EAAKT,WAAY,CAOpB,IAAI5N,EAAU9T,EAAG8T,QACbgN,EAAiB9gB,EAAG6gB,QAAQE,mBAChC0B,EAAAA,EAAAA,IAAe3B,EAAgBxgB,GAAG,GAClCwT,EAAQ4O,SAAS,YAAapiB,EAChC,CACF,EAEAmC,EAAGkgB,aAAe,WAEhBR,EAAKI,YAAa,EAEdJ,EAAKT,YACHS,EAAKX,OACPW,EAAKS,UAAUT,EAAKU,WAG1B,CACF,CAgKA,OA1JAvB,EAAmBrvB,UAAU4pB,OAAS,SAAUgB,GAG9C,IAAI0E,EAAY3xB,KAAKsyB,WACjBte,EAAW+Z,GAAiB4D,EAAW,YACvCuB,EAAWvB,EAAUvuB,MAEC,aAAtB8vB,EAASlf,UAAwC,aAAbA,IACtCkf,EAASlf,SAAW,YAItB,IAAIsY,EAAoBW,EAAatqB,IAAI,qBACzC2pB,GAAqBtsB,KAAKmzB,iBAE1BnzB,KAAK6S,GAAGugB,UAAYnG,EAAatqB,IAAI,cAAgB,EAGvD,EAEA+uB,EAAmBrvB,UAAUnB,KAAO,SAAU+rB,EAAcoG,GAC1DZ,aAAazyB,KAAK0yB,cAClBD,aAAazyB,KAAKszB,kBAClB,IAAIzgB,EAAK7S,KAAK6S,GACVzP,EAAQyP,EAAGzP,MACXmwB,EAAavzB,KAAK6xB,YAEjBhf,EAAG2gB,UAGNpwB,EAAM+sB,QAAU9B,GAAW+B,GAAgBnD,GAAejtB,KAAK+xB,WAAY/xB,KAAKgyB,WAC9EpC,GAAkB2D,EAAW,GAAIA,EAAW,IAAI,GAAS,iBAAkB9E,EAAAA,EAAAA,IAAqB4E,GAAkB,KAAQpG,EAAatqB,IAAI,iBAAmB,IAK7J,oBAAsB3C,KAAK8xB,WAAa,OAAS,QARpD1uB,EAAMqwB,QAAU,OAWlBzzB,KAAK4xB,OAAQ,EACb5xB,KAAK+xB,YAAa,EAClB/xB,KAAKgyB,WAAY,CACnB,EAEAN,EAAmBrvB,UAAUqxB,WAAa,SAAUC,EAASC,EAAS3G,EAAcvrB,EAAa8sB,GAC/F,IAAI3b,EAAK7S,KAAK6S,GAEd,GAAe,MAAX8gB,EAAJ,CAKA,IAAIE,EAAQ,GAMZ,IAJItd,EAAAA,EAAAA,UAASiY,IAAkD,SAAhCvB,EAAatqB,IAAI,aAA0BqqB,GAAqBC,KAC7F4G,EAAQtF,GAActB,EAAcvrB,EAAa8sB,KAG/CjY,EAAAA,EAAAA,UAASod,GACX9gB,EAAG2gB,UAAYG,EAAUE,OACpB,GAAIF,EAAS,CAElB9gB,EAAG2gB,UAAY,IAEVloB,EAAAA,EAAAA,SAAQqoB,KACXA,EAAU,CAACA,IAGb,IAAK,IAAI7oB,EAAI,EAAGA,EAAI6oB,EAAQ5oB,OAAQD,KAC9BgpB,EAAAA,EAAAA,OAAMH,EAAQ7oB,KAAO6oB,EAAQ7oB,GAAGipB,aAAelhB,GACjDA,EAAGwf,YAAYsB,EAAQ7oB,IAK3B,GAAI+oB,GAAShhB,EAAGmhB,WAAWjpB,OAAQ,CAGjC,IAAIkpB,EAAU5G,SAAS4E,cAAc,OACrCgC,EAAQT,UAAYK,EACpBhhB,EAAGwf,YAAY4B,EACjB,CACF,CAhCA,MAFEphB,EAAG2gB,UAAY,EAmCnB,EAEA9B,EAAmBrvB,UAAU6xB,aAAe,SAAUrH,GACpD7sB,KAAK8xB,WAAajF,CACpB,EAEA6E,EAAmBrvB,UAAU8xB,QAAU,WACrC,IAAIthB,EAAK7S,KAAK6S,GACd,MAAO,CAACA,EAAGuhB,YAAavhB,EAAGwhB,aAC7B,EAEA3C,EAAmBrvB,UAAUiyB,OAAS,SAAUxD,EAAKC,GACnD,IAAIwC,EAAavzB,KAAK6xB,YAGtB,GAFAlB,GAAe4C,EAAYvzB,KAAKmyB,IAAKnyB,KAAKoyB,cAAetB,EAAKC,GAEzC,MAAjBwC,EAAW,IAA+B,MAAjBA,EAAW,GAAY,CAClD,IAAIgB,EAAUv0B,KAAK6S,GAAGzP,MAClBoxB,EAAa5E,GAAkB2D,EAAW,GAAIA,EAAW,KAC7DtsB,EAAAA,EAAAA,MAAKutB,GAAY,SAAUpf,GACzBmf,EAAQnf,EAAU,IAAMA,EAAU,EACpC,GACF,CACF,EAOAsc,EAAmBrvB,UAAU8wB,eAAiB,WAE5C,IAAIsB,EAASz0B,KAAK6xB,YAAY,GAE1B6C,EAAS10B,KAAK6xB,YAAY,GAC9B7xB,KAAKs0B,OAAOG,EAASz0B,KAAKmyB,IAAIjtB,WAAYwvB,EAAS10B,KAAKmyB,IAAIhtB,YAC9D,EAEAusB,EAAmBrvB,UAAU+L,KAAO,WAClC,IAAI3N,EAAQT,KAERoD,EAAQpD,KAAK6S,GAAGzP,MACpBA,EAAMuxB,WAAa,SACnBvxB,EAAMwxB,QAAU,IAChBzQ,GAAAA,EAAAA,uBAA6B/gB,EAAMyxB,WAAa,IAChD70B,KAAK4xB,OAAQ,EACb5xB,KAAKszB,iBAAmBwB,YAAW,WACjC,OAAOr0B,EAAMuxB,WAAY,CAC3B,GAAG,IACL,EAEAN,EAAmBrvB,UAAU2wB,UAAY,SAAU+B,IAC7C/0B,KAAK4xB,OAAW5xB,KAAK2yB,YAAc3yB,KAAK8xB,aACtCiD,GACF/0B,KAAKizB,WAAa8B,EAElB/0B,KAAK4xB,OAAQ,EACb5xB,KAAK0yB,aAAeoC,YAAWtnB,EAAAA,EAAAA,MAAKxN,KAAKoO,KAAMpO,MAAO+0B,IAEtD/0B,KAAKoO,OAGX,EAEAsjB,EAAmBrvB,UAAU2yB,OAAS,WACpC,OAAOh1B,KAAK4xB,KACd,EAEAF,EAAmBrvB,UAAU0K,QAAU,WACrC/M,KAAK6S,GAAGkhB,WAAWkB,YAAYj1B,KAAK6S,GACtC,EAEO6e,CACT,CAtOA,GAwOA,M,WChZIwD,GAEJ,WACE,SAASA,EAAmB1yB,GAC1BxC,KAAK4xB,OAAQ,EACb5xB,KAAK6xB,YAAc,CAAC,EAAG,EAAG,EAAG,GAC7B7xB,KAAK8xB,YAAa,EAClB9xB,KAAKmyB,IAAM3vB,EAAI2M,QACfwhB,GAAe3wB,KAAK6xB,YAAa7xB,KAAKmyB,IAAK3vB,EAAI0C,WAAa,EAAG1C,EAAI2C,YAAc,EACnF,CA0JA,OApJA+vB,EAAmB7yB,UAAU4pB,OAAS,SAAUgB,GAC9C,IAAIX,EAAoBW,EAAatqB,IAAI,qBACzC2pB,GAAqBtsB,KAAKmzB,gBAC5B,EAEA+B,EAAmB7yB,UAAUnB,KAAO,WAC9BlB,KAAK0yB,cACPD,aAAazyB,KAAK0yB,cAGpB1yB,KAAK6S,GAAG3R,OACRlB,KAAK4xB,OAAQ,CACf,EAMAsD,EAAmB7yB,UAAUqxB,WAAa,SAAUC,EAASwB,EAAoBlI,EAAcvrB,EAAa8sB,GAC1G,IAAI/tB,EAAQT,KAERiD,EAAAA,SAAgB0wB,KAClByB,EAAAA,GAAAA,IAA0H,IAGxHp1B,KAAK6S,IACP7S,KAAKmyB,IAAIvlB,OAAO5M,KAAK6S,IAGvB,IAAIjQ,EAAiBqqB,EAAapqB,SAAS,aAC3C7C,KAAK6S,GAAK,IAAIwiB,EAAAA,GAAO,CACnBjyB,MAAO,CACLkyB,KAAMH,EAAmBI,eACzBp0B,KAAMwyB,EACN6B,WAAY,GACZ7zB,YAAa,EACbD,YAAaA,EACb+zB,gBAAiB7yB,EAAeD,IAAI,mBACpCW,KAAM2pB,EAAatqB,IAAI,CAAC,YAAa,UACrCf,SAAS0uB,EAAAA,GAAAA,IAA2BrD,EAAc,YAClDjpB,cAAe,MACfuB,MAAO,QAETtE,EAAGgsB,EAAatqB,IAAI,OAEtBM,EAAAA,KAAY,CAAC,kBAAmB,eAAgB,cAAe,aAAc,gBAAiB,kBAAkB,SAAUyyB,GACxHj1B,EAAMoS,GAAGzP,MAAMsyB,GAAYzI,EAAatqB,IAAI+yB,EAC9C,IACAzyB,EAAAA,KAAY,CAAC,iBAAkB,oBAAqB,sBAAsB,SAAUyyB,GAClFj1B,EAAMoS,GAAGzP,MAAMsyB,GAAY9yB,EAAeD,IAAI+yB,IAAa,CAC7D,IAEA11B,KAAKmyB,IAAIxtB,IAAI3E,KAAK6S,IAElB,IAAI0f,EAAOvyB,KACXA,KAAK6S,GAAGxO,GAAG,aAAa,WAElBkuB,EAAKT,aACPW,aAAaF,EAAKG,cAClBH,EAAKX,OAAQ,GAGfW,EAAKI,YAAa,CACpB,IACA3yB,KAAK6S,GAAGxO,GAAG,YAAY,WACjBkuB,EAAKT,YACHS,EAAKX,OACPW,EAAKS,UAAUT,EAAKU,YAIxBV,EAAKI,YAAa,CACpB,GACF,EAEAuC,EAAmB7yB,UAAU6xB,aAAe,SAAUrH,GACpD7sB,KAAK8xB,WAAajF,CACpB,EAEAqI,EAAmB7yB,UAAU8xB,QAAU,WACrC,IAAIthB,EAAK7S,KAAK6S,GACV8iB,EAAW31B,KAAK6S,GAAGlP,kBAGnBiyB,EAAkBC,GAAoBhjB,EAAGzP,OAC7C,MAAO,CAACuyB,EAAS5wB,MAAQ6wB,EAAgBr0B,KAAOq0B,EAAgBnU,MAAOkU,EAAS5xB,OAAS6xB,EAAgBp0B,IAAMo0B,EAAgBlU,OACjI,EAEAwT,EAAmB7yB,UAAUiyB,OAAS,SAAUlvB,EAAGtB,GACjD,IAAI+O,EAAK7S,KAAK6S,GAEd,GAAIA,EAAI,CACN,IAAI0gB,EAAavzB,KAAK6xB,YACtBlB,GAAe4C,EAAYvzB,KAAKmyB,IAAK/sB,EAAGtB,GACxCsB,EAAImuB,EAAW,GACfzvB,EAAIyvB,EAAW,GACf,IAAInwB,EAAQyP,EAAGzP,MACXzB,EAAcm0B,GAAa1yB,EAAMzB,aAAe,GAChDi0B,EAAkBC,GAAoBzyB,GAE1CyP,EAAGzN,EAAIA,EAAIzD,EAAci0B,EAAgBr0B,KACzCsR,EAAG/O,EAAIA,EAAInC,EAAci0B,EAAgBp0B,IACzCqR,EAAGxN,YACL,CACF,EAOA6vB,EAAmB7yB,UAAU8wB,eAAiB,WAE5C,IAAIsB,EAASz0B,KAAK6xB,YAAY,GAE1B6C,EAAS10B,KAAK6xB,YAAY,GAC9B7xB,KAAKs0B,OAAOG,EAASz0B,KAAKmyB,IAAIjtB,WAAYwvB,EAAS10B,KAAKmyB,IAAIhtB,YAC9D,EAEA+vB,EAAmB7yB,UAAU+L,KAAO,WAC9BpO,KAAK6S,IACP7S,KAAK6S,GAAGzE,OAGVpO,KAAK4xB,OAAQ,CACf,EAEAsD,EAAmB7yB,UAAU2wB,UAAY,SAAU+B,IAC7C/0B,KAAK4xB,OAAW5xB,KAAK2yB,YAAc3yB,KAAK8xB,aACtCiD,GACF/0B,KAAKizB,WAAa8B,EAElB/0B,KAAK4xB,OAAQ,EACb5xB,KAAK0yB,aAAeoC,WAAW7xB,EAAAA,KAAYjD,KAAKoO,KAAMpO,MAAO+0B,IAE7D/0B,KAAKoO,OAGX,EAEA8mB,EAAmB7yB,UAAU2yB,OAAS,WACpC,OAAOh1B,KAAK4xB,KACd,EAEAsD,EAAmB7yB,UAAU0K,QAAU,WACrC/M,KAAKmyB,IAAIvlB,OAAO5M,KAAK6S,GACvB,EAEOqiB,CACT,CAlKA,GAoKA,SAASY,GAAa5N,GACpB,OAAOvY,KAAK2P,IAAI,EAAG4I,EACrB,CAEA,SAAS2N,GAAoBzyB,GAC3B,IAAIwgB,EAAakS,GAAa1yB,EAAMwgB,YAAc,GAC9CE,EAAgBgS,GAAa1yB,EAAM0gB,eAAiB,GACpDC,EAAgB+R,GAAa1yB,EAAM2gB,eAAiB,GACxD,MAAO,CACLxiB,KAAMu0B,GAAalS,EAAaE,GAChCrC,MAAOqU,GAAalS,EAAaE,GACjCtiB,IAAKs0B,GAAalS,EAAaG,GAC/BrC,OAAQoU,GAAalS,EAAaG,GAEtC,CAEA,SAAS4M,GAAeC,EAAKxgB,EAAI0gB,EAAKC,GACpCH,EAAI,GAAKE,EACTF,EAAI,GAAKG,EACTH,EAAI,GAAKA,EAAI,GAAKxgB,EAAGlL,WACrB0rB,EAAI,GAAKA,EAAI,GAAKxgB,EAAGjL,WACvB,CAEA,U,iCC1KI4wB,GAAY,IAAIC,EAAAA,EAAK,CACvBpwB,MAAO,CACLR,GAAI,EACJtB,GAAI,EACJiB,MAAO,EACPhB,OAAQ,KAIRkyB,GAEJ,SAAUz1B,GAGR,SAASy1B,IACP,IAAIx1B,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAOq1B,EAAYr1B,KAClBH,CACT,CAkrBA,OAzrBAM,EAAAA,EAAAA,IAAUk1B,EAAaz1B,GASvBy1B,EAAY5zB,UAAU6zB,KAAO,SAAU3zB,EAASC,GAC9C,IAAI2hB,GAAAA,EAAAA,MAAa3hB,EAAI2zB,SAArB,CAIA,IAAIlJ,EAAe1qB,EAAQsE,aAAa,WACpC2lB,EAAaxsB,KAAKo2B,aAAcC,EAAAA,EAAAA,IAAqBpJ,EAAatqB,IAAI,eAC1E3C,KAAKs2B,gBAAiC,aAAf9J,EAA4B,IAAI0I,GAAmB1yB,GAAO,IAAIkvB,GAAmBlvB,EAAI2zB,SAAU3zB,EAAK,CACzHquB,aAAc5D,EAAatqB,IAAI,gBAAgB,IALjD,CAOF,EAEAszB,EAAY5zB,UAAUvC,OAAS,SAAUmtB,EAAc1qB,EAASC,GAC9D,IAAI2hB,GAAAA,EAAAA,MAAa3hB,EAAI2zB,SAArB,CAKAn2B,KAAKyC,MAAMC,YACX1C,KAAKu2B,cAAgBtJ,EACrBjtB,KAAKw2B,SAAWj0B,EAChBvC,KAAK8N,KAAOtL,EAMZxC,KAAKy2B,mBAAqBxJ,EAAatqB,IAAI,qBAC3C,IAAI+zB,EAAiB12B,KAAKs2B,gBAC1BI,EAAezK,OAAOgB,GACtByJ,EAAexC,aAAajH,EAAatqB,IAAI,cAE7C3C,KAAK22B,sBAEL32B,KAAK42B,YAQoB,aAArB52B,KAAKo2B,aAA8BnJ,EAAatqB,IAAI,uBACtDk0B,EAAAA,EAAAA,IAAe72B,KAAM,kBAAmB,GAAI,YAE5CyO,EAAAA,EAAAA,IAAMzO,KAAM,kBA9Bd,CAgCF,EAEAi2B,EAAY5zB,UAAUs0B,oBAAsB,WAC1C,IAAI1J,EAAejtB,KAAKu2B,cACpB7Q,EAAYuH,EAAatqB,IAAI,aACjCgjB,GAAwB,cAAe3lB,KAAK8N,MAAMN,EAAAA,EAAAA,OAAK,SAAU8X,EAAa5U,EAAGwB,GAE7D,SAAdwT,IACEA,EAAUna,QAAQ+Z,IAAgB,EACpCtlB,KAAK82B,SAASpmB,EAAGwB,GACQ,UAAhBoT,GACTtlB,KAAK+2B,MAAM7kB,GAGjB,GAAGlS,MACL,EAEAi2B,EAAY5zB,UAAUu0B,UAAY,WAChC,IAAI3J,EAAejtB,KAAKu2B,cACpBh0B,EAAUvC,KAAKw2B,SACfh0B,EAAMxC,KAAK8N,KACX4X,EAAYuH,EAAatqB,IAAI,aAEjC,GAAmB,MAAf3C,KAAKg3B,QAAiC,MAAfh3B,KAAKi3B,QAGf,SAAdvR,GAAsC,UAAdA,EAAuB,CAChD,IAAIwR,EAASl3B,KACbyyB,aAAazyB,KAAKm3B,uBAClBn3B,KAAKm3B,sBAAwBrC,YAAW,YAIrCtyB,EAAI40B,cAAgBF,EAAOG,gBAAgBpK,EAAc1qB,EAASC,EAAK,CACtE4C,EAAG8xB,EAAOF,OACVlzB,EAAGozB,EAAOD,OACVxP,eAAgByP,EAAOI,qBAE3B,GACF,CACF,EAmBArB,EAAY5zB,UAAUg1B,gBAAkB,SAAUpK,EAAc1qB,EAASC,EAAK+J,GAC5E,GAAIA,EAAQgrB,OAASv3B,KAAKw3B,MAAOrT,GAAAA,EAAAA,MAAa3hB,EAAI2zB,SAAlD,CAIA,IAAIjkB,EAAiByS,GAAmBpY,EAAS/J,GAEjDxC,KAAKy3B,QAAU,GAEf,IAAIhQ,EAAiBlb,EAAQkb,eACzBiQ,EAAUC,GAAuBprB,EAAShK,EAASC,GAEvD,GAAIk1B,EAAS,CACX,IAAI/xB,EAAO+xB,EAAQ7kB,GAAGlP,kBAAkB+F,QACxC/D,EAAK4V,eAAemc,EAAQ7kB,GAAGuC,WAE/BpV,KAAK82B,SAAS,CACZlR,QAASjgB,EAAKP,EAAIO,EAAKZ,MAAQ,EAC/B8gB,QAASlgB,EAAK7B,EAAI6B,EAAK5B,OAAS,EAChC3C,OAAQs2B,EAAQ7kB,GAChBmB,SAAUzH,EAAQyH,SAGlB4jB,gBAAiB,UAChB1lB,EACL,MAAO,GAAI3F,EAAQsrB,SAAwB,MAAbtrB,EAAQnH,GAA0B,MAAbmH,EAAQzI,EAAW,CACpE,IAAI+O,EAAKkjB,GACTljB,EAAGzN,EAAImH,EAAQnH,EACfyN,EAAG/O,EAAIyI,EAAQzI,EACf+O,EAAGoZ,UACH1nB,EAAAA,EAAAA,GAAUsO,GAAIilB,cAAgB,CAC5B3sB,KAAM,KACNQ,OAAQY,EAAQsrB,SAGlB73B,KAAK82B,SAAS,CACZlR,QAASrZ,EAAQnH,EACjBygB,QAAStZ,EAAQzI,EACjB1C,OAAQyR,GACPX,EACL,MAAO,GAAIuV,EACTznB,KAAK82B,SAAS,CACZlR,QAASrZ,EAAQnH,EACjBygB,QAAStZ,EAAQzI,EACjBkQ,SAAUzH,EAAQyH,SAClByT,eAAgBA,EAChBrV,cAAe7F,EAAQ6F,eACtBF,QACE,GAA2B,MAAvB3F,EAAQyT,YAAqB,CACtC,GAAIhgB,KAAK+3B,qBAAqB9K,EAAc1qB,EAASC,EAAK+J,GACxD,OAGF,IAAIyrB,EAAYlS,GAAoBvZ,EAAShK,GACzC01B,EAAKD,EAAUhhB,MAAM,GACrBkhB,EAAKF,EAAUhhB,MAAM,GAEf,MAANihB,GAAoB,MAANC,GAChBl4B,KAAK82B,SAAS,CACZlR,QAASqS,EACTpS,QAASqS,EACT92B,OAAQ42B,EAAUnlB,GAClBmB,SAAUzH,EAAQyH,SAGlB4jB,gBAAiB,UAChB1lB,EAEP,MAAwB,MAAb3F,EAAQnH,GAA0B,MAAbmH,EAAQzI,IAGtCtB,EAAI0P,eAAe,CACjBtR,KAAM,oBACNwE,EAAGmH,EAAQnH,EACXtB,EAAGyI,EAAQzI,IAGb9D,KAAK82B,SAAS,CACZlR,QAASrZ,EAAQnH,EACjBygB,QAAStZ,EAAQzI,EACjBkQ,SAAUzH,EAAQyH,SAClB5S,OAAQoB,EAAI2M,QAAQgpB,UAAU5rB,EAAQnH,EAAGmH,EAAQzI,GAAG1C,QACnD8Q,GA/EL,CAiFF,EAEA+jB,EAAY5zB,UAAU+1B,gBAAkB,SAAUnL,EAAc1qB,EAASC,EAAK+J,GAC5E,IAAImqB,EAAiB12B,KAAKs2B,iBAErBt2B,KAAKy2B,oBAAsBz2B,KAAKu2B,eACnCG,EAAe1D,UAAUhzB,KAAKu2B,cAAc5zB,IAAI,cAGlD3C,KAAKg3B,OAASh3B,KAAKi3B,OAASj3B,KAAKs3B,oBAAsB,KAEnD/qB,EAAQgrB,OAASv3B,KAAKw3B,KACxBx3B,KAAK+2B,MAAMpS,GAAmBpY,EAAS/J,GAE3C,EAKAyzB,EAAY5zB,UAAU01B,qBAAuB,SAAU9K,EAAc1qB,EAASC,EAAK+J,GACjF,IAAIyT,EAAczT,EAAQyT,YACtB5B,EAAY7R,EAAQ6R,UAEpB5X,EAAmBjE,EAAQsE,aAAa,eAAeL,iBAE3D,GAAmB,MAAfwZ,GAAoC,MAAb5B,GAAyC,MAApB5X,EAAhD,CAIA,IAAI2D,EAAc5H,EAAQwd,iBAAiBC,GAE3C,GAAK7V,EAAL,CAIA,IAAI6b,EAAO7b,EAAYQ,UACnB0tB,EAAuBC,GAAkB,CAACtS,EAAKuS,aAAana,GAAYjU,GAAcA,EAAYC,kBAAoB,CAAC,GAAG7C,OAAQvH,KAAKu2B,eAE3I,GAA4C,SAAxC8B,EAAqB11B,IAAI,WAU7B,OANAH,EAAI0P,eAAe,CACjBtR,KAAM,oBACNof,YAAaA,EACb5B,UAAWA,EACXpK,SAAUzH,EAAQyH,YAEb,CAfP,CANA,CAsBF,EAEAiiB,EAAY5zB,UAAUy0B,SAAW,SAAUpmB,EAAGwB,GAC5C,IAAIW,EAAKnC,EAAEtP,OACP6rB,EAAejtB,KAAKu2B,cAExB,GAAKtJ,EAAL,CAKAjtB,KAAKg3B,OAAStmB,EAAEkV,QAChB5lB,KAAKi3B,OAASvmB,EAAEmV,QAChB,IAAI4B,EAAiB/W,EAAE+W,eAEvB,GAAIA,GAAkBA,EAAe1c,OACnC/K,KAAKw4B,iBAAiB/Q,EAAgB/W,QACjC,GAAImC,EAAI,CAEb,IAAI4lB,EACAC,EAFJ14B,KAAKs3B,oBAAsB,MAG3BqB,EAAAA,GAAAA,GAAoB9lB,GAAI,SAAUzR,GAEhC,OAAmC,OAA/BmD,EAAAA,EAAAA,GAAUnD,GAAQgd,WACpBqa,EAAqBr3B,GACd,GAI8B,OAAnCmD,EAAAA,EAAAA,GAAUnD,GAAQ02B,eACpBY,EAAmBt3B,GACZ,QAFT,CAIF,IAAG,GAECq3B,EACFz4B,KAAK44B,uBAAuBloB,EAAG+nB,EAAoBvmB,GAC1CwmB,EACT14B,KAAK64B,0BAA0BnoB,EAAGgoB,EAAkBxmB,GAEpDlS,KAAK+2B,MAAM7kB,EAEf,MACElS,KAAKs3B,oBAAsB,KAE3Bt3B,KAAK+2B,MAAM7kB,EArCb,CAuCF,EAEA+jB,EAAY5zB,UAAUy2B,YAAc,SAAU7L,EAAcxI,GAK1D,IAAIsU,EAAQ9L,EAAatqB,IAAI,aAC7B8hB,GAAKjX,EAAAA,EAAAA,MAAKiX,EAAIzkB,MACdyyB,aAAazyB,KAAKg5B,aAClBD,EAAQ,EAAI/4B,KAAKg5B,YAAclE,WAAWrQ,EAAIsU,GAAStU,GACzD,EAEAwR,EAAY5zB,UAAUm2B,iBAAmB,SAAU/Q,EAAgB/W,GACjE,IAAInO,EAAUvC,KAAKw2B,SACf5vB,EAAqB5G,KAAKu2B,cAC1Bvf,EAAQ,CAACtG,EAAEkV,QAASlV,EAAEmV,SACtBoT,EAAqBX,GAAkB,CAAC5nB,EAAE0B,eAAgBxL,GAC1D4lB,EAAaxsB,KAAKo2B,YAClB8C,EAAe,GACfC,GAAgBC,EAAAA,GAAAA,IAAoB,UAAW,CACjDC,OAAQ,GACRC,UAAU,IAGRC,EAAsB,GACtBpE,EAAqB,IAAIqE,GAAAA,IAC7BvyB,EAAAA,EAAAA,MAAKwgB,GAAgB,SAAUgS,IAC7BxyB,EAAAA,EAAAA,MAAKwyB,EAAa/O,YAAY,SAAUgP,GACtC,IAAI7uB,EAAYtI,EAAQsE,aAAa6yB,EAASrnB,QAAU,OAAQqnB,EAASpnB,WACrEqnB,EAAYD,EAAS7tB,MAEzB,GAAKhB,GAA0B,MAAb8uB,EAAlB,CAIA,IAAIC,EAAiBC,GAAoCF,EAAW9uB,EAAUvC,KAAM/F,EAASm3B,EAASna,kBAAmBma,EAAS7O,eAC9HiP,GAAoBV,EAAAA,GAAAA,IAAoB,UAAW,CACrDW,OAAQH,EACRN,WAAWU,EAAAA,EAAAA,MAAKJ,GAChBK,YAAY,EACZZ,OAAQ,KAEVF,EAAcE,OAAO5uB,KAAKqvB,IAC1B7yB,EAAAA,EAAAA,MAAKyyB,EAASna,mBAAmB,SAAUM,GACzC,IAAIC,EAASvd,EAAQwd,iBAAiBF,EAAQG,aAC1C5B,EAAYyB,EAAQI,gBACpBia,EAAWpa,EAAOK,cAAc/B,GAEpC,KAAI8b,EAAS9b,UAAY,GAAzB,CAIA8b,EAAS7nB,QAAUqnB,EAASrnB,QAC5B6nB,EAAS5nB,UAAYonB,EAASpnB,UAC9B4nB,EAASvP,SAAW+O,EAAS/O,SAC7BuP,EAAStP,OAAS8O,EAAS9O,OAC3BsP,EAASP,UAAYja,EAAAA,GAA2B7U,EAAUvC,KAAM,CAC9DuD,MAAO8tB,IAETO,EAASN,eAAiBA,EAG1BM,EAASC,OAAShF,EAAmBiF,kBAAkB,QAAQ3L,EAAAA,EAAAA,IAAqByL,EAASj4B,OAAQuqB,GACrG,IAAI6N,GAAsBC,EAAAA,GAAAA,GAA6Bxa,EAAOya,cAAcnc,GAAW,EAAM,OACzFoc,EAAOH,EAAoBG,KAE/B,GAAIA,EAAM,CACR,IAAIC,EAAiBnC,GAAkB,CAACxY,GAASlZ,GAAoBjE,IAAI,kBACzEm3B,EAAkBT,OAAO5uB,KAAKgwB,GAAiBhlB,EAAAA,EAAAA,QAAO,CACpDglB,eAAgBA,GACfD,GAAQA,EACb,CAEIH,EAAoBl5B,MACtBo4B,EAAoB9uB,KAAK4vB,EAAoBl5B,MAG/C+3B,EAAazuB,KAAKyvB,EA3BlB,CA4BF,GA7CA,CA8CF,GACF,IAGAf,EAAcE,OAAOntB,UACrBqtB,EAAoBrtB,UACpB,IAAIwuB,EAAehqB,EAAEsD,SACjB2mB,EAAY1B,EAAmBt2B,IAAI,SACnCi4B,GAAkBC,EAAAA,GAAAA,IAAmB1B,EAAehE,EAAoB3I,EAAYmO,EAAWp4B,EAAQI,IAAI,UAAWs2B,EAAmBt2B,IAAI,cACjJi4B,GAAmBrB,EAAoBuB,QAAQF,GAC/C,IAAIG,EAA4B,aAAfvO,EAA4B,OAAS,QAClDwO,EAAgBzB,EAAoBlK,KAAK0L,GAE7C/6B,KAAK84B,YAAYG,GAAoB,WAC/Bj5B,KAAKi7B,+BAA+BxT,EAAgByR,GACtDl5B,KAAKk7B,gBAAgBjC,EAAoByB,EAAc1jB,EAAM,GAAIA,EAAM,GAAIhX,KAAKs2B,gBAAiB4C,GAEjGl5B,KAAKm7B,oBAAoBlC,EAAoB+B,EAAe9B,EAAcvpB,KAAKyrB,SAAW,GAAIpkB,EAAM,GAAIA,EAAM,GAAI0jB,EAAc,KAAMvF,EAE1I,GAGF,EAEAc,EAAY5zB,UAAUu2B,uBAAyB,SAAUloB,EAAG2qB,EAAYnpB,GACtE,IAAI3P,EAAUvC,KAAKw2B,SACf8E,GAAS/2B,EAAAA,EAAAA,GAAU82B,GAInBrb,EAAcsb,EAAOtb,YACrB7V,EAAc5H,EAAQwd,iBAAiBC,GAEvCub,EAAYD,EAAOC,WAAapxB,EAChCiU,EAAYkd,EAAOld,UACnBod,EAAWF,EAAOE,SAClBxV,EAAOuV,EAAU5wB,QAAQ6wB,GACzBhP,EAAaxsB,KAAKo2B,YAClBwB,EAAkBlnB,EAAEknB,gBACpB3K,EAAeqL,GAAkB,CAACtS,EAAKuS,aAAana,GAAYmd,EAAWpxB,IAAgBA,EAAYC,kBAAoB,CAAC,GAAG7C,OAAQvH,KAAKu2B,cAAeqB,EAAkB,CAC/K5jB,SAAU4jB,GACR,MACA6D,EAAiBxO,EAAatqB,IAAI,WAEtC,GAAsB,MAAlB84B,GAA6C,SAAnBA,EAA9B,CAIA,IAAIC,EAASH,EAAUpb,cAAc/B,EAAWod,GAC5CrG,EAAqB,IAAIqE,GAAAA,GAG7BkC,EAAOvB,OAAShF,EAAmBiF,kBAAkB,QAAQ3L,EAAAA,EAAAA,IAAqBiN,EAAOz5B,OAAQuqB,GACjG,IAAI6N,GAAsBC,EAAAA,GAAAA,GAA6BiB,EAAUhB,cAAcnc,GAAW,EAAOod,IAC7Fb,EAAY1N,EAAatqB,IAAI,SAC7B83B,EAAiBxN,EAAatqB,IAAI,kBAClC63B,EAAOH,EAAoBG,KAC3BmB,EAAanB,GAAOK,EAAAA,GAAAA,IAAmBJ,GAAiBhlB,EAAAA,EAAAA,QAAO,CACjEglB,eAAgBA,GACfD,GAAQA,EAAMrF,EAAoB3I,EAAYmO,EAAWp4B,EAAQI,IAAI,UAAWsqB,EAAatqB,IAAI,cAAgB03B,EAAoBl5B,KACpIy6B,EAAc,QAAUL,EAAUpwB,KAAO,IAAMiT,EAEnDpe,KAAK84B,YAAY7L,GAAc,WAC7BjtB,KAAKm7B,oBAAoBlO,EAAc0O,EAAYD,EAAQE,EAAalrB,EAAEkV,QAASlV,EAAEmV,QAASnV,EAAEsD,SAAUtD,EAAEtP,OAAQ+zB,EACtH,IAIAjjB,EAAe,CACbtR,KAAM,UACNqf,gBAAiB7B,EACjBA,UAAW4H,EAAKmE,YAAY/L,GAC5B4B,YAAaA,EACbuX,KAAMv3B,KAAKw3B,KA3Bb,CA6BF,EAEAvB,EAAY5zB,UAAUw2B,0BAA4B,SAAUnoB,EAAGmC,EAAIX,GACjE,IAAIopB,GAAS/2B,EAAAA,EAAAA,GAAUsO,GACnBilB,EAAgBwD,EAAOxD,cACvB9iB,EAAa8iB,EAAcnsB,QAAU,CAAC,EAE1C,IAAI4K,EAAAA,EAAAA,UAASvB,GAAa,CACxB,IAAI2e,EAAU3e,EACdA,EAAa,CACX2e,QAASA,EAET9U,UAAW8U,EAEf,CAEA,IAAIkI,EAAsB,CAAC7mB,GAEvB8mB,EAAO97B,KAAKw2B,SAAS3vB,aAAay0B,EAAOS,kBAAmBT,EAAO52B,gBAEnEo3B,GACFD,EAAoBpxB,KAAKqxB,GAM3BD,EAAoBpxB,KAAK,CACvBoU,UAAW7J,EAAW2e,UAExB,IAAIiE,EAAkBlnB,EAAEknB,gBACpBoE,EAAkB1D,GAAkBuD,EAAqB77B,KAAKu2B,cAAeqB,EAAkB,CACjG5jB,SAAU4jB,GACR,MACAqE,EAAcD,EAAgBr5B,IAAI,WAClCi5B,EAAcjsB,KAAKyrB,SAAW,GAE9BjG,EAAqB,IAAIqE,GAAAA,GAI7Bx5B,KAAK84B,YAAYkD,GAAiB,WAGhC,IAAIE,GAAkBxyB,EAAAA,EAAAA,OAAMsyB,EAAgBr5B,IAAI,oBAAsB,CAAC,GAEvE3C,KAAKm7B,oBAAoBa,EAAiBC,EAAaC,EAAiBN,EAAalrB,EAAEkV,QAASlV,EAAEmV,QAASnV,EAAEsD,SAAUnB,EAAIsiB,EAC7H,IAGAjjB,EAAe,CACbtR,KAAM,UACN22B,KAAMv3B,KAAKw3B,KAEf,EAEAvB,EAAY5zB,UAAU84B,oBAAsB,SAE5ClO,EAAcgP,EAAaP,EAAQE,EAAax2B,EAAGtB,EAAG42B,EAAc7nB,EAAIsiB,GAItE,GAFAn1B,KAAKy3B,QAAU,GAEVxK,EAAatqB,IAAI,gBAAmBsqB,EAAatqB,IAAI,QAA1D,CAIA,IAAI+zB,EAAiB12B,KAAKs2B,gBAC1BI,EAAexC,aAAajH,EAAatqB,IAAI,cAC7C,IAAIkc,EAAYoO,EAAatqB,IAAI,aACjC+3B,EAAeA,GAAgBzN,EAAatqB,IAAI,YAChD,IAAIw5B,EAAOF,EAEPG,EAAYp8B,KAAKq8B,iBAAiB,CAACj3B,EAAGtB,GAAI43B,EAAQzO,EAAatqB,IAAI,WAAYsqB,EAAatqB,IAAI,gBAEhG0wB,EAAiB+I,EAAUn6B,MAE/B,GAAI4c,EACF,IAAItI,EAAAA,EAAAA,UAASsI,GAAY,CACvB,IAAIyd,EAASrP,EAAa1qB,QAAQI,IAAI,UAClC45B,GAAUjxB,EAAAA,EAAAA,SAAQowB,GAAUA,EAAO,GAAKA,EACxCc,EAAaD,GAAWA,EAAQ5R,UAAY4R,EAAQ5R,SAASpf,QAAQ,SAAW,EACpF4wB,EAAOtd,EAEH2d,IACFL,GAAOM,EAAAA,GAAAA,IAAWF,EAAQ5C,UAAWwC,EAAMG,IAG7CH,GAAOO,EAAAA,EAAAA,IAAUP,EAAMT,GAAQ,EACjC,MAAO,IAAIxd,EAAAA,EAAAA,YAAWW,GAAY,CAChC,IAAI8d,GAAWnvB,EAAAA,EAAAA,OAAK,SAAUovB,EAAUT,GAClCS,IAAa58B,KAAKy3B,UACpBf,EAAehD,WAAWyI,EAAMhH,EAAoBlI,EAAcoG,EAAgBqH,GAElF16B,KAAKk7B,gBAAgBjO,EAAcyN,EAAct1B,EAAGtB,EAAG4yB,EAAgBgF,EAAQ7oB,GAEnF,GAAG7S,MACHA,KAAKy3B,QAAUmE,EACfO,EAAOtd,EAAU6c,EAAQE,EAAae,EACxC,MACER,EAAOtd,EAIX6X,EAAehD,WAAWyI,EAAMhH,EAAoBlI,EAAcoG,EAAgBqH,GAClFhE,EAAex1B,KAAK+rB,EAAcoG,GAElCrzB,KAAKk7B,gBAAgBjO,EAAcyN,EAAct1B,EAAGtB,EAAG4yB,EAAgBgF,EAAQ7oB,EA1C/E,CA2CF,EAEAojB,EAAY5zB,UAAUg6B,iBAAmB,SAAUrlB,EAAO6lB,EAAmBxQ,EAAS3qB,GACpF,MAAgB,SAAZ2qB,IAAsB/gB,EAAAA,EAAAA,SAAQuxB,GACzB,CACL56B,MAAOP,IAAqC,SAArB1B,KAAKo2B,YAAyB,OAAS,UAI7D9qB,EAAAA,EAAAA,SAAQuxB,QAAb,EACS,CACL56B,MAAOP,GAAem7B,EAAkB56B,OAAS46B,EAAkBn7B,YAGzE,EAEAu0B,EAAY5zB,UAAU64B,gBAAkB,SAAUjO,EAAcyN,EAAct1B,EAC9EtB,EACA6vB,EAAS+H,EAAQ7oB,GACf,IAAIsM,EAAYnf,KAAK8N,KAAK5I,WAEtBka,EAAapf,KAAK8N,KAAK3I,YAE3Bu1B,EAAeA,GAAgBzN,EAAatqB,IAAI,YAChD,IAAIm6B,EAAcnJ,EAAQQ,UACtB5uB,EAAQ0nB,EAAatqB,IAAI,SACzBo6B,EAAS9P,EAAatqB,IAAI,iBAC1BgD,EAAOkN,GAAMA,EAAGlP,kBAAkB+F,QAWtC,GAVAmJ,GAAMlN,EAAK4V,eAAe1I,EAAGuC,YAEzB8I,EAAAA,EAAAA,YAAWwc,KAEbA,EAAeA,EAAa,CAACt1B,EAAGtB,GAAI43B,EAAQ/H,EAAQ9gB,GAAIlN,EAAM,CAC5Dq3B,SAAU,CAAC7d,EAAWC,GACtB0d,YAAaA,EAAY7wB,YAIzBX,EAAAA,EAAAA,SAAQovB,GACVt1B,GAAI63B,EAAAA,EAAAA,IAAavC,EAAa,GAAIvb,GAClCrb,GAAIm5B,EAAAA,EAAAA,IAAavC,EAAa,GAAItb,QAC7B,IAAIvB,EAAAA,EAAAA,UAAS6c,GAAe,CACjC,IAAIwC,EAAoBxC,EACxBwC,EAAkBn4B,MAAQ+3B,EAAY,GACtCI,EAAkBn5B,OAAS+4B,EAAY,GACvC,IAAI93B,GAAaC,EAAAA,EAAAA,IAAci4B,EAAmB,CAChDn4B,MAAOoa,EACPpb,OAAQqb,IAEVha,EAAIJ,EAAWI,EACftB,EAAIkB,EAAWlB,EACfyB,EAAQ,KAGRw3B,EAAS,IACX,MACK,IAAIxmB,EAAAA,EAAAA,UAASmkB,IAAiB7nB,EAAI,CACnC,IAAIgG,EAAMskB,GAAoBzC,EAAc/0B,EAAMm3B,EAAa7P,EAAatqB,IAAI,gBAChFyC,EAAIyT,EAAI,GACR/U,EAAI+U,EAAI,EACV,KAAO,CACDA,EAAMukB,GAAqBh4B,EAAGtB,EAAG6vB,EAASxU,EAAWC,EAAY7Z,EAAQ,KAAO,GAAIw3B,EAAS,KAAO,IACxG33B,EAAIyT,EAAI,GACR/U,EAAI+U,EAAI,EACV,CAKF,GAHAtT,IAAUH,GAAKi4B,GAAc93B,GAASu3B,EAAY,GAAK,EAAc,UAAVv3B,EAAoBu3B,EAAY,GAAK,GAChGC,IAAWj5B,GAAKu5B,GAAcN,GAAUD,EAAY,GAAK,EAAe,WAAXC,EAAsBD,EAAY,GAAK,GAEhG9P,GAAqBC,GAAe,CAClCpU,EAAMykB,GAAuBl4B,EAAGtB,EAAG6vB,EAASxU,EAAWC,GAC3Dha,EAAIyT,EAAI,GACR/U,EAAI+U,EAAI,EACV,CAEA8a,EAAQW,OAAOlvB,EAAGtB,EACpB,EAIAmyB,EAAY5zB,UAAU44B,+BAAiC,SAAUxT,EAAgByR,GAC/E,IAAIqE,EAAev9B,KAAKs3B,oBACpBkG,EAAmBx9B,KAAKy9B,cACxBC,IAAsBH,GAAgBA,EAAaxyB,SAAW0c,EAAe1c,OA6BjF,OA5BA2yB,IAAqBz2B,EAAAA,EAAAA,MAAKs2B,GAAc,SAAUI,EAAkBC,GAClE,IAAIC,EAAiBF,EAAiBjT,YAAc,GAChDoT,EAAmBrW,EAAemW,IAAkB,CAAC,EACrDG,EAAiBD,EAAiBpT,YAAc,GACpDgT,EAAoBA,GAAqBG,EAAe9yB,SAAWgzB,EAAehzB,OAClF2yB,IAAqBz2B,EAAAA,EAAAA,MAAK42B,GAAgB,SAAUG,EAAUC,GAC5D,IAAIC,EAAWH,EAAeE,IAAc,CAAC,EACzCE,EAAcH,EAASze,mBAAqB,GAC5C6e,EAAaF,EAAS3e,mBAAqB,GAC/Cme,EAAoBA,GAAqBM,EAASnyB,QAAUqyB,EAASryB,OAASmyB,EAASrT,WAAauT,EAASvT,UAAYqT,EAASpT,SAAWsT,EAAStT,QAAUuT,EAAYpzB,SAAWqzB,EAAWrzB,OAClM2yB,IAAqBz2B,EAAAA,EAAAA,MAAKk3B,GAAa,SAAUE,EAAaC,GAC5D,IAAIC,EAAaH,EAAWE,GAC5BZ,EAAoBA,GAAqBW,EAAYre,cAAgBue,EAAWve,aAAeqe,EAAYjgB,YAAcmgB,EAAWngB,SACtI,IAEAof,IAAoBv2B,EAAAA,EAAAA,MAAK+2B,EAASze,mBAAmB,SAAUM,GAC7D,IAAI2e,EAAY3e,EAAQG,YACpBka,EAAWhB,EAAasF,GACxBC,EAAejB,EAAiBgB,GAEhCtE,GAAYuE,GAAgBA,EAAazY,OAASkU,EAASlU,OAC7D0X,GAAoB,EAExB,GACF,GACF,IACA19B,KAAKs3B,oBAAsB7P,EAC3BznB,KAAKy9B,cAAgBvE,IACZwE,CACX,EAEAzH,EAAY5zB,UAAU00B,MAAQ,SAAU7kB,GAKtClS,KAAKs3B,oBAAsB,KAC3BplB,EAAe,CACbtR,KAAM,UACN22B,KAAMv3B,KAAKw3B,KAEf,EAEAvB,EAAY5zB,UAAU0K,QAAU,SAAUxK,EAASC,IAC7C2hB,GAAAA,EAAAA,MAAa3hB,EAAI2zB,YAIrB1nB,EAAAA,EAAAA,IAAMzO,KAAM,mBAEZA,KAAKs2B,gBAAgBvpB,UAErB4Y,GAA0B,cAAenjB,GAC3C,EAEAyzB,EAAYr1B,KAAO,UACZq1B,CACT,CA3rBA,CA2rBElwB,EAAAA,GAMF,SAASuyB,GAAkBoG,EAAc93B,EAAoB+3B,GAE3D,IACIC,EADAr8B,EAAUqE,EAAmBrE,QAG7Bo8B,GACFC,EAAc,IAAI30B,EAAAA,EAAM00B,EAAsBp8B,EAASA,GACvDq8B,EAAc,IAAI30B,EAAAA,EAAMrD,EAAmB+E,OAAQizB,EAAar8B,IAEhEq8B,EAAch4B,EAGhB,IAAK,IAAIkE,EAAI4zB,EAAa3zB,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACjD,IAAIkK,EAAa0pB,EAAa5zB,GAE1BkK,IACEA,aAAsB/K,EAAAA,IACxB+K,EAAaA,EAAWrS,IAAI,WAAW,KAQrC4T,EAAAA,EAAAA,UAASvB,KACXA,EAAa,CACX6J,UAAW7J,IAIXA,IACF4pB,EAAc,IAAI30B,EAAAA,EAAM+K,EAAY4pB,EAAar8B,IAGvD,CAEA,OAAOq8B,CACT,CAEA,SAASja,GAAmBpY,EAAS/J,GACnC,OAAO+J,EAAQ2F,iBAAkB1E,EAAAA,EAAAA,MAAKhL,EAAI0P,eAAgB1P,EAC5D,CAEA,SAAS46B,GAAqBh4B,EAAGtB,EAAG6vB,EAASxU,EAAWC,EAAYyf,EAAMC,GACxE,IAAInb,EAAOgQ,EAAQQ,UACfpvB,EAAQ4e,EAAK,GACb5f,EAAS4f,EAAK,GAsBlB,OApBY,MAARkb,IAKEz5B,EAAIL,EAAQ85B,EAAO,EAAI1f,EACzB/Z,GAAKL,EAAQ85B,EAEbz5B,GAAKy5B,GAIG,MAARC,IACEh7B,EAAIC,EAAS+6B,EAAO1f,EACtBtb,GAAKC,EAAS+6B,EAEdh7B,GAAKg7B,GAIF,CAAC15B,EAAGtB,EACb,CAEA,SAASw5B,GAAuBl4B,EAAGtB,EAAG6vB,EAASxU,EAAWC,GACxD,IAAIuE,EAAOgQ,EAAQQ,UACfpvB,EAAQ4e,EAAK,GACb5f,EAAS4f,EAAK,GAKlB,OAJAve,EAAIuK,KAAK0P,IAAIja,EAAIL,EAAOoa,GAAapa,EACrCjB,EAAI6L,KAAK0P,IAAIvb,EAAIC,EAAQqb,GAAcrb,EACvCqB,EAAIuK,KAAK2P,IAAIla,EAAG,GAChBtB,EAAI6L,KAAK2P,IAAIxb,EAAG,GACT,CAACsB,EAAGtB,EACb,CAEA,SAASq5B,GAAoBnpB,EAAUrO,EAAMm3B,EAAan7B,GACxD,IAAIo9B,EAAWjC,EAAY,GACvBkC,EAAYlC,EAAY,GACxBhmB,EAASnH,KAAKsvB,KAAKtvB,KAAKuf,MAAQvtB,GAAe,EAC/CyD,EAAI,EACJtB,EAAI,EACJo7B,EAAYv5B,EAAKZ,MACjBo6B,EAAax5B,EAAK5B,OAEtB,OAAQiQ,GACN,IAAK,SACH5O,EAAIO,EAAKP,EAAI85B,EAAY,EAAIH,EAAW,EACxCj7B,EAAI6B,EAAK7B,EAAIq7B,EAAa,EAAIH,EAAY,EAC1C,MAEF,IAAK,MACH55B,EAAIO,EAAKP,EAAI85B,EAAY,EAAIH,EAAW,EACxCj7B,EAAI6B,EAAK7B,EAAIk7B,EAAYloB,EACzB,MAEF,IAAK,SACH1R,EAAIO,EAAKP,EAAI85B,EAAY,EAAIH,EAAW,EACxCj7B,EAAI6B,EAAK7B,EAAIq7B,EAAaroB,EAC1B,MAEF,IAAK,OACH1R,EAAIO,EAAKP,EAAI25B,EAAWjoB,EACxBhT,EAAI6B,EAAK7B,EAAIq7B,EAAa,EAAIH,EAAY,EAC1C,MAEF,IAAK,QACH55B,EAAIO,EAAKP,EAAI85B,EAAYpoB,EACzBhT,EAAI6B,EAAK7B,EAAIq7B,EAAa,EAAIH,EAAY,EAG9C,MAAO,CAAC55B,EAAGtB,EACb,CAEA,SAASu5B,GAAc93B,GACrB,MAAiB,WAAVA,GAAgC,WAAVA,CAC/B,CAcA,SAASoyB,GAAuBprB,EAAShK,EAASC,GAChD,IAAI48B,GAAiBC,EAAAA,EAAAA,IAAe9yB,GAAS6yB,eACzCrD,EAAoBqD,EAAeE,OAAO,GAE9C,GAAKvD,GAA2C,WAAtBA,EAA1B,CAIA,IAAIwD,GAAcC,EAAAA,EAAAA,IAAyBj9B,EAASw5B,EAAmBqD,EAAez8B,IAAIo5B,GAAoB,CAC5G0D,YAAY,EACZC,WAAW,EACXC,YAAY,IAEVp4B,EAAQg4B,EAAYK,OAAO,GAE/B,GAAKr4B,EAAL,CAIA,IACIsL,EADAgtB,EAAOr9B,EAAIs9B,wBAAwBv4B,GAWvC,OATAs4B,EAAKp9B,MAAM6Q,UAAS,SAAUysB,GAC5B,IAAIjI,GAAgBvzB,EAAAA,EAAAA,GAAUw7B,GAAOjI,cAErC,GAAIA,GAAiBA,EAAc3sB,OAASoB,EAAQpB,KAElD,OADA0H,EAAKktB,GACE,CAEX,IAEIltB,EACK,CACLkpB,kBAAmBA,EACnBr3B,eAAgB6C,EAAM7C,eACtBmO,GAAIA,QAJR,CAbA,CAXA,CA+BF,CAEA,UC/4BO,SAAS7M,GAAQC,IACtB+5B,EAAAA,GAAAA,GAAIC,IACJh6B,EAAUC,uBAAuBgmB,IACjCjmB,EAAUE,sBAAsB8vB,IAUhChwB,EAAU+lB,eAAe,CACvBprB,KAAM,UACNgQ,MAAO,UACPqb,OAAQ,2BACPiU,EAAAA,MACHj6B,EAAU+lB,eAAe,CACvBprB,KAAM,UACNgQ,MAAO,UACPqb,OAAQ,2BACPiU,EAAAA,KACL,CCtBA,IAAIC,GAA4B,SAAU59B,EAAS3B,GACjD,MAAa,QAATA,EACK,CACLA,KAAM,MACNw/B,MAAO79B,EAAQ89B,iBAAiB19B,IAAI,CAAC,SAAU,WAAY,SAE3C,YAAT/B,EACF,CACLA,KAAM,UACNw/B,MAAO79B,EAAQ89B,iBAAiB19B,IAAI,CAAC,SAAU,WAAY,kBAHxD,CAMT,EAEI29B,GAEJ,SAAU9/B,GAGR,SAAS8/B,IACP,IAAI7/B,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAchE,OAZAS,EAAMG,KAAO0/B,EAAY1/B,KACzBH,EAAMI,WAAa,CACjBD,KAAM,MAQNE,YAAY,GAEPL,CACT,CAoQA,OAtRAM,EAAAA,EAAAA,IAAUu/B,EAAa9/B,GAoBvB8/B,EAAYj+B,UAAU6zB,KAAO,SAAUvqB,EAAQ40B,EAAah+B,GAC1DvC,KAAKwgC,qBAAqB70B,EAAQpJ,GAClCoJ,EAAO80B,SAAW90B,EAAO80B,UAAY,CAAC,EAEtCzgC,KAAK0gC,gBAAgB/0B,EACvB,EAEA20B,EAAYj+B,UAAUs+B,YAAc,SAAUh1B,EAAQpJ,GACpD/B,EAAO6B,UAAUs+B,YAAYC,KAAK5gC,KAAM2L,EAAQpJ,GAEhDvC,KAAK0gC,gBAAgB/0B,EACvB,EAEA20B,EAAYj+B,UAAUq+B,gBAAkB,SAAU/0B,GAChD,IAAIk1B,EAAWl1B,EAAOk1B,SAClBt+B,EAAUvC,KAAKuC,SAEF,IAAbs+B,IACFA,EAAWl1B,EAAOk1B,SAAW,CAAC,MAAO,YAGnC59B,EAAAA,QAAe49B,IACjB59B,EAAAA,KAAY49B,GAAU,SAAU1tB,EAAM8D,GACpChU,EAAAA,SAAgBkQ,KAAUA,EAAO,CAC/BvS,KAAMuS,IAER0tB,EAAS5pB,GAAShU,EAAAA,MAAakQ,EAAMgtB,GAA0B59B,EAAS4Q,EAAKvS,MAC/E,GAEJ,EAEA0/B,EAAYj+B,UAAUy+B,cAAgB,WACpC9gC,KAAK+gC,YAAY/gC,KAAKuC,SAEtB,IAAIy+B,EAAahhC,KAAKihC,MAEtB,GAAID,EAAW,IAAmC,WAA7BhhC,KAAK2C,IAAI,gBAA8B,CAG1D,IAFA,IAAIu+B,GAAc,EAETp2B,EAAI,EAAGA,EAAIk2B,EAAWj2B,OAAQD,IAAK,CAC1C,IAAIq2B,EAASH,EAAWl2B,GAAGnI,IAAI,QAE/B,GAAI3C,KAAKohC,WAAWD,GAAS,CAE3BnhC,KAAKqhC,OAAOF,GACZD,GAAc,EACd,KACF,CACF,EAGCA,GAAelhC,KAAKqhC,OAAOL,EAAW,GAAGr+B,IAAI,QAChD,CACF,EAEA29B,EAAYj+B,UAAU0+B,YAAc,SAAUx+B,GAC5C,IAAI++B,EAAgB,GAChBC,EAAiB,GACrBh/B,EAAQi/B,eAAc,SAAUr3B,GAC9B,IAEIs3B,EAFAC,EAAav3B,EAAYgB,KAI7B,GAHAo2B,EAAe92B,KAAKi3B,GAGhBv3B,EAAYw3B,qBAAsB,CACpC,IAAIC,EAAWz3B,EAAYw3B,qBACvBE,EAAQD,EAASE,cAEhBv/B,EAAQw/B,iBAAiB53B,KAC5Bo3B,EAAiBA,EAAeS,OAAOH,IAGrCA,EAAM92B,OACRu2B,EAAgBA,EAAcU,OAAOH,GAErCJ,GAAc,CAElB,MACEA,GAAc,EAGZA,IAAeQ,EAAAA,EAAAA,IAAgB93B,IACjCm3B,EAAc72B,KAAKN,EAAYgB,KAEnC,IAMAnL,KAAKkiC,gBAAkBX,EAGvB,IAAIY,EAAUniC,KAAK2C,IAAI,SAAW2+B,EAC9BN,EAAa/9B,EAAAA,IAAWk/B,GAAS,SAAUC,GAQ7C,OANIn/B,EAAAA,SAAgBm/B,IAAan/B,EAAAA,SAAgBm/B,MAC/CA,EAAW,CACTj3B,KAAMi3B,IAIH,IAAIn4B,EAAAA,EAAMm4B,EAAUpiC,KAAMA,KAAKuC,QACxC,GAAGvC,MAMHA,KAAKihC,MAAQD,CACf,EAEAV,EAAYj+B,UAAUsI,QAAU,WAC9B,OAAO3K,KAAKihC,KACd,EAEAX,EAAYj+B,UAAUg/B,OAAS,SAAUl2B,GACvC,IAAIs1B,EAAWzgC,KAAK2L,OAAO80B,SACvB4B,EAAeriC,KAAK2C,IAAI,gBAE5B,GAAqB,WAAjB0/B,EAA2B,CAC7B,IAAIrc,EAAOhmB,KAAKihC,MAChBh+B,EAAAA,KAAY+iB,GAAM,SAAUoc,GAC1B3B,EAAS2B,EAASz/B,IAAI,UAAW,CACnC,GACF,CAEA89B,EAASt1B,IAAQ,CACnB,EAEAm1B,EAAYj+B,UAAUigC,SAAW,SAAUn3B,GACR,WAA7BnL,KAAK2C,IAAI,kBACX3C,KAAK2L,OAAO80B,SAASt1B,IAAQ,EAEjC,EAEAm1B,EAAYj+B,UAAUkgC,eAAiB,SAAUp3B,GAC/C,IAAIs1B,EAAWzgC,KAAK2L,OAAO80B,SAEtBA,EAAS+B,eAAer3B,KAC3Bs1B,EAASt1B,IAAQ,GAGnBnL,KAAKygC,EAASt1B,GAAQ,WAAa,UAAUA,EAC/C,EAEAm1B,EAAYj+B,UAAUogC,UAAY,WAChC,IAAIzc,EAAOhmB,KAAKihC,MACZR,EAAWzgC,KAAK2L,OAAO80B,SAC3Bx9B,EAAAA,KAAY+iB,GAAM,SAAUoc,GAC1B3B,EAAS2B,EAASz/B,IAAI,QAAQ,KAAS,CACzC,GACF,EAEA29B,EAAYj+B,UAAUqgC,cAAgB,WACpC,IAAI1c,EAAOhmB,KAAKihC,MACZR,EAAWzgC,KAAK2L,OAAO80B,SAC3Bx9B,EAAAA,KAAY+iB,GAAM,SAAUoc,GAC1B,IAAIj3B,EAAOi3B,EAASz/B,IAAI,QAAQ,GAE3B89B,EAAS+B,eAAer3B,KAC3Bs1B,EAASt1B,IAAQ,GAGnBs1B,EAASt1B,IAASs1B,EAASt1B,EAC7B,GACF,EAEAm1B,EAAYj+B,UAAU++B,WAAa,SAAUj2B,GAC3C,IAAIs1B,EAAWzgC,KAAK2L,OAAO80B,SAC3B,QAASA,EAAS+B,eAAer3B,KAAUs1B,EAASt1B,KAAUlI,EAAAA,QAAejD,KAAKkiC,gBAAiB/2B,IAAS,CAC9G,EAEAm1B,EAAYj+B,UAAUsgC,UAAY,WAChC,MAA8B,aAAvB3iC,KAAK2C,IAAI,UAA2B,CACzCsU,MAAO,EACP9L,KAAM,YACJ,CACF8L,MAAO,EACP9L,KAAM,aAEV,EAEAm1B,EAAY1/B,KAAO,eACnB0/B,EAAYnU,aAAe,CAAC,UAC5BmU,EAAYt/B,cAAgB,CAE1BC,EAAG,EACHC,MAAM,EACN0hC,OAAQ,aACRrhC,KAAM,SAENC,IAAK,EAEL+D,MAAO,OACP9D,gBAAiB,gBACjBC,YAAa,OACb+hB,aAAc,EACd9hB,YAAa,EACbC,QAAS,EACTC,QAAS,GACTghC,UAAW,GACXC,WAAY,GACZC,aAAc,UACdC,kBAAkB,EAClBC,cAAe,OACfC,oBAAqB,OACrBC,oBAAqB,OACrBC,UAAW,CACTnhC,MAAO,UACP2yB,QAAS,UACTlzB,YAAa,UACbC,YAAa,OACb0hC,UAAW,UACXC,WAAY,UACZC,iBAAkB,UAClBC,iBAAkB,WAEpBz5B,UAAW,CACThF,MAAO,OACP9C,MAAO,UACPghC,cAAe,OACfQ,cAAe,EACf7O,QAAS,UACTh0B,KAAM,UACN8iC,IAAK,UACLrU,KAAM,UACNsU,WAAY,UACZC,WAAY,WAEd9hC,UAAW,CACTG,MAAO,QAETogC,cAAc,EACdxB,UAAU,EACVgD,cAAe,CACb3iC,MAAM,EACNuiB,aAAc,GACd7hB,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBG,SAAU,GACV+hC,WAAY,aACZ7hC,MAAO,OACPN,YAAa,EACbD,YAAa,QAEfqiC,SAAU,CACRF,cAAe,CACb3iC,MAAM,EACNe,MAAO,OACPR,gBAAiB,SAGrBuiC,iBAAkB,OAClBC,gBAAiB,EACjBC,kBAAmB,GACnBrM,QAAS,CACP32B,MAAM,IAGHo/B,CACT,CAxRA,CAwREn+B,EAAAA,GAEF,M,sBCzRO,SAASgiC,GAAex+B,EAAMgU,GACnC,IAAI/X,EAAUmd,EAAAA,GAA6BpF,EAAehX,IAAI,YAC1DS,EAAQuW,EAAejU,aAAa,CAAC,QAAS,YAkBlD,OAjBAtC,EAAME,KAAOqW,EAAehX,IAAI,mBAChCgD,EAAO,IAAIxC,EAAAA,EAAa,CACtByC,MAAO,CACLR,EAAGO,EAAKP,EAAIxD,EAAQ,GACpBkC,EAAG6B,EAAK7B,EAAIlC,EAAQ,GACpBmD,MAAOY,EAAKZ,MAAQnD,EAAQ,GAAKA,EAAQ,GACzCmC,OAAQ4B,EAAK5B,OAASnC,EAAQ,GAAKA,EAAQ,GAC3CiE,EAAG8T,EAAehX,IAAI,iBAExBS,MAAOA,EACPgB,QAAQ,EACRX,IAAK,IAMAkC,CACT,C,eCjCIiC,GAAQ3E,EAAAA,MACRgE,GAAOhE,EAAAA,KACPmhC,GAAQjhC,EAAAA,EAERkhC,GAEJ,SAAU7jC,GAGR,SAAS6jC,IACP,IAAI5jC,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAIhE,OAFAS,EAAMG,KAAOyjC,EAAWzjC,KACxBH,EAAM6jC,iBAAkB,EACjB7jC,CACT,CAiWA,OAzWAM,EAAAA,EAAAA,IAAUsjC,EAAY7jC,GAUtB6jC,EAAWhiC,UAAU6zB,KAAO,WAC1Bl2B,KAAKyC,MAAMkC,IAAI3E,KAAKukC,cAAgB,IAAIH,IACxCpkC,KAAKyC,MAAMkC,IAAI3E,KAAKwkC,eAAiB,IAAIJ,IACzCpkC,KAAKykC,gBAAiB,CACxB,EAMAJ,EAAWhiC,UAAUqiC,gBAAkB,WACrC,OAAO1kC,KAAKukC,aACd,EAMAF,EAAWhiC,UAAUsiC,iBAAmB,WACtC,OAAO3kC,KAAKwkC,cACd,EAMAH,EAAWhiC,UAAUvC,OAAS,SAAU8kC,EAAariC,EAASC,GAC5D,IAAIqiC,EAAgB7kC,KAAKykC,eAIzB,GAHAzkC,KAAKykC,gBAAiB,EACtBzkC,KAAK8kC,aAEAF,EAAYjiC,IAAI,QAAQ,GAA7B,CAIA,IAAIoiC,EAAYH,EAAYjiC,IAAI,SAC5BigC,EAASgC,EAAYjiC,IAAI,UAExBoiC,GAA2B,SAAdA,IAChBA,EAAwC,UAA5BH,EAAYjiC,IAAI,SAAkC,aAAXigC,EAAwB,QAAU,QAIvF,IAAI/B,EAAW+D,EAAYjiC,IAAI,YAAY,GACvCqhC,EAAmBY,EAAYjiC,IAAI,oBAAoB,IAEvDk+B,GAAcmD,GAAyC,SAArBA,IACpCA,EAA8B,eAAXpB,EAA0B,MAAQ,SAGvD5iC,KAAKglC,YAAYD,EAAWH,EAAariC,EAASC,EAAKq+B,EAAU+B,EAAQoB,GAEzE,IAAIiB,EAAeL,EAAY9/B,qBAC3BogC,EAAe,CACjBngC,MAAOvC,EAAI0C,WACXnB,OAAQvB,EAAI2C,aAEVvD,EAAUgjC,EAAYjiC,IAAI,WAC1BwiC,EAAUC,EAAAA,GAAyBH,EAAcC,EAActjC,GAC/DyjC,EAAWrlC,KAAKslC,YAAYV,EAAaG,EAAWI,EAASN,EAAehE,EAAUmD,GAEtFh/B,EAAaogC,EAAAA,GAAyBniC,EAAAA,SAAgB,CACxD8B,MAAOsgC,EAAStgC,MAChBhB,OAAQshC,EAASthC,QAChBkhC,GAAeC,EAActjC,GAChC5B,KAAKyC,MAAM2C,EAAIJ,EAAWI,EAAIigC,EAASjgC,EACvCpF,KAAKyC,MAAMqB,EAAIkB,EAAWlB,EAAIuhC,EAASvhC,EACvC9D,KAAKyC,MAAM4C,aAEXrF,KAAKyC,MAAMkC,IAAI3E,KAAKulC,cAAgBpB,GAAekB,EAAUT,GApC7D,CAqCF,EAEAP,EAAWhiC,UAAUyiC,WAAa,WAChC9kC,KAAK0kC,kBAAkBhiC,YACvB1C,KAAKulC,eAAiBvlC,KAAKyC,MAAMmK,OAAO5M,KAAKulC,eAC7CvlC,KAAK2kC,mBAAmBjiC,WAC1B,EAEA2hC,EAAWhiC,UAAU2iC,YAAc,SAAUD,EAAWH,EAAariC,EAASC,EAAKq+B,EAAU+B,EAAQoB,GACnG,IAAIwB,EAAexlC,KAAK0kC,kBACpBe,EAAiBxiC,EAAAA,gBACjByiC,EAAad,EAAYjiC,IAAI,gBAC7BgjC,EAAkB,GACtBpjC,EAAQi/B,eAAc,SAAUr3B,IAC7BA,EAAYxH,IAAI,oBAAsBgjC,EAAgBl7B,KAAKN,EAAYe,GAC1E,IACAjE,GAAK29B,EAAYj6B,WAAW,SAAUi7B,EAAiBxnB,GACrD,IAAIjT,EAAOy6B,EAAgBjjC,IAAI,QAE/B,IAAK3C,KAAKskC,kBAA6B,KAATn5B,GAAwB,OAATA,GAAgB,CAC3D,IAAI06B,EAAI,IAAIzB,GAIZ,OAFAyB,EAAEC,SAAU,OACZN,EAAa7gC,IAAIkhC,EAEnB,CAGA,IAAI17B,EAAc5H,EAAQwjC,gBAAgB56B,GAAM,GAEhD,IAAIs6B,EAAe9iC,IAAIwI,GAAvB,CAMA,GAAIhB,EAAa,CACf,IAAI6b,EAAO7b,EAAYQ,UACnBq7B,EAAkBhgB,EAAKigB,UAAU,oBAAsB,CAAC,EACxDC,EAAalgB,EAAKigB,UAAU,cAM5B7iC,EAAQ4iB,EAAKigB,UAAU,SAEvBE,EAAYnmC,KAAKomC,YAAYj8B,EAAagB,EAAMiT,EAAWwnB,EAAiBhB,EAAaG,EAAWiB,EAAiB5iC,EAAO8iC,EAAYR,EAAYljC,GAExJ2jC,EAAU9hC,GAAG,QAASuD,GAAMy+B,GAAsBl7B,EAAM,KAAM3I,EAAKmjC,IAAkBthC,GAAG,YAAauD,GAAM0+B,GAAyBn8B,EAAYgB,KAAM,KAAM3I,EAAKmjC,IAAkBthC,GAAG,WAAYuD,GAAM2+B,GAAwBp8B,EAAYgB,KAAM,KAAM3I,EAAKmjC,IAC7PF,EAAee,IAAIr7B,GAAM,EAC3B,MAEE5I,EAAQi/B,eAAc,SAAUr3B,GAE9B,IAAIs7B,EAAe9iC,IAAIwI,IAInBhB,EAAYw3B,qBAAsB,CACpC,IAAIC,EAAWz3B,EAAYw3B,qBAE3B,IAAKC,EAAS6E,YAAYt7B,GACxB,OAGF,IAAIqW,EAAMogB,EAAS8E,YAAYv7B,GAC3B/H,EAAQw+B,EAAS+E,cAAcnlB,EAAK,SACpC0kB,EAAatE,EAAS+E,cAAcnlB,EAAK,cACzColB,GAAW96B,EAAAA,GAAAA,OAAM1I,EAAME,MAGvBsjC,GAA4B,IAAhBA,EAAS,KACvBA,EAAS,GAAK,GAEdxjC,EAAQH,EAAAA,OAAcA,EAAAA,OAAc,CAAC,EAAGG,GAAQ,CAC9CE,MAAMujC,EAAAA,GAAAA,WAAUD,EAAU,WAI9B,IAAIT,EAAYnmC,KAAKomC,YAAYj8B,EAAagB,EAAMiT,EAAWwnB,EAAiBhB,EAAaG,EAAW,CAAC,EAAG3hC,EAAO8iC,EAAYR,EAAYljC,GAG3I2jC,EAAU9hC,GAAG,QAASuD,GAAMy+B,GAAsB,KAAMl7B,EAAM3I,EAAKmjC,IAElEthC,GAAG,YAAauD,GAAM0+B,GAAyB,KAAMn7B,EAAM3I,EAAKmjC,IAAkBthC,GAAG,WAAYuD,GAAM2+B,GAAwB,KAAMp7B,EAAM3I,EAAKmjC,IACjJF,EAAee,IAAIr7B,GAAM,EAC3B,CACF,GAAGnL,MAGD8mC,CA1DJ,CA+DF,GAAG9mC,MAEC6gC,GACF7gC,KAAK+mC,gBAAgBlG,EAAU+D,EAAapiC,EAAKogC,EAAQoB,EAE7D,EAEAK,EAAWhiC,UAAU0kC,gBAAkB,SAAUlG,EAAU+D,EAAapiC,EAAKogC,EAAQoB,GACnF,IAAIgD,EAAgBhnC,KAAK2kC,mBACzB19B,GAAK45B,GAAU,SAA8BoG,GAC3C,IAAIrmC,EAAOqmC,EAAarmC,KACpBsmC,EAAY,IAAI/jC,EAAAA,GAAa,CAC/BC,MAAO,CACLgC,EAAG,EACHtB,EAAG,EACHyB,MAAO,SACPvB,cAAe,UAEjBmjC,QAAS,WACP3kC,EAAI0P,eAAe,CACjBtR,KAAe,QAATA,EAAiB,kBAAoB,uBAE/C,IAEFomC,EAAcriC,IAAIuiC,GAClB,IAAInqB,EAAa6nB,EAAY/hC,SAAS,iBAClCukC,EAAqBxC,EAAY/hC,SAAS,CAAC,WAAY,mBAC3DwkC,EAAAA,EAAAA,IAAcH,EAAW,CACvBI,OAAQvqB,EACRgnB,SAAUqD,GACT,CACDG,YAAaN,EAAa7G,SAE5BoH,EAAAA,GAAAA,IAAoBN,EACtB,GACF,EAEA7C,EAAWhiC,UAAU+jC,YAAc,SAAUj8B,EAAagB,EAAMiT,EAAWwnB,EAAiBhB,EAAaG,EAAWiB,EAAiByB,EAAiBvB,EAAYR,EAAYljC,GAC5K,IAAIklC,EAAWv9B,EAAYw9B,eACvB9E,EAAY+B,EAAYjiC,IAAI,aAC5BmgC,EAAa8B,EAAYjiC,IAAI,cAC7By+B,EAAawD,EAAYxD,WAAWj2B,GACpCy8B,EAAahC,EAAgBjjC,IAAI,gBACjCqgC,EAAmB4C,EAAgBjjC,IAAI,oBACvCklC,EAAiBjC,EAAgBjjC,IAAI,QACzCujC,EAAa2B,GAAkB3B,GAAc,YAC7C,IAAI9iC,EAAQ0kC,GAAe5B,EAAYN,EAAiBI,EAAiByB,EAAiBC,EAAUtG,EAAY5+B,GAC5G2jC,EAAY,IAAI/B,GAChBxhC,EAAiBgjC,EAAgB/iC,SAAS,aAE9C,IAAII,EAAAA,WAAkBkH,EAAY49B,gBAAoBF,GAAqC,YAAnBA,EAWjE,CAEL,IAAIhxB,EAA4B,YAAnBgxB,GAAgC19B,EAAYQ,UAAUs7B,UAAU,UAA2B,YAAf2B,EAA2Bz9B,EAAYQ,UAAUs7B,UAAU,gBAAkB2B,EAAa,EAEnLzB,EAAUxhC,IAAIqjC,GAAqB,CACjCnF,UAAWA,EACXC,WAAYA,EACZpf,KAAMwiB,EACN0B,WAAY/wB,EACZusB,UAAWhgC,EAAMggC,UACjBr5B,UAAW3G,EAAM2G,UACjBi5B,iBAAkBA,IAEtB,MAtBEmD,EAAUxhC,IAAIwF,EAAY49B,cAAc,CACtClF,UAAWA,EACXC,WAAYA,EACZpf,KAAMwiB,EACN0B,WAAYA,EACZxE,UAAWhgC,EAAMggC,UACjBr5B,UAAW3G,EAAM2G,UACjBi5B,iBAAkBA,KAiBtB,IAAIiF,EAAsB,SAAdlD,EAAuBlC,EAAY,GAAK,EAChD9/B,EAAYgiC,EACZlmB,EAAY+lB,EAAYjiC,IAAI,aAC5BgxB,EAAUxoB,EAEVlI,EAAAA,SAAgB4b,IAAcA,EAChC8U,EAAU9U,EAAUuB,QAAQ,SAAkB,MAARjV,EAAeA,EAAO,IACnDlI,EAAAA,WAAkB4b,KAC3B8U,EAAU9U,EAAU1T,IAGtB,IAAI83B,EAAgB2C,EAAgBjjC,IAAI,iBACxCwjC,EAAUxhC,IAAI,IAAIxB,EAAAA,GAAa,CAC7BC,OAAOC,EAAAA,EAAAA,IAAgBT,EAAgB,CACrCzB,KAAMwyB,EACNvuB,EAAG6iC,EACHnkC,EAAGg/B,EAAa,EAChBx/B,KAAM89B,EAAax+B,EAAeW,eAAiB0/B,EACnD19B,MAAOxC,EACPiB,cAAe,cAInB,IAAIkkC,EAAU,IAAI/kC,EAAAA,EAAa,CAC7ByC,MAAOugC,EAAUxiC,kBACjBwkC,WAAW,IAETlb,EAAe2Y,EAAgB/iC,SAAS,WAoB5C,OAlBIoqB,EAAatqB,IAAI,SACnBQ,EAAQuW,iBAAiB,CACvB7G,GAAIq1B,EACJvuB,eAAgBirB,EAChBhrB,SAAUzO,EACVi9B,kBAAmBnb,EAAathB,SAIpCw6B,EAAUxhC,IAAIujC,GACd/B,EAAUkC,WAAU,SAAUC,GAC5BA,EAAMlkC,QAAS,CACjB,IACA8jC,EAAQ9jC,QAAUshC,EAClB1lC,KAAK0kC,kBAAkB//B,IAAIwhC,IAC3BqB,EAAAA,GAAAA,IAAoBrB,GAEpBA,EAAUoC,kBAAoBnqB,EACvB+nB,CACT,EAEA9B,EAAWhiC,UAAUijC,YAAc,SAAUV,EAAaG,EAAWI,EAASN,EAAehE,EAAUmD,GACrG,IAAIwB,EAAexlC,KAAK0kC,kBACpBsC,EAAgBhnC,KAAK2kC,mBAEzBS,EAAAA,GAAeR,EAAYjiC,IAAI,UAAW6iC,EAAcZ,EAAYjiC,IAAI,WAAYwiC,EAAQpgC,MAAOogC,EAAQphC,QAC3G,IAAIykC,EAAchD,EAAa7hC,kBAC3B8kC,EAAa,EAAED,EAAYpjC,GAAIojC,EAAY1kC,GAI/C,GAHAkjC,EAAc3hC,aACdmgC,EAAangC,aAETw7B,EAAU,CAEZuE,EAAAA,GACA,aAAc4B,EAAepC,EAAYjiC,IAAI,mBAAmB,IAChE,IAAI+lC,EAAe1B,EAAcrjC,kBAC7BglC,EAAc,EAAED,EAAatjC,GAAIsjC,EAAa5kC,GAC9CogC,EAAoBU,EAAYjiC,IAAI,qBAAqB,GACzDimC,EAAYhE,EAAYjC,YAAY1rB,MACpCvE,EAAmB,IAAdk2B,EAAkB,QAAU,SACjCC,EAAmB,IAAdD,EAAkB,SAAW,QAClCE,EAAmB,IAAdF,EAAkB,IAAM,IAER,QAArB5E,EACF2E,EAAYC,IAAcJ,EAAY91B,GAAMwxB,EAE5CuE,EAAWG,IAAcF,EAAah2B,GAAMwxB,EAI9CyE,EAAY,EAAIC,IAAcJ,EAAYK,GAAM,EAAIH,EAAaG,GAAM,EACvE7B,EAAc5hC,EAAIujC,EAAY,GAC9B3B,EAAcljC,EAAI6kC,EAAY,GAC9BnD,EAAapgC,EAAIqjC,EAAW,GAC5BjD,EAAa1hC,EAAI2kC,EAAW,GAC5B,IAAIpD,EAAW,CACbjgC,EAAG,EACHtB,EAAG,GAKL,OAHAuhC,EAAS3yB,GAAM81B,EAAY91B,GAAMwxB,EAAoBwE,EAAah2B,GAClE2yB,EAASwD,GAAMl5B,KAAK2P,IAAIkpB,EAAYK,GAAKH,EAAaG,IACtDxD,EAASyD,GAAMn5B,KAAK0P,IAAI,EAAGqpB,EAAaI,GAAMH,EAAY,EAAIC,IACvDvD,CACT,CAGE,OAFAG,EAAapgC,EAAIqjC,EAAW,GAC5BjD,EAAa1hC,EAAI2kC,EAAW,GACrBzoC,KAAKyC,MAAMkB,iBAEtB,EAMA0gC,EAAWhiC,UAAUuK,OAAS,WAC5B5M,KAAK0kC,kBAAkBhiC,YACvB1C,KAAKykC,gBAAiB,CACxB,EAEAJ,EAAWzjC,KAAO,eACXyjC,CACT,CA3WA,CA2WEt+B,EAAAA,GAEF,SAAS+hC,GAAeiB,EAAUnD,EAAiBI,EAAiByB,EAAiBC,EAAUtG,EAAY5+B,GAKzG,SAASwmC,EAAkB5lC,EAAO6lC,GAER,SAApB7lC,EAAM+S,YACR/S,EAAM+S,UAAY8yB,EAAY9yB,UAAY,EAAI,EAAI,GAGpDlP,GAAK7D,GAAO,SAAU8lC,EAASxT,GACT,YAApBtyB,EAAMsyB,KAA4BtyB,EAAMsyB,GAAYuT,EAAYvT,GAClE,GACF,CAGA,IAAIyT,EAAiBvD,EAAgB/iC,SAAS,aAC1CugC,EAAY+F,EAAezjC,eAC3B0jC,EAAqD,IAArCL,EAASM,YAAY,QAAS,GAAW,OAAS,SAClEC,EAAaH,EAAelrB,WAAW,SAC3CmlB,EAAUmG,MAASD,GAA6B,YAAfA,GAAmDE,EAAAA,GAAAA,GAA+BF,EAAY9mC,GAAnEilC,EAAgB8B,MAErD,YAAnBnG,EAAU9/B,OAKZ8/B,EAAU9/B,KAAOmkC,EAAgBC,IAGV,YAArBtE,EAAUhsB,SAKZgsB,EAAUhsB,OAASqwB,EAAgB2B,IAGX,YAAtBhG,EAAUxO,UAIZwO,EAAUxO,SAAwB,SAAb8S,EAAsBD,EAAkBzB,GAAiBpR,SAGhFoU,EAAkB5F,EAAWqE,GAE7B,IAAIgC,EAAkB7D,EAAgB/iC,SAAS,aAC3CkH,EAAY0/B,EAAgB9zB,eAOhC,GANAqzB,EAAkBj/B,EAAWi8B,GAEV,SAAnB5C,EAAU9/B,OAAoB8/B,EAAU9/B,KAAOmkC,EAAgBnkC,MAC1C,SAArB8/B,EAAUhsB,SAAsBgsB,EAAUhsB,OAASqwB,EAAgBnkC,MAC9C,SAArByG,EAAUqN,SAAsBrN,EAAUqN,OAASqwB,EAAgBnkC,OAE9D89B,EAAY,CACf,IAAIz/B,EAAcikC,EAAgBjjC,IAAI,uBAOlC+mC,EAAkBtG,EAAUgG,GAChChG,EAAUjtB,UAA4B,SAAhBxU,EAAyB8lC,EAAgBtxB,UAAY,GAAKuzB,EAAkB,EAAI,EAAItG,EAAUjtB,UACpHitB,EAAU9/B,KAAOsiC,EAAgBjjC,IAAI,iBACrCygC,EAAUhsB,OAASwuB,EAAgBjjC,IAAI,uBACvCoH,EAAUqN,OAASqyB,EAAgB9mC,IAAI,iBACvCoH,EAAUoM,UAAYszB,EAAgB9mC,IAAI,gBAC5C,CAEA,MAAO,CACLygC,UAAWA,EACXr5B,UAAWA,EAEf,CAEA,SAASi+B,GAAqBv0B,GAC5B,IAAIk2B,EAAYl2B,EAAIiQ,MAAQ,YACxBA,GAAOvM,EAAAA,GAAAA,IAAawyB,EAAW,EAAG,EAAGl2B,EAAIovB,UAAWpvB,EAAIqvB,WAAYrvB,EAAI2vB,UAAU9/B,KAAMmQ,EAAIuvB,kBAWhG,OAVAtf,EAAKle,SAASiO,EAAI2vB,WAClB1f,EAAKtQ,UAAYK,EAAIm0B,YAAc,GAAKj4B,KAAK4D,GAAK,IAClDmQ,EAAKkmB,UAAU,CAACn2B,EAAIovB,UAAY,EAAGpvB,EAAIqvB,WAAa,IAEhD6G,EAAUp+B,QAAQ,UAAY,IAChCmY,EAAKtgB,MAAMgU,OAASsM,EAAKtgB,MAAME,KAC/BogB,EAAKtgB,MAAME,KAAO,OAClBogB,EAAKtgB,MAAM+S,UAAY,GAGlBuN,CACT,CAEA,SAAS2iB,GAAqB3E,EAAYmI,EAAUrnC,EAAKmjC,GAEvDY,GAAuB7E,EAAYmI,EAAUrnC,EAAKmjC,GAClDnjC,EAAI0P,eAAe,CACjBtR,KAAM,qBACNuK,KAAoB,MAAdu2B,EAAqBA,EAAamI,IAI1CvD,GAAwB5E,EAAYmI,EAAUrnC,EAAKmjC,EACrD,CAEA,SAASmE,GAAgBtnC,GACvB,IACIunC,EADAriB,EAAOllB,EAAI2M,QAAQ66B,QAAQC,iBAE3Bn/B,EAAI,EACJyiB,EAAM7F,EAAK3c,OAEf,MAAOD,EAAIyiB,KAASwc,EAAgBriB,EAAK5c,GAAGo/B,OAAOnG,UACjDj5B,IAGF,OAAOi/B,GAAiBA,EAAcI,UACxC,CAEA,SAAS7D,GAAwB5E,EAAYmI,EAAUrnC,EAAKmjC,GAErDmE,GAAgBtnC,IACnBA,EAAI0P,eAAe,CACjBtR,KAAM,YACN8gC,WAAYA,EACZv2B,KAAM0+B,EACNlE,gBAAiBA,GAGvB,CAEA,SAASY,GAAuB7E,EAAYmI,EAAUrnC,EAAKmjC,GAEpDmE,GAAgBtnC,IACnBA,EAAI0P,eAAe,CACjBtR,KAAM,WACN8gC,WAAYA,EACZv2B,KAAM0+B,EACNlE,gBAAiBA,GAGvB,CAEA,UC7gBe,SAASyE,GAAa7nC,GACnC,IAAI8nC,EAAe9nC,EAAQ+nC,eAAe,CACxCx1B,SAAU,WAGRu1B,GAAgBA,EAAat/B,QAC/BxI,EAAQgoC,cAAa,SAAUzqB,GAG7B,IAAK,IAAIhV,EAAI,EAAGA,EAAIu/B,EAAat/B,OAAQD,IACvC,IAAKu/B,EAAav/B,GAAGs2B,WAAWthB,EAAO3U,MACrC,OAAO,EAIX,OAAO,CACT,GAEJ,CCfA,SAASq/B,GAA0BC,EAAYl+B,EAAShK,GACtD,IAEI6+B,EAFAsJ,EAAc,CAAC,EACfC,EAAgC,mBAAfF,EAoCrB,OAjCAloC,EAAQqoC,cAAc,UAAU,SAAUhG,GACpC+F,GAAgC,MAAdvJ,EAKpBwD,EAAYxD,EAAa,SAAW,YAAY70B,EAAQpB,MAChC,cAAfs/B,GAA6C,kBAAfA,EACvC7F,EAAY6F,MAEZ7F,EAAY6F,GAAYl+B,EAAQpB,MAChCi2B,EAAawD,EAAYxD,WAAW70B,EAAQpB,OAG9C,IAAI61B,EAAa4D,EAAYj6B,WAC7B1D,EAAAA,EAAAA,MAAK+5B,GAAY,SAAUz5B,GACzB,IAAI4D,EAAO5D,EAAM5E,IAAI,QAErB,GAAa,OAATwI,GAA0B,KAATA,EAArB,CAIA,IAAI0/B,EAAiBjG,EAAYxD,WAAWj2B,GAExCu/B,EAAYlI,eAAer3B,GAE7Bu/B,EAAYv/B,GAAQu/B,EAAYv/B,IAAS0/B,EAEzCH,EAAYv/B,GAAQ0/B,CARtB,CAUF,GACF,IAEsB,cAAfJ,GAA6C,kBAAfA,EAAiC,CACpEhK,SAAUiK,GACR,CACFv/B,KAAMoB,EAAQpB,KACds1B,SAAUiK,EAEd,CAEO,SAASI,GAAoB7kC,GAQlCA,EAAU+lB,eAAe,qBAAsB,uBAAuBpkB,EAAAA,EAAAA,OAAM4iC,GAA2B,mBACvGvkC,EAAU+lB,eAAe,kBAAmB,mBAAmBpkB,EAAAA,EAAAA,OAAM4iC,GAA2B,cAChGvkC,EAAU+lB,eAAe,sBAAuB,uBAAuBpkB,EAAAA,EAAAA,OAAM4iC,GAA2B,kBAQxGvkC,EAAU+lB,eAAe,eAAgB,kBAAkBpkB,EAAAA,EAAAA,OAAM4iC,GAA2B,WAQ5FvkC,EAAU+lB,eAAe,iBAAkB,oBAAoBpkB,EAAAA,EAAAA,OAAM4iC,GAA2B,YAClG,CCxEO,SAASxkC,GAAQC,GACtBA,EAAUC,uBAAuBo6B,IACjCr6B,EAAUE,sBAAsBk+B,IAChCp+B,EAAU2lB,kBAAkB3lB,EAAU4lB,SAASC,UAAUif,cAAeX,IACxEnkC,EAAU+kC,yBAAyB,UAAU,WAC3C,MAAO,OACT,IACAF,GAAoB7kC,EACtB,C,eCPIglC,GAEJ,SAAUzqC,GAGR,SAASyqC,IACP,IAAIxqC,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAOqqC,EAAsBrqC,KAC5BH,CACT,CA+CA,OAtDAM,EAAAA,EAAAA,IAAUkqC,EAAuBzqC,GAajCyqC,EAAsB5oC,UAAU6oC,mBAAqB,SAAUC,GAC7DnrC,KAAK2L,OAAOw/B,gBAAkBA,CAChC,EAEAF,EAAsB5oC,UAAU6zB,KAAO,SAAUvqB,EAAQ40B,EAAah+B,GACpE,IAAI6oC,GAAsBC,EAAAA,EAAAA,IAAgB1/B,GAE1CnL,EAAO6B,UAAU6zB,KAAK0K,KAAK5gC,KAAM2L,EAAQ40B,EAAah+B,GAEtD+oC,GAA8BtrC,KAAM2L,EAAQy/B,EAC9C,EAMAH,EAAsB5oC,UAAUs+B,YAAc,SAAUh1B,EAAQpJ,GAC9D/B,EAAO6B,UAAUs+B,YAAYC,KAAK5gC,KAAM2L,EAAQpJ,GAEhD+oC,GAA8BtrC,KAAMA,KAAK2L,OAAQA,EACnD,EAEAs/B,EAAsBrqC,KAAO,gBAC7BqqC,EAAsBjqC,eAAgBuqC,EAAAA,GAAAA,IAAqBjL,GAAAA,cAA2B,CACpF6K,gBAAiB,EACjBK,kBAAmB,EACnBC,cAAe,KACfC,mBAAoB,MACpBC,cAAe,oBACfC,UAAW,CACTC,WAAY,CAAC,qBAAsB,wBACnCC,SAAU,CAAC,oBAAqB,qBAElCC,cAAe,UACfC,sBAAuB,OACvBC,aAAc,GACdC,cAAe,CACbjqC,MAAO,QAETshB,wBAAyB,MAEpB0nB,CACT,CAxDA,CAwDE3K,IAIF,SAASgL,GAA8B1G,EAAaxjC,EAAQ+qC,GAC1D,IAAIvJ,EAASgC,EAAYjC,YACrB7hC,EAAa,CAAC,EAAG,GACrBA,EAAW8hC,EAAO3rB,OAAS,GAC3Bm1B,EAAAA,EAAAA,IAAiBhrC,EAAQ+qC,EAAK,CAC5BvrC,KAAM,MACNE,aAAcA,GAElB,CAEA,UCpEIsjC,GAAQjhC,EAAAA,EACRkpC,GAAK,CAAC,QAAS,UACfC,GAAK,CAAC,IAAK,KAEXC,GAEJ,SAAU/rC,GAGR,SAAS+rC,IACP,IAAI9rC,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAKhE,OAHAS,EAAMG,KAAO2rC,EAAqB3rC,KAClCH,EAAM6jC,iBAAkB,EACxB7jC,EAAM+rC,cAAgB,EACf/rC,CACT,CA6XA,OAtYAM,EAAAA,EAAAA,IAAUwrC,EAAsB/rC,GAWhC+rC,EAAqBlqC,UAAU6zB,KAAO,WACpC11B,EAAO6B,UAAU6zB,KAAK0K,KAAK5gC,MAE3BA,KAAKyC,MAAMkC,IAAI3E,KAAKysC,gBAAkB,IAAIrI,IAE1CpkC,KAAKysC,gBAAgB9nC,IAAI3E,KAAK0kC,mBAE9B1kC,KAAKyC,MAAMkC,IAAI3E,KAAK0sC,iBAAmB,IAAItI,GAC7C,EAMAmI,EAAqBlqC,UAAUyiC,WAAa,WAC1CtkC,EAAO6B,UAAUyiC,WAAWlE,KAAK5gC,MAEjCA,KAAK0sC,iBAAiBhqC,YAEtB1C,KAAKysC,gBAAgBE,iBAErB3sC,KAAKysC,gBAAgBG,WAAa,IACpC,EAMAL,EAAqBlqC,UAAU2iC,YAAc,SAAUD,EAAWH,EAAariC,EAASC,EAAKq+B,EAAU+B,EAAQoB,GAC7G,IAAIzR,EAAOvyB,KAEXQ,EAAO6B,UAAU2iC,YAAYpE,KAAK5gC,KAAM+kC,EAAWH,EAAariC,EAASC,EAAKq+B,EAAU+B,EAAQoB,GAEhG,IAAI6I,EAAkB7sC,KAAK0sC,iBAGvBT,EAAerH,EAAYjiC,IAAI,gBAAgB,GAC/CmqC,EAAkB7pC,EAAAA,QAAegpC,GAAgBA,EAAe,CAACA,EAAcA,GACnFc,EAAiB,WAAY,GAC7B,IAAIC,EAAqBpI,EAAY/hC,SAAS,iBAe9C,SAASkqC,EAAiB5hC,EAAM8hC,GAC9B,IAAIC,EAAoB/hC,EAAO,YAC3BuY,EAAOvgB,EAAQmN,WAAWs0B,EAAYjiC,IAAI,aAAa,GAAMiiC,EAAYjC,YAAYx3B,MAAM8hC,GAAU,CAGvG9F,QAASlkC,EAAAA,KAAYsvB,EAAK4a,QAAS5a,EAAM2a,EAAmBtI,EAAapiC,IACxE,CACD4C,GAAI0nC,EAAgB,GAAK,EACzBhpC,GAAIgpC,EAAgB,GAAK,EACzB/nC,MAAO+nC,EAAgB,GACvB/oC,OAAQ+oC,EAAgB,KAE1BppB,EAAKvY,KAAOA,EACZ0hC,EAAgBloC,IAAI+e,EACtB,CA5BAmpB,EAAgBloC,IAAI,IAAIxB,EAAAA,GAAa,CACnCgI,KAAM,WACN/H,MAAO,CAELjC,KAAM,QACNmC,KAAM0pC,EAAmBzpC,eACzBiW,KAAMwzB,EAAmB7zB,UACzBnV,cAAe,SACfuB,MAAO,UAETnB,QAAQ,KAEV2oC,EAAiB,WAAY,EAiB/B,EAMAR,EAAqBlqC,UAAUijC,YAAc,SAAUV,EAAaG,EAAWI,EAASN,EAAehE,EAAUmD,GAC/G,IAAIgD,EAAgBhnC,KAAK2kC,mBACrBiE,EAAYhE,EAAYjC,YAAY1rB,MACpCvE,EAAK25B,GAAGzD,GACRn2B,EAAK65B,GAAG1D,GACRC,EAAKwD,GAAG,EAAIzD,GACZE,EAAKwD,GAAG,EAAI1D,GAChB/H,GAAYuE,EAAAA,GACZ,aAAc4B,EAAepC,EAAYjiC,IAAI,mBAAmB,IAChE,IAAIuhC,EAAoBU,EAAYjiC,IAAI,qBAAqB,GACzD+lC,EAAe1B,EAAcrjC,kBAC7BglC,EAAc,EAAED,EAAatjC,GAAIsjC,EAAa5kC,GAC9CspC,EAAiBnqC,EAAAA,MAAakiC,GAClCtE,IAAauM,EAAe16B,GAAMyyB,EAAQzyB,GAAMg2B,EAAah2B,GAAMwxB,GAEnE,IAAImB,EAAWrlC,KAAKqtC,4BAA4BzI,EAAaC,EAAeuI,EAAgBxE,EAAWl2B,EAAIm2B,EAAIC,EAAIr2B,GAEnH,GAAIouB,EAAU,CACZ,GAAyB,QAArBmD,EACF2E,EAAYC,IAAcvD,EAAS3yB,GAAMwxB,MACpC,CACL,IAAIptB,EAAS4xB,EAAah2B,GAAMwxB,EAChCyE,EAAYC,IAAc9xB,EAC1BuuB,EAAS5yB,IAAOqE,CAClB,CAEAuuB,EAAS3yB,IAAOg2B,EAAah2B,GAAMwxB,EACnCyE,EAAY,EAAIC,IAAcvD,EAASyD,GAAMzD,EAASwD,GAAM,EAAIH,EAAaG,GAAM,EACnFxD,EAASwD,GAAMl5B,KAAK2P,IAAI+lB,EAASwD,GAAKH,EAAaG,IACnDxD,EAASyD,GAAMn5B,KAAK0P,IAAIgmB,EAASyD,GAAKJ,EAAaI,GAAMH,EAAY,EAAIC,IACzE5B,EAAc5hC,EAAIujC,EAAY,GAC9B3B,EAAcljC,EAAI6kC,EAAY,GAC9B3B,EAAc3hC,YAChB,CAEA,OAAOggC,CACT,EAEAkH,EAAqBlqC,UAAUgrC,4BAA8B,SAAUzI,EAAaC,EAAeM,EAASyD,EAAWl2B,EAAIm2B,EAAIC,EAAIr2B,GACjI,IAAI+yB,EAAexlC,KAAK0kC,kBACpB4I,EAAiBttC,KAAKysC,gBACtBI,EAAkB7sC,KAAK0sC,iBAE3BtH,EAAAA,GAAeR,EAAYjiC,IAAI,UAAW6iC,EAAcZ,EAAYjiC,IAAI,WAAaimC,EAAmBzD,EAAQpgC,MAAf,KAAsB6jC,EAAY,KAAOzD,EAAQphC,QAClJqhC,EAAAA,GACA,aAAcyH,EAAiBjI,EAAYjiC,IAAI,qBAAqB,IACpE,IAAI6lC,EAAchD,EAAa7hC,kBAC3B4pC,EAAiBV,EAAgBlpC,kBACjC6pC,EAAiBxtC,KAAKytC,gBAAkBjF,EAAY91B,GAAMyyB,EAAQzyB,GAElE+1B,EAAa,EAAED,EAAYpjC,GAAIojC,EAAY1kC,GAI1C+gC,IACH4D,EAAWG,GAAapD,EAAa/yB,IAIvC,IAAIi7B,EAAe,CAAC,EAAG,GACnBC,EAAgB,EAAEJ,EAAenoC,GAAImoC,EAAezpC,GACpD2nC,EAAgBxoC,EAAAA,UAAiB2hC,EAAYjiC,IAAI,iBAAiB,GAAOiiC,EAAYjiC,IAAI,WAAW,IAExG,GAAI6qC,EAAgB,CAClB,IAAI9B,EAAqB9G,EAAYjiC,IAAI,sBAAsB,GAEpC,QAAvB+oC,EACFiC,EAAc/E,IAAczD,EAAQzyB,GAAM66B,EAAe76B,GAGvDg7B,EAAa9E,IAAc2E,EAAe76B,GAAM+4B,CAEtD,CAGAkC,EAAc,EAAI/E,IAAcJ,EAAYK,GAAM,EAAI0E,EAAe1E,GAAM,EAC3ErD,EAAaoI,YAAYnF,GACzB6E,EAAeM,YAAYF,GAC3Bb,EAAgBe,YAAYD,GAI5B,IAAItI,EAAW,CACbjgC,EAAG,EACHtB,EAAG,GASL,GANAuhC,EAAS3yB,GAAM86B,EAAiBrI,EAAQzyB,GAAM81B,EAAY91B,GAC1D2yB,EAASwD,GAAMl5B,KAAK2P,IAAIkpB,EAAYK,GAAK0E,EAAe1E,IAExDxD,EAASyD,GAAMn5B,KAAK0P,IAAI,EAAGkuB,EAAezE,GAAM6E,EAAc,EAAI/E,IAClE0E,EAAeV,WAAazH,EAAQzyB,GAEhC86B,EAAgB,CAClB,IAAIK,EAAY,CACdzoC,EAAG,EACHtB,EAAG,GAEL+pC,EAAUn7B,GAAM/C,KAAK2P,IAAI6lB,EAAQzyB,GAAM66B,EAAe76B,GAAM+4B,EAAe,GAC3EoC,EAAUhF,GAAMxD,EAASwD,GACzByE,EAAeQ,YAAY,IAAI3qC,EAAAA,EAAa,CAC1CyC,MAAOioC,KAITP,EAAeV,WAAaiB,EAAUn7B,EACxC,MAEEm6B,EAAgBxE,WAAU,SAAUC,GAClCA,EAAMx2B,KAAK,CACTq2B,WAAW,EACX/jC,QAAQ,GAEZ,IAIF,IAAI2pC,EAAW/tC,KAAKguC,aAAapJ,GAWjC,OATsB,MAAtBmJ,EAASE,WAAqB9qC,EAAAA,EAAoBqiC,EAAc,CAC9DpgC,EAAG2oC,EAASG,gBAAgB,GAC5BpqC,EAAGiqC,EAASG,gBAAgB,IAG9BV,EAAiB5I,EAAc,MAE/B5kC,KAAKmuC,oBAAoBvJ,EAAamJ,GAE/B1I,CACT,EAEAkH,EAAqBlqC,UAAU8qC,QAAU,SAAUiB,EAAIxJ,EAAapiC,GAClE,IAAI2oC,EAAkBnrC,KAAKguC,aAAapJ,GAAawJ,GAElC,MAAnBjD,GAA2B3oC,EAAI0P,eAAe,CAC5CtR,KAAM,eACNuqC,gBAAiBA,EACjBkD,SAAUzJ,EAAY15B,IAE1B,EAEAqhC,EAAqBlqC,UAAU8rC,oBAAsB,SAAUvJ,EAAamJ,GAC1E,IAAIlB,EAAkB7sC,KAAK0sC,iBAC3BzpC,EAAAA,KAAY,CAAC,WAAY,aAAa,SAAUkI,GAC9C,IAAIpC,EAAMoC,EAAO,YACbmjC,EAA2B,MAAjBP,EAAShlC,GACnB2a,EAAOmpB,EAAgB0B,YAAYpjC,GAEnCuY,IACFA,EAAKle,SAAS,OAAQ8oC,EAAU1J,EAAYjiC,IAAI,iBAAiB,GAAQiiC,EAAYjiC,IAAI,yBAAyB,IAClH+gB,EAAKnT,OAAS+9B,EAAU,UAAY,UAExC,IACA,IAAIE,EAAW3B,EAAgB0B,YAAY,YACvC5C,EAAgB/G,EAAYjiC,IAAI,iBAChCsrC,EAAYF,EAASE,UACrBhzB,EAAuB,MAAbgzB,EAAoBA,EAAY,EAAI,EAC9CQ,EAAQV,EAASW,UACrBF,GAAY7C,GAAiB6C,EAAShpC,SAAS,OAAQvC,EAAAA,SAAgB0oC,GAAiBA,EAAcvrB,QAAQ,YAAwB,MAAXnF,EAAkB,GAAKA,EAAU,IAAImF,QAAQ,UAAoB,MAATquB,EAAgB,GAAKA,EAAQ,IAAM9C,EAAc,CAClO1wB,QAASA,EACTwzB,MAAOA,IAEX,EAWAlC,EAAqBlqC,UAAU2rC,aAAe,SAAUpJ,GACtD,IAAIuG,EAAkBvG,EAAYjiC,IAAI,mBAAmB,GACrD6iC,EAAexlC,KAAK0kC,kBACpBiK,EAAoB3uC,KAAKysC,gBAAgBG,WACzChE,EAAYhE,EAAYjC,YAAY1rB,MACpCvE,EAAK25B,GAAGzD,GACRn2B,EAAK65B,GAAG1D,GAERgG,EAAkB5uC,KAAK6uC,qBAAqB1D,GAE5C2D,EAAWtJ,EAAasJ,WACxBC,EAAaD,EAASF,GACtBI,EAAYF,EAAS/jC,OACrBkkC,EAAUD,EAAgB,EAAJ,EACtB3oC,EAAS,CACX6nC,gBAAiB,CAAC1I,EAAapgC,EAAGogC,EAAa1hC,GAC/C4qC,UAAWO,EACXhB,UAAWgB,EAAS,EACpBC,kBAAmB,KACnBC,kBAAmB,MAGrB,IAAKJ,EACH,OAAO1oC,EAGT,IAAI+oC,EAAiBC,EAAYN,GACjC1oC,EAAO6nC,gBAAgBtF,IAAcwG,EAAeE,EAYpD,IAAK,IAAIxkC,EAAI8jC,EAAkB,EAAGW,EAAmBH,EAAgBI,EAAiBJ,EAAgBK,EAAe,KAAM3kC,GAAKkkC,IAAalkC,EAC3I2kC,EAAeJ,EAAYP,EAAShkC,MAGnC2kC,GAAgBD,EAAe9+B,EAAI6+B,EAAiBD,EAAIX,GAEzDc,IAAiBh0B,EAAUg0B,EAAcF,EAAiBD,MAEtDC,EADEC,EAAe1kC,EAAIykC,EAAiBzkC,EACnB0kC,EAGAC,EAGjBF,IAC8B,MAA5BlpC,EAAO8oC,oBACT9oC,EAAO8oC,kBAAoBI,EAAiBzkC,KAG5CzE,EAAOqoC,YAIbc,EAAiBC,EAGnB,IAAS3kC,EAAI8jC,EAAkB,EAAGW,EAAmBH,EAAgBI,EAAiBJ,EAAgBK,EAAe,KAAM3kC,IAAM,IAAKA,EACpI2kC,EAAeJ,EAAYP,EAAShkC,IAIlC2kC,GAAiBh0B,EAAU+zB,EAAgBC,EAAaH,MAC1DC,EAAiBzkC,EAAI0kC,EAAe1kC,KAClC0kC,EAAiBD,EAEe,MAA5BlpC,EAAO6oC,oBACT7oC,EAAO6oC,kBAAoBK,EAAiBzkC,KAG5CzE,EAAOqoC,YACProC,EAAO4nC,WAGXsB,EAAmBE,EAGrB,OAAOppC,EAEP,SAASgpC,EAAYx8B,GACnB,GAAIA,EAAI,CACN,IAAI68B,EAAW78B,EAAGlP,kBACdgsC,EAAQD,EAASj9B,GAAMI,EAAGJ,GAC9B,MAAO,CACL68B,EAAGK,EACHj/B,EAAGi/B,EAAQD,EAASh9B,GACpB5H,EAAG+H,EAAG01B,kBAEV,CACF,CAEA,SAAS9sB,EAAUm0B,EAAUC,GAC3B,OAAOD,EAASl/B,GAAKm/B,GAAYD,EAASN,GAAKO,EAAWlB,CAC5D,CACF,EAEApC,EAAqBlqC,UAAUwsC,qBAAuB,SAAUiB,GAC9D,IAAK9vC,KAAKytC,gBACR,OAAO,EAGT,IAAIx2B,EAEA84B,EADAvK,EAAexlC,KAAK0kC,kBAiBxB,OAfAc,EAAa6C,WAAU,SAAUC,EAAO9mB,GACtC,IAAIwuB,EAAgB1H,EAAMC,kBAMN,MAAhBwH,GAAyC,MAAjBC,IAC1BD,EAAevuB,GAGbwuB,IAAkBF,IACpB74B,EAAQuK,EAEZ,IACgB,MAATvK,EAAgBA,EAAQ84B,CACjC,EAEAxD,EAAqB3rC,KAAO,gBACrB2rC,CACT,CAxYA,CAwYElI,IAEF,MCzZe,SAAS4L,GAA8BhqC,GAOpDA,EAAU+lB,eAAe,eAAgB,gBAAgB,SAAUzf,EAAShK,GAC1E,IAAI4oC,EAAkB5+B,EAAQ4+B,gBACX,MAAnBA,GAA2B5oC,EAAQqoC,cAAc,CAC/C91B,SAAU,SACVo7B,QAAS,SACTC,MAAO5jC,IACN,SAAUq4B,GACXA,EAAYsG,mBAAmBC,EACjC,GACF,GACF,CCZO,SAASnlC,GAAQC,IACtB+5B,EAAAA,GAAAA,GAAIoQ,IACJnqC,EAAUC,uBAAuB+kC,IACjChlC,EAAUE,sBAAsBomC,IAChC0D,GAA8BhqC,EAChC,CCPO,SAASD,GAAQC,IACtB+5B,EAAAA,GAAAA,GAAIoQ,KACJpQ,EAAAA,GAAAA,GAAIqQ,GACN,CCLe,SAASC,GAAe/tC,GACrC,IAAI8nC,EAAe9nC,EAAQ+nC,eAAe,CACxCx1B,SAAU,WAGPu1B,GAAiBA,EAAat/B,QAInCxI,EAAQguC,iBAAiB,SAAS,SAAUC,GAC1C,IAAIC,EAAiBD,EAAYE,oBAC7BC,EAAQH,EAAYI,WACpB5qB,EAAO2qB,EAAM3qB,KACb6qB,EAAgBJ,EAAeK,SAASL,EAAeM,SAC3D/qB,EAAKgrB,YAAW,SAAUxvB,GACxB,IAAIja,EAAQye,EAAKuS,aAAa/W,GAC1ByvB,EAAW1pC,EAAM0W,WAAW,YAEhC,GAAgB,MAAZgzB,EAAkB,EAChBz6B,EAAAA,EAAAA,UAASy6B,KACXA,EAAWJ,EAAcI,IAI3B,IAAK,IAAInmC,EAAI,EAAGA,EAAIu/B,EAAat/B,OAAQD,IACvC,IAAKu/B,EAAav/B,GAAGs2B,WAAW6P,GAC9B,OAAO,CAGb,CAEA,OAAO,CACT,GACF,GACF,CClCe,SAASC,GAAe3uC,GACrC,IAAI4uC,EAAe,CAAC,EACpB5uC,EAAQguC,iBAAiB,SAAS,SAAUpmC,GAC1C,IAAIsmC,EAAiBtmC,EAAYumC,oBAC7B1qB,EAAO7b,EAAYQ,UACnBymC,EAAqB,CAAC,EAC1BX,EAAexpC,MAAK,SAAUua,GAC5B,IAAIrW,EAAOslC,EAAeM,QAAQvvB,GAElC4vB,EAAmB,MAAQjmC,GAAQqW,EACnC,IAAI6vB,EAAYZ,EAAelY,aAAa/W,GACxCpe,EAAQiuC,EAAUxuC,SAAS,aAAa6C,eAEvCtC,EAAME,OAETF,EAAME,KAAO6G,EAAYmnC,oBAAoBnmC,EAAMgmC,IAGrDV,EAAec,cAAc/vB,EAAK,QAASpe,GAG3C,IAFA,IAAIouC,EAAmB,CAAC,SAAU,aAAc,oBAEvC1mC,EAAI,EAAGA,EAAI0mC,EAAiBzmC,OAAQD,IAAK,CAChD,IAAI2mC,EAAeJ,EAAUpzB,WAAWuzB,EAAiB1mC,IAAI,GAEzC,MAAhB2mC,GACFhB,EAAec,cAAc/vB,EAAKgwB,EAAiB1mC,GAAI2mC,EAE3D,CACF,IAEIhB,EAAe7lC,SACjBob,EAAK/e,MAAK,SAAUua,GAClB,IAAIja,EAAQye,EAAKuS,aAAa/W,GAC1BkwB,EAAcnqC,EAAM0W,WAAW,YAEnC,GAAmB,MAAfyzB,EAAqB,EACnBn7B,EAAAA,EAAAA,UAASm7B,KACXA,EAAcN,EAAmB,MAAQM,IAG3C,IAAIC,EAAgBlB,EAAe9J,cAAc+K,EAAa,SAC1DtuC,EAAQ4iB,EAAK4rB,uBAAuBpwB,EAAK,UAC7C/L,EAAAA,EAAAA,QAAOrS,EAAOuuC,GAGd,IAFA,IAAIE,EAAa,CAAC,SAAU,aAAc,oBAEjC/mC,EAAI,EAAGA,EAAI+mC,EAAW9mC,OAAQD,IACrCkb,EAAKurB,cAAc/vB,EAAKqwB,EAAW/mC,GAAI2lC,EAAe9J,cAAc+K,EAAaG,EAAW/mC,IAEhG,CACF,GAEJ,GACF,CCnDA,SAASgnC,GAAUC,GAKjB,OAJMA,aAAaC,QACjBD,EAAI,CAACA,EAAGA,IAGHA,CACT,CAEe,SAASE,GAAgB1vC,GACtCA,EAAQguC,iBAAiB,SAAS,SAAUpmC,GAC1C,IAAIwmC,EAAQxmC,EAAYymC,WACpBsB,EAAW/nC,EAAYgoC,cACvBC,EAAaN,GAAU3nC,EAAYxH,IAAI,eACvC0vC,EAAaP,GAAU3nC,EAAYxH,IAAI,mBAG3CuvC,EAASI,UAAU,aAAcF,GAAcA,EAAW,IAC1DF,EAASI,UAAU,WAAYF,GAAcA,EAAW,IACxDF,EAASI,UAAU,iBAAkBD,GAAcA,EAAW,IAC9DH,EAASI,UAAU,eAAgBD,GAAcA,EAAW,IAC5DH,EAASI,UAAU,QAASnoC,EAAYtH,SAAS,aAAa8S,gBAC9Du8B,EAASjrC,MAAK,SAAUua,GACtB,IAAI6vB,EAAYa,EAAS3Z,aAAa/W,GAClC+wB,EAAO5B,EAAM6B,eAAehxB,GAC5B4wB,EAAaN,GAAUT,EAAUpzB,WAAW,UAAU,IACtDo0B,EAAaP,GAAUT,EAAUpzB,WAAW,cAAc,IAE1D7a,EAAQiuC,EAAUxuC,SAAS,aAAa8S,eACxC88B,EAAcP,EAASN,uBAAuBpwB,EAAK,SAGvD,QAFA/L,EAAAA,EAAAA,QAAOg9B,EAAarvC,GAEZqvC,EAAYr7B,QAClB,IAAK,SAED,IAAIs7B,EAAYH,EAAKI,MAAM1M,UAAU,SACrCwM,EAAYr7B,OAASs7B,GAAaA,EAAUpvC,KAC5C,MAGJ,IAAK,SAEGovC,EAAYH,EAAKK,MAAM3M,UAAU,SACrCwM,EAAYr7B,OAASs7B,GAAaA,EAAUpvC,KAC5C,MAIN8uC,EAAW,IAAMG,EAAKD,UAAU,aAAcF,EAAW,IACzDA,EAAW,IAAMG,EAAKD,UAAU,WAAYF,EAAW,IACvDC,EAAW,IAAME,EAAKD,UAAU,iBAAkBD,EAAW,IAC7DA,EAAW,IAAME,EAAKD,UAAU,eAAgBD,EAAW,GAC7D,GACF,GACF,CCrDA,IAAIQ,GAAgB,SAOhBC,GAAyB,SAAU3oC,GACrC,OAAOA,EAAYxH,IAAI,kBAAoB,IAC7C,EASIowC,GAAkB,SAAU5oC,EAAa6oC,GAC3C,IAAIC,EAAsBH,GAAuB3oC,GAC7CY,EAAS,GACTmoC,EAAgB,GAEpB,GAAIjwC,EAAAA,SAAgBgwC,GAClBloC,EAASkoC,OACJ,GAAIhwC,EAAAA,QAAegwC,GAExB,YADA9oC,EAAYgpC,gBAAkBF,GAK5BD,EAAejoC,IACjBA,EAASioC,GAIX,IAAIzlB,EAAMxiB,EAAS,EAAIA,EAAS,EAAIA,EAAS,EAC7CmoC,EAAgB,GAEhB,IAAK,IAAIpoC,EAAI,EAAGA,EAAIyiB,EAAKziB,IACvBooC,EAAczoC,MAAMK,EAAI,EAAIA,EAAI,EAAIA,GAAK,IAAMA,EAAI,GAAK,EAAI,IAG9DX,EAAYgpC,gBAAkBD,CAChC,EAUIE,GAAgB,SAAUC,EAAIC,EAAInpC,GACpC,IAAIopC,EAAS,CAACF,EAAGnoC,GAAImoC,EAAGj1B,WAAWiR,KAAK,KACpCjuB,EAAS,CAACkyC,EAAGpoC,GAAIooC,EAAGl1B,WAAWiR,KAAK,KACxC,MAAO,CAACllB,EAAYqtB,IAAK+b,EAAQnyC,GAAQiuB,KAAKwjB,GAChD,EAQIW,GAAiB,SAAUzqC,GAC7B,IAAIu2B,EAAOv2B,EAAI0qC,MAAMZ,IACrB,MAAO,CAACvT,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAAIjQ,KAAKwjB,GAC1C,EAQIa,GAAiB,SAAUnB,EAAMpoC,GACnC,IAAIpB,EAAMqqC,GAAcb,EAAKI,MAAOJ,EAAKK,MAAOzoC,GAChD,OAAOA,EAAYwpC,UAAU5qC,EAC/B,EASI6qC,GAA6B,SAAUrB,EAAMpoC,GAC/C,IAAIojB,EAAMsmB,GAAwBT,GAAcb,EAAKI,MAAOJ,EAAKK,MAAOzoC,GAAcA,GAClF2pC,EAAOD,GAAwBT,GAAcb,EAAKK,MAAOL,EAAKI,MAAOxoC,GAAcA,GACvF,OAAOojB,EAAMumB,CACf,EAOID,GAA0B,SAAU9qC,EAAKoB,GAC3C,IAAI4pC,EAAU5pC,EAAYwpC,UAC1B,OAAOI,EAAQhrC,GAAOgrC,EAAQhrC,GAAKgC,OAAS,CAC9C,EAQO,SAASipC,GAAkB7pC,GAC3B2oC,GAAuB3oC,KAI5BA,EAAYgpC,gBAAkB,GAC9BhpC,EAAYwpC,UAAY,CAAC,EAEzBZ,GAAgB5oC,GAClB,CASO,SAAS8pC,GAA0BZ,EAAIC,EAAInpC,EAAa8M,GAC7D,GAAK67B,GAAuB3oC,GAA5B,CAIA,IAAIpB,EAAMqqC,GAAcC,EAAIC,EAAInpC,GAC5B4pC,EAAU5pC,EAAYwpC,UACtBO,EAAgBH,EAAQP,GAAezqC,IAEvCgrC,EAAQhrC,KAASmrC,EACnBH,EAAQhrC,GAAKorC,WAAY,EAChBD,GAAiBH,EAAQhrC,KAClCmrC,EAAcC,WAAY,EAC1BJ,EAAQhrC,GAAKorC,WAAY,GAG3BJ,EAAQhrC,GAAOgrC,EAAQhrC,IAAQ,GAC/BgrC,EAAQhrC,GAAK0B,KAAKwM,EAdlB,CAeF,CAQO,SAASm9B,GAAoB7B,EAAMpoC,EAAa8M,EAAOo9B,GAC5D,IAAIC,EAAsBxB,GAAuB3oC,GAC7CoqC,EAAetxC,EAAAA,QAAeqxC,GAElC,IAAKA,EACH,OAAO,KAGT,IAAIE,EAAYd,GAAenB,EAAMpoC,GAErC,IAAKqqC,EACH,OAAO,KAKT,IAFA,IAAIC,GAAa,EAER3pC,EAAI,EAAGA,EAAI0pC,EAAUzpC,OAAQD,IACpC,GAAI0pC,EAAU1pC,KAAOmM,EAAO,CAC1Bw9B,EAAY3pC,EACZ,KACF,CAIF,IAAI4pC,EAAWd,GAA2BrB,EAAMpoC,GAChD4oC,GAAgB5oC,EAAauqC,GAC7BnC,EAAKxoC,UAAYwoC,EAAKxoC,WAAa,CAAC,EAEpC,IAAI4qC,EAASvB,GAAcb,EAAKI,MAAOJ,EAAKK,MAAOzoC,GAC/C+oC,EAAgB/oC,EAAYgpC,gBAE5ByB,EAAmBL,GAAmBG,EAAW,EAAf,EAAuB,EAE7D,GAAKF,EAAUL,UAqBb,OAAOjB,EAAc0B,EAAmBH,GAnBxC,IAAII,EAAcrB,GAAemB,GAC7BpnB,EAAMsmB,GAAwBgB,EAAa1qC,GAC3C2qC,EAAW5B,EAAcuB,EAAYlnB,EAAMqnB,GAE/C,OAAIP,EAEEE,EACED,GAAkD,IAA3BA,EAAoB,IACrC/mB,EAAMqnB,GAAoB,EAAIE,GAAYA,IAEzCvnB,EAAM,EAAI,EAAI,GAAKqnB,GAAoB,EAAIE,GAAYA,GAG1DvnB,EAAMqnB,GAAoB,EAAIE,GAAYA,EAG7C5B,EAAcuB,EAAYlnB,EAAMqnB,EAK7C,CClNO,SAASG,GAAa5qC,GAC3B,IAAIhD,EAAWgD,EAAYC,iBAE3B,IAAIjD,GAA8B,SAAlBA,EAASvG,KAAzB,CAIA,IAAI+vC,EAAQxmC,EAAYymC,WACxBD,EAAMqE,UAAS,SAAUC,GACvB,IAAI1tC,EAAQ0tC,EAAKpyC,WACjBoyC,EAAKC,UAAU,EAAE3tC,EAAM5E,IAAI,MAAO4E,EAAM5E,IAAI,MAC9C,IACAwyC,GAAiBxE,EAAOxmC,EAPxB,CAQF,CACO,SAASgrC,GAAiBxE,EAAOxmC,GACtCwmC,EAAMyE,UAAS,SAAU7C,EAAMt7B,GAC7B,IAAIo+B,EAAYpyC,EAAAA,UAAiBsvC,EAAK1vC,WAAWF,IAAI,CAAC,YAAa,eAAgByxC,GAAoB7B,EAAMpoC,EAAa8M,GAAO,GAAO,GACpI2J,EAAK00B,GAAAA,MAAW/C,EAAKI,MAAM4C,aAC3B10B,EAAKy0B,GAAAA,MAAW/C,EAAKK,MAAM2C,aAC3BC,EAAS,CAAC50B,EAAIC,IAEbw0B,GACHG,EAAO/qC,KAAK,EAAEmW,EAAG,GAAKC,EAAG,IAAM,GAAKD,EAAG,GAAKC,EAAG,IAAMw0B,GAAYz0B,EAAG,GAAKC,EAAG,IAAM,GAAKA,EAAG,GAAKD,EAAG,IAAMy0B,IAG1G9C,EAAK2C,UAAUM,EACjB,GACF,CC5Be,SAASC,GAAkBlzC,EAASC,GACjDD,EAAQguC,iBAAiB,SAAS,SAAUpmC,GAC1C,IAAI4W,EAAS5W,EAAYxH,IAAI,UACzBwE,EAAWgD,EAAYC,iBAE3B,GAAIjD,GAA8B,SAAlBA,EAASvG,KAAiB,CACxC,IAAI80C,EAASvrC,EAAYQ,UACrBgrC,EAAe,IACnB1uC,EAAAA,EAAAA,MAAKE,EAAS8f,YAAY,SAAU2uB,GAClCD,EAAeA,EAAa3T,OAAO0T,EAAO7rB,iBAAiB+rB,GAC7D,IAEA,IAAK,IAAIx3B,EAAY,EAAGA,EAAYs3B,EAAO9qC,QAASwT,IAAa,CAI/D,IAHA,IAAIvS,EAAQ,GACRgqC,GAAW,EAEN/qC,EAAI,EAAGA,EAAI6qC,EAAa5qC,OAAQD,IAAK,CAC5C,IAAIod,EAAMwtB,EAAO/yC,IAAIgzC,EAAa7qC,GAAIsT,GAEjCsN,MAAMxD,KACT2tB,GAAW,GAGbhqC,EAAMpB,KAAKyd,EACb,CAEI2tB,EACFH,EAAOI,cAAc13B,EAAWjX,EAASif,YAAYva,IAGrD6pC,EAAOI,cAAc13B,EAAW,CAAC23B,IAAKA,KAE1C,CAEAZ,GAAiBO,EAAO/E,MAAOxmC,EACjC,MAAY4W,GAAqB,SAAXA,GACpBg0B,GAAa5qC,EAEjB,GACF,CCzCO,SAAS6rC,GAAmB7rC,GACjC,IAAIhD,EAAWgD,EAAYC,iBAE3B,GAAsB,SAAlBjD,EAASvG,KACX,OAAO,EAGT,IAAIq1C,EAAiB9rC,EAAYwB,OAAOsqC,eACpCC,EAAY/uC,EAASgK,OAErBglC,EAAWhvC,EAASivC,UACpBC,GAAaF,EAAW,GAAKF,EAAiB,EAClD,OAAOI,EAAYH,CACrB,CACO,SAASI,GAAcrB,GAC5B,IAAI5C,EAAa4C,EAAKhP,UAAU,cAMhC,OAJIoM,aAAsBL,QACxBK,GAAcA,EAAW,GAAKA,EAAW,IAAM,IAGzCA,CACV,CClBA,IAAI9+B,GAAK5D,KAAK4D,GACVgjC,GAAqB,GAqBlB,SAASC,GAAersC,EAAassC,EAASC,EAAc5mC,GACjE,IAAI3I,EAAWgD,EAAYC,iBAE3B,IAAIjD,GAA8B,SAAlBA,EAASvG,KAAzB,CAIA,IAAI+E,EAAOwB,EAASxD,kBAChBgzC,EAAWxsC,EAAYQ,UACvBgmC,EAAQgG,EAAShG,MACjB1Y,EAAKtyB,EAAKZ,MAAQ,EAAIY,EAAKP,EAC3B8yB,EAAKvyB,EAAK5B,OAAS,EAAI4B,EAAK7B,EAC5B+B,EAAI8J,KAAK0P,IAAI1Z,EAAKZ,MAAOY,EAAK5B,QAAU,EACxC6G,EAAQ+rC,EAAS/rC,QAMrB,GALA+rC,EAASzB,UAAU,CACjBjd,GAAIA,EACJC,GAAIA,IAGDttB,EAAL,CAIA,GAAI8rC,EAAc,CAChB,IAAIE,EAAKzvC,EAASghB,YAAYrY,GAC1B+mC,EAAQD,EAAG,GACXE,EAAQF,EAAG,GAEXG,EAAI,CAACF,EAAQ5e,EAAI6e,EAAQ5e,GAC7Bod,GAAAA,UAAeyB,EAAGA,GAClBzB,GAAAA,MAAWyB,EAAGA,EAAGlxC,GACjB6wC,EAAaxB,UAAU,CAACjd,EAAK8e,EAAE,GAAI7e,EAAK6e,EAAE,KAAK,GAC/C,IAAIC,EAAsB7sC,EAAYxH,IAAI,CAAC,WAAY,gBACvDs0C,GAAgBP,EAAcM,EAAqB/e,EAAIC,EACzD,CAEAgf,GAAoBT,GAAStsC,EAAawmC,EAAOgG,EAAU9wC,EAAGoyB,EAAIC,EAAIttB,GAEtE+lC,EAAMyE,UAAS,SAAU7C,EAAMt7B,GAC7B,IAGIkgC,EAHA9B,EAAYpyC,EAAAA,UAAiBsvC,EAAK1vC,WAAWF,IAAI,CAAC,YAAa,cAAeyxC,GAAoB7B,EAAMpoC,EAAa8M,GAAQ,GAC7H2J,EAAK00B,GAAAA,MAAW/C,EAAKI,MAAM4C,aAC3B10B,EAAKy0B,GAAAA,MAAW/C,EAAKK,MAAM2C,aAE3B6B,GAAOx2B,EAAG,GAAKC,EAAG,IAAM,EACxBw2B,GAAOz2B,EAAG,GAAKC,EAAG,IAAM,GAEvBw0B,IACHA,GAAa,EACb8B,EAAM,CAAClf,EAAKod,EAAY+B,GAAO,EAAI/B,GAAYnd,EAAKmd,EAAYgC,GAAO,EAAIhC,KAG7E9C,EAAK2C,UAAU,CAACt0B,EAAIC,EAAIs2B,GAC1B,GA/BA,CAhBA,CAgDF,CACA,IAAID,GAAsB,CACxBrrC,MAAO,SAAU1B,EAAawmC,EAAOgG,EAAU9wC,EAAGoyB,EAAIC,EAAIttB,GACxD,IAAI0sC,EAAQ,EACRC,EAAMZ,EAASa,OAAO,SACtBC,EAAsB,EAAV9nC,KAAK4D,IAAUgkC,GAAO3sC,GACtC+lC,EAAMqE,UAAS,SAAUC,GACvB,IAAIppC,EAAQopC,EAAKyC,SAAS,SACtBC,EAAaF,GAAaF,EAAM1rC,EAAQ,GAAK,EACjDyrC,GAASK,EACT1C,EAAKC,UAAU,CAACrvC,EAAI8J,KAAK2H,IAAIggC,GAASrf,EAAIpyB,EAAI8J,KAAK4H,IAAI+/B,GAASpf,IAChEof,GAASK,CACX,GACF,EACAtF,WAAY,SAAUloC,EAAawmC,EAAOgG,EAAU9wC,EAAGoyB,EAAIC,EAAIttB,GAC7D,IAAIgtC,EAAY,EAChBrB,GAAmBxrC,OAASH,EAC5B,IAAIyrC,EAAYL,GAAmB7rC,GACnCwmC,EAAMqE,UAAS,SAAUC,GACvB,IAAI5C,EAAaiE,GAAcrB,GAG/BvpB,MAAM2mB,KAAgBA,EAAa,GACnCA,EAAa,IAAMA,EAAa,GAChCA,GAAcgE,EACd,IAAIwB,EAAmBloC,KAAKmoC,KAAKzF,EAAa,EAAIxsC,GAElD6lB,MAAMmsB,KAAsBA,EAAmBtkC,GAAK,GACpDgjC,GAAmBtB,EAAK72B,WAAay5B,EACrCD,GAAgC,EAAnBC,CACf,IACA,IAAIE,GAAoB,EAAIxkC,GAAKqkC,GAAahtC,EAAQ,EAClD0sC,EAAQ,EACZ3G,EAAMqE,UAAS,SAAUC,GACvB,IAAI0C,EAAaI,EAAmBxB,GAAmBtB,EAAK72B,WAC5Dk5B,GAASK,IAIP1C,EAAKM,cAAgBN,EAAKM,YAAYyC,QAAU/C,EAAKC,UAAU,CAACrvC,EAAI8J,KAAK2H,IAAIggC,GAASrf,EAAIpyB,EAAI8J,KAAK4H,IAAI+/B,GAASpf,IAClHof,GAASK,CACX,GACF,GAEK,SAASV,GAAgBhC,EAAM+B,EAAqB/e,EAAIC,GAC7D,IAAIrlB,EAAKoiC,EAAKgD,eAEd,GAAKplC,EAAL,CAIA,IAAIqlC,EAAYjD,EAAKpyC,WACjBua,EAAc86B,EAAUv1C,IAAI,CAAC,QAAS,YAAc,EACpDw1C,EAAatlC,EAAGulC,gBAEpB,GAAIpB,EAAqB,CACvB,IAAIn+B,EAAMo8B,EAAKM,YACX8C,EAAM1oC,KAAK2oC,MAAMz/B,EAAI,GAAKqf,EAAIrf,EAAI,GAAKof,GAEvCogB,EAAM,IACRA,EAAgB,EAAV1oC,KAAK4D,GAAS8kC,GAGtB,IAAIE,EAAS1/B,EAAI,GAAKof,EAElBsgB,IACFF,GAAY1oC,KAAK4D,IAGnB,IAAIyG,EAAeu+B,EAAS,OAAS,QACrCJ,EAAWK,cAAc,CACvBplC,UAAWilC,EACXrkC,SAAUgG,EACVy+B,OAAQ,WAEV,IAAI1O,EAAgBoO,EAAWO,YAAY,YAC3Cz1C,EAAAA,OAAc8mC,EAAc4O,aAAe5O,EAAc4O,WAAa,CAAC,GAAI,CACzE3kC,SAAUgG,GAEd,MACEm+B,EAAWK,cAAc,CACvBplC,SAAUgK,GAAezN,KAAK4D,GAAK,KAhCvC,CAmCF,CClKe,SAASqlC,GAAoBr2C,GAC1CA,EAAQguC,iBAAiB,SAAS,SAAUpmC,GACR,aAA9BA,EAAYxH,IAAI,WAClB6zC,GAAersC,EAAa,aAEhC,GACF,CCIA,IAAI0uC,GAAcvD,GAAAA,YAIX,SAASwD,GAAYC,EAASC,EAASC,GAmB5C,IAlBA,IAAIC,EAAQH,EACRI,EAAQH,EACRrzC,EAAOszC,EAAKtzC,KACZZ,EAAQY,EAAKZ,MACbhB,EAAS4B,EAAK5B,OACdq1C,EAAS,CAACzzC,EAAKP,EAAIL,EAAQ,EAAGY,EAAK7B,EAAIC,EAAS,GAEhDs1C,EAA0B,MAAhBJ,EAAKI,QAAkB,GAAMJ,EAAKI,QAWvCvuC,EAAI,EAAGA,EAAIouC,EAAMnuC,OAAQD,IAAK,CACrC,IAAIwuC,EAAIJ,EAAMpuC,GAETwuC,EAAEC,IACLD,EAAEC,EAAIjE,GAAAA,OAAYvwC,GAAS4K,KAAKyrB,SAAW,IAAOge,EAAO,GAAIr1C,GAAU4L,KAAKyrB,SAAW,IAAOge,EAAO,KAGvGE,EAAEE,GAAKlE,GAAAA,MAAWgE,EAAEC,GACpBD,EAAEH,MAAQ,IACZ,CAKA,IAEIM,EACAC,EAHAC,EAAmC,MAAjBV,EAAKW,SAAmB,GAAMX,EAAKW,SACrDA,EAAWD,EAGf,MAAO,CACLE,OAAQ,WACND,EAA6B,GAAlBD,CACb,EACAG,SAAU,SAAUt4B,GAClB03B,EAAM13B,GAAKw2B,OAAQ,CACrB,EACA+B,WAAY,SAAUv4B,GACpB03B,EAAM13B,GAAKw2B,OAAQ,CACrB,EAKAgC,WAAY,SAAUv1B,GACpBg1B,EAAqBh1B,CACvB,EAKAw1B,UAAW,SAAUx1B,GACnBi1B,EAAoBj1B,CACtB,EAQAy1B,KAAM,SAAUz1B,GACdg1B,GAAsBA,EAAmBP,EAAOC,GAIhD,IAHA,IAAIgB,EAAM,GACNC,EAAOlB,EAAMnuC,OAERD,EAAI,EAAGA,EAAIquC,EAAMpuC,OAAQD,IAAK,CACrC,IAAI4F,EAAIyoC,EAAMruC,GAEd,IAAI4F,EAAE2pC,kBAAN,CAIA,IAAIhH,EAAK3iC,EAAE2iC,GACPC,EAAK5iC,EAAE4iC,GACXgC,GAAAA,IAAS6E,EAAK7G,EAAGiG,EAAGlG,EAAGkG,GACvB,IAAIe,EAAIhF,GAAAA,IAAS6E,GAAOzpC,EAAE4pC,EACtBC,EAAIjH,EAAGiH,GAAKlH,EAAGkH,EAAIjH,EAAGiH,GAEtB7uB,MAAM6uB,KACRA,EAAI,GAGNjF,GAAAA,UAAe6E,EAAKA,IACnB9G,EAAG2E,OAASa,GAAYxF,EAAGkG,EAAGlG,EAAGkG,EAAGY,EAAKI,EAAID,EAAIV,IACjDtG,EAAG0E,OAASa,GAAYvF,EAAGiG,EAAGjG,EAAGiG,EAAGY,IAAO,EAAII,GAAKD,EAAIV,EAdzD,CAeF,CAGA,IAAS9uC,EAAI,EAAGA,EAAIsvC,EAAMtvC,IAAK,CAC7B,IAAIwuC,EAAIJ,EAAMpuC,GAETwuC,EAAEtB,QACL1C,GAAAA,IAAS6E,EAAKf,EAAQE,EAAEC,GAIxBV,GAAYS,EAAEC,EAAGD,EAAEC,EAAGY,EAAKd,EAAUO,GAEzC,CAIA,IAAS9uC,EAAI,EAAGA,EAAIsvC,EAAMtvC,IACxB,CAAIuoC,EAAK6F,EAAMpuC,GAEf,IAFA,IAESwzB,EAAIxzB,EAAI,EAAGwzB,EAAI8b,EAAM9b,IAAK,CAC7BgV,EAAK4F,EAAM5a,GACfgX,GAAAA,IAAS6E,EAAK7G,EAAGiG,EAAGlG,EAAGkG,GACnBe,EAAIhF,GAAAA,IAAS6E,GAEP,IAANG,IAEFhF,GAAAA,IAAS6E,EAAKxqC,KAAKyrB,SAAW,GAAKzrB,KAAKyrB,SAAW,IACnDkf,EAAI,GAGN,IAAIE,GAAWnH,EAAGoH,IAAMnH,EAAGmH,KAAOH,EAAIA,GACrCjH,EAAG2E,OAASa,GAAYxF,EAAGmG,GAAInG,EAAGmG,GAAIW,EAAKK,IAC3ClH,EAAG0E,OAASa,GAAYvF,EAAGkG,GAAIlG,EAAGkG,GAAIW,GAAMK,EAC/C,CAhBiB,CAmBnB,IAAIzD,EAAI,GAER,IAASjsC,EAAI,EAAGA,EAAIsvC,EAAMtvC,IAAK,CACzBwuC,EAAIJ,EAAMpuC,GAETwuC,EAAEtB,QACL1C,GAAAA,IAASyB,EAAGuC,EAAEC,EAAGD,EAAEE,IACnBX,GAAYS,EAAEC,EAAGD,EAAEC,EAAGxC,EAAG6C,GACzBtE,GAAAA,KAAUgE,EAAEE,GAAIF,EAAEC,GAEtB,CAEAK,GAAsB,KACtB,IAAIc,EAAWd,EAAW,IAC1BF,GAAqBA,EAAkBR,EAAOC,EAAOuB,GACrDj2B,GAAMA,EAAGi2B,EACX,EAEJ,CC5Je,SAASC,GAAiBp4C,GACvCA,EAAQguC,iBAAiB,SAAS,SAAUC,GAC1C,IAAIrpC,EAAWqpC,EAAYpmC,iBAE3B,IAAIjD,GAA8B,SAAlBA,EAASvG,KAIzB,GAAkC,UAA9B4vC,EAAY7tC,IAAI,UAAuB,CACzC,IAAIi4C,EAAoBpK,EAAYqK,iBAAmB,CAAC,EACpDC,EAAUtK,EAAYI,WACtBmK,EAAaD,EAAQ90B,KACrBksB,EAAW4I,EAAQ5I,SACnB8I,EAAaxK,EAAY3tC,SAAS,SAClCo4C,EAAaD,EAAWr4C,IAAI,cAE5B6tC,EAAYqK,gBACdE,EAAW9zC,MAAK,SAAUua,GACxB,IAAItW,EAAK6vC,EAAWG,MAAM15B,GAC1Bu5B,EAAWjF,cAAct0B,EAAKo5B,EAAkB1vC,IAAO,CAAC6qC,IAAKA,KAC/D,IACUkF,GAA6B,SAAfA,EAEA,aAAfA,GACTzE,GAAehG,EAAa,SAF5BuE,GAAavE,GAKf,IAAI2K,EAAmBJ,EAAWK,cAAc,SAC5CC,EAAmBnJ,EAASkJ,cAAc,SAE1CE,EAAYN,EAAWr4C,IAAI,aAC3B44C,EAAaP,EAAWr4C,IAAI,cAC5B64C,EAAiBv4C,EAAAA,QAAeq4C,GAAaA,EAAY,CAACA,EAAWA,GACrEG,EAAkBx4C,EAAAA,QAAes4C,GAAcA,EAAa,CAACA,EAAYA,GAE7EE,EAAkB,CAACA,EAAgB,GAAIA,EAAgB,IACvD,IAAIC,EAAUX,EAAWjK,SAAS,SAAS,SAAUjlC,EAAO2V,GAC1D,IAAIxK,EAAQ+jC,EAAWY,cAAcn6B,GACjCi5B,GAAMmB,EAAAA,EAAAA,IAAU/vC,EAAOsvC,EAAkBK,GAM7C,OAJI9vB,MAAM+uB,KACRA,GAAOe,EAAe,GAAKA,EAAe,IAAM,GAG3C,CACLjB,EAAGE,EACHA,IAAKA,EACLzC,MAAO+C,EAAWxiB,aAAa/W,GAAK7e,IAAI,SACxC42C,GAAIviC,GAAS0U,MAAM1U,EAAM,KAAO0U,MAAM1U,EAAM,IAAM,KAAOA,EAE7D,IACImiC,EAAQjH,EAASpB,SAAS,SAAS,SAAUjlC,EAAO2V,GACtD,IAAI+wB,EAAOuI,EAAQtI,eAAehxB,GAC9B84B,GAAIsB,EAAAA,EAAAA,IAAU/vC,EAAOwvC,EAAkBI,GAEvC/vB,MAAM4uB,KACRA,GAAKmB,EAAgB,GAAKA,EAAgB,IAAM,GAGlD,IAAII,EAAYtJ,EAAK1vC,WACjBwyC,EAAYpyC,EAAAA,UAAiBsvC,EAAK1vC,WAAWF,IAAI,CAAC,YAAa,eAAgByxC,GAAoB7B,EAAM/B,EAAahvB,GAAK,GAAO,GACtI,MAAO,CACL6xB,GAAIqI,EAAQnJ,EAAKI,MAAMv0B,WACvBk1B,GAAIoI,EAAQnJ,EAAKK,MAAMx0B,WACvBk8B,EAAGA,EACHjF,UAAWA,EACXgF,kBAAmBwB,EAAUl5C,IAAI,qBAErC,IAEIgD,EAAOwB,EAASxD,kBAChBm4C,EAAgBhD,GAAY4C,EAASvC,EAAO,CAC9CxzC,KAAMA,EACN0zC,QAAS2B,EAAWr4C,IAAI,WACxBi3C,SAAUoB,EAAWr4C,IAAI,cAE3Bm5C,EAAc9B,YAAW,SAAUd,EAAOC,GACxC,IAAK,IAAIruC,EAAI,EAAGixC,EAAI7C,EAAMnuC,OAAQD,EAAIixC,EAAGjxC,IACnCouC,EAAMpuC,GAAGktC,OAEX1C,GAAAA,KAAU4D,EAAMpuC,GAAGyuC,EAAGuB,EAAQkB,eAAelxC,GAAGyqC,YAGtD,IACAuG,EAAc7B,WAAU,SAAUf,EAAOC,EAAO8C,GAC9C,IAAK,IAAInxC,EAAI,EAAGixC,EAAI7C,EAAMnuC,OAAQD,EAAIixC,EAAGjxC,IAClCouC,EAAMpuC,GAAGktC,OACZ8C,EAAQkB,eAAelxC,GAAGoqC,UAAUgE,EAAMpuC,GAAGyuC,GAG/CqB,EAAkBG,EAAWG,MAAMpwC,IAAMouC,EAAMpuC,GAAGyuC,EAGpD,IAASzuC,EAAI,EAAGixC,EAAI5C,EAAMpuC,OAAQD,EAAIixC,EAAGjxC,IAAK,CAC5C,IAAI4F,EAAIyoC,EAAMruC,GACVynC,EAAOuI,EAAQtI,eAAe1nC,GAC9B8V,EAAKlQ,EAAE2iC,GAAGkG,EACV14B,EAAKnQ,EAAE4iC,GAAGiG,EACV/D,EAASjD,EAAKgD,YAClBC,EAASA,EAASA,EAAOvpC,QAAU,GACnCupC,EAAO,GAAKA,EAAO,IAAM,GACzBA,EAAO,GAAKA,EAAO,IAAM,GACzBF,GAAAA,KAAUE,EAAO,GAAI50B,GACrB00B,GAAAA,KAAUE,EAAO,GAAI30B,IAEhBnQ,EAAE2kC,YACLG,EAAO,GAAK,EAAE50B,EAAG,GAAKC,EAAG,IAAM,GAAKD,EAAG,GAAKC,EAAG,IAAMnQ,EAAE2kC,WAAYz0B,EAAG,GAAKC,EAAG,IAAM,GAAKA,EAAG,GAAKD,EAAG,IAAMlQ,EAAE2kC,YAG9G9C,EAAK2C,UAAUM,EACjB,CACF,IACAhF,EAAYsI,YAAcgD,EAC1BtL,EAAYqK,gBAAkBD,EAE9BkB,EAAc5B,MAChB,MAEE1J,EAAYsI,YAAc,IAE9B,GACF,C,0BCrHItjC,GAAmB0mC,GAAO3gC,eAE1B4gC,GAEJ,SAAU37C,GAGR,SAAS27C,EAAKhxC,GACZ,IAAI1K,EAAQD,EAAOogC,KAAK5gC,OAASA,KAiBjC,OAfAS,EAAMG,KAAO,OACbH,EAAMwmB,WAAa,CAAC,IAAK,KAOzBxmB,EAAM27C,mBAAqB,IAAIC,GAAAA,GAK/B57C,EAAM67C,kBAAoB,IAAID,GAAAA,GAC9B57C,EAAM0K,KAAOA,EACN1K,CACT,CAoNA,OAzOAM,EAAAA,EAAAA,IAAUo7C,EAAM37C,GAuBhB27C,EAAK95C,UAAUk6C,gBAAkB,SAAUn3C,EAAGtB,EAAGiB,EAAOhB,GAEtD,OADA/D,KAAKw8C,MAAQ,IAAIC,GAAAA,EAAar3C,EAAGtB,EAAGiB,EAAOhB,GACpC/D,KAAKw8C,KACd,EAMAL,EAAK95C,UAAUsB,gBAAkB,WAC/B,OAAO3D,KAAKw8C,KACd,EAEAL,EAAK95C,UAAUq6C,YAAc,SAAUt3C,EAAGtB,EAAGiB,EAAOhB,GAClD/D,KAAK28C,aAAav3C,EAAGtB,EAAGiB,EAAOhB,GAE/B/D,KAAK48C,UAAY,IAAIH,GAAAA,EAAar3C,EAAGtB,EAAGiB,EAAOhB,EACjD,EAMAo4C,EAAK95C,UAAUs6C,aAAe,SAAUv3C,EAAGtB,EAAGiB,EAAOhB,GACnD,IAAI4B,EAAO3F,KAAK2D,kBACZk5C,EAAe78C,KAAKs8C,kBACxBO,EAAaznC,UAAYzP,EAAKm3C,mBAAmB,IAAIL,GAAAA,EAAar3C,EAAGtB,EAAGiB,EAAOhB,IAC/E,IAAIg5C,EAAYF,EAAaG,OAC7BH,EAAaG,OAAS,KACtBH,EAAa9iC,qBACb8iC,EAAaG,OAASD,EAEtB/8C,KAAKi9C,kBACP,EAMAd,EAAK95C,UAAU66C,UAAY,SAAUC,EAAa36C,GAC3C26C,IAILn9C,KAAKo9C,QAAU,EAACngB,EAAAA,EAAAA,IAAakgB,EAAY,GAAI36C,EAAI0C,aAAa+3B,EAAAA,EAAAA,IAAakgB,EAAY,GAAI36C,EAAI2C,cAE/FnF,KAAKq9C,uBACP,EAEAlB,EAAK95C,UAAUi7C,QAAU,SAAUC,GACjCA,EAAOA,GAAQ,EACf,IAAIC,EAAYx9C,KAAKw9C,UAEjBA,IACmB,MAAjBA,EAAUl+B,MACZi+B,EAAO5tC,KAAK0P,IAAIm+B,EAAUl+B,IAAKi+B,IAGZ,MAAjBC,EAAUn+B,MACZk+B,EAAO5tC,KAAK2P,IAAIk+B,EAAUn+B,IAAKk+B,KAInCv9C,KAAKy9C,MAAQF,EAEbv9C,KAAKq9C,sBACP,EAMAlB,EAAK95C,UAAUq7C,iBAAmB,WAEhC,IAAIC,EAAU39C,KAAK2D,kBACfs0B,EAAK0lB,EAAQv4C,EAAIu4C,EAAQ54C,MAAQ,EACjCmzB,EAAKylB,EAAQ75C,EAAI65C,EAAQ55C,OAAS,EACtC,MAAO,CAACk0B,EAAIC,EACd,EAEAikB,EAAK95C,UAAUu7C,UAAY,WACzB,OAAO59C,KAAKo9C,SAAWp9C,KAAK09C,kBAC9B,EAEAvB,EAAK95C,UAAU+zC,QAAU,WACvB,OAAOp2C,KAAKy9C,OAAS,CACvB,EAEAtB,EAAK95C,UAAUw7C,iBAAmB,WAChC,OAAO79C,KAAKo8C,mBAAmB5gC,mBACjC,EAMA2gC,EAAK95C,UAAUg7C,qBAAuB,WAEpC,IAAIS,EAAqB99C,KAAKs8C,kBAAkB9gC,oBAE5CuiC,EAAgB/9C,KAAKo8C,mBACrB4B,EAAgBh+C,KAAK09C,mBACrBtE,EAASp5C,KAAK49C,YACdL,EAAOv9C,KAAKo2C,UAChBgD,EAAS8C,GAAO3gC,eAAe,GAAI69B,EAAQ0E,GAC3CE,EAAgB9B,GAAO3gC,eAAe,GAAIyiC,EAAeF,GACzDC,EAAcE,QAAU7E,EAAO,GAC/B2E,EAAcG,QAAU9E,EAAO,GAC/B2E,EAAc34C,EAAI44C,EAAc,GAAK5E,EAAO,GAC5C2E,EAAcj6C,EAAIk6C,EAAc,GAAK5E,EAAO,GAC5C2E,EAAc5sC,OAAS4sC,EAAc3sC,OAASmsC,EAE9Cv9C,KAAKi9C,kBACP,EAOAd,EAAK95C,UAAU46C,iBAAmB,WAChC,IAAIkB,EAAoBn+C,KAAKo8C,mBACzBgC,EAAmBp+C,KAAKs8C,kBAC5B8B,EAAiBpB,OAASmB,EAC1BA,EAAkBlqC,kBAClBmqC,EAAiBnqC,kBACjBkB,EAAOkpC,KAAKr+C,KAAKoV,YAAcpV,KAAKoV,UAAY,IAAKgpC,EAAiBhpC,WAAaD,EAAOoL,UAC1FvgB,KAAKs+C,cAAgBF,EAAiB5iC,oBACtCxb,KAAKu+C,aAAev+C,KAAKu+C,cAAgB,GACzCppC,EAAOqpC,OAAOx+C,KAAKu+C,aAAcv+C,KAAKoV,WACtCpV,KAAK+Z,oBACP,EAEAoiC,EAAK95C,UAAUo8C,iBAAmB,WAChC,IAAIL,EAAmBp+C,KAAKs8C,kBACxB6B,EAAoBn+C,KAAKo8C,mBAIzBsC,EAAqB,IAAIrC,GAAAA,GAG7B,OAFAqC,EAAmBtpC,UAAY+oC,EAAkB/oC,UACjDspC,EAAmB3kC,qBACZ,CACL4kC,KAAM,CACJv5C,EAAGs5C,EAAmBt5C,EACtBtB,EAAG46C,EAAmB56C,EACtBqN,OAAQutC,EAAmBvtC,OAC3BC,OAAQstC,EAAmBttC,QAE7B+6B,IAAK,CACH/mC,EAAGg5C,EAAiBh5C,EACpBtB,EAAGs6C,EAAiBt6C,EACpBqN,OAAQitC,EAAiBjtC,OACzBC,OAAQgtC,EAAiBhtC,QAG/B,EAEA+qC,EAAK95C,UAAUu8C,YAAc,WAC3B,OAAO5+C,KAAK48C,SACd,EAMAT,EAAK95C,UAAUw8C,qBAAuB,WACpC,IAAIl5C,EAAO3F,KAAK2D,kBAAkB+F,QAElC,OADA/D,EAAK4V,eAAevb,KAAKoV,WAClBzP,CACT,EAMAw2C,EAAK95C,UAAU+jB,YAAc,SAAUJ,EAAM84B,EAAQluB,GACnD,IAAIxb,EAAY0pC,EAAS9+C,KAAKs+C,cAAgBt+C,KAAKoV,UAEnD,OADAwb,EAAMA,GAAO,GACNxb,EAAYI,GAAiBob,EAAK5K,EAAM5Q,GAAa8mC,GAAOmC,KAAKztB,EAAK5K,EAC/E,EAMAm2B,EAAK95C,UAAU8lB,YAAc,SAAUnR,GACrC,IAAIunC,EAAev+C,KAAKu+C,aACxB,OAAOA,EAAe/oC,GAAiB,GAAIwB,EAAOunC,GAAgB,CAACvnC,EAAM,GAAIA,EAAM,GACrF,EAEAmlC,EAAK95C,UAAU08C,eAAiB,SAAUx8C,EAASwjB,EAAQla,GACzD,IAAI1E,EAAW63C,GAAYj5B,GAC3B,OAAO5e,IAAanH,KAAOmH,EAASif,YAAYva,GAAS,IAC3D,EAEAswC,EAAK95C,UAAU48C,iBAAmB,SAAU18C,EAASwjB,EAAQm5B,GAC3D,IAAI/3C,EAAW63C,GAAYj5B,GAC3B,OAAO5e,IAAanH,KAAOmH,EAASghB,YAAY+2B,GAAS,IAC3D,EAMA/C,EAAK95C,UAAU0lB,aAAe,SAAU/Q,GACtC,OAAOhX,KAAK6+C,uBAAuBM,QAAQnoC,EAAM,GAAIA,EAAM,GAC7D,EAEAmlC,EAAKl1B,WAAa,CAAC,IAAK,KACjBk1B,CACT,CA3OA,CA2OEE,GAAAA,IAEF,SAAS2C,GAAYj5B,GACnB,IAAI5b,EAAc4b,EAAO5b,YACzB,OAAOA,EAAcA,EAAYC,iBAAmB,IACtD,CAEA,U,WC3PA,SAASw0C,GAAYz0C,EAAa3H,EAAK48C,GACrC,IAAIzzC,GAAS8J,EAAAA,EAAAA,QAAOtL,EAAYrF,qBAAsB,CACpDs6C,OAAQA,IAEV,OAAOn6C,EAAAA,EAAAA,IAAc0G,EAAQ,CAC3B5G,MAAOvC,EAAI0C,WACXnB,OAAQvB,EAAI2C,aAEhB,CAEe,SAASk6C,GAAmB98C,EAASC,GAClD,IAAI88C,EAAW,GA+Cf,OA9CA/8C,EAAQguC,iBAAiB,SAAS,SAAUpmC,GAC1C,IAAIqgB,EAAergB,EAAYxH,IAAI,oBAEnC,IAAK6nB,GAAiC,SAAjBA,EAAyB,CAC5C,IAAIkrB,EAASvrC,EAAYQ,UACrB40C,EAAY7J,EAAO5E,UAAS,SAAUtvB,GACxC,IAAI6vB,EAAYqE,EAAOnd,aAAa/W,GACpC,MAAO,EAAE6vB,EAAU1uC,IAAI,MAAO0uC,EAAU1uC,IAAI,KAC9C,IACI0c,EAAM,GACNC,EAAM,GACVkgC,GAAAA,GAAgBD,EAAWlgC,EAAKC,GAE5BA,EAAI,GAAKD,EAAI,KAAO,IACtBC,EAAI,IAAM,EACVD,EAAI,IAAM,GAGRC,EAAI,GAAKD,EAAI,KAAO,IACtBC,EAAI,IAAM,EACVD,EAAI,IAAM,GAGZ,IAAI+/B,GAAU9/B,EAAI,GAAKD,EAAI,KAAOC,EAAI,GAAKD,EAAI,IAE3CogC,EAAWb,GAAYz0C,EAAa3H,EAAK48C,GAEzC1zB,MAAM0zB,KACR//B,EAAM,CAACogC,EAASr6C,EAAGq6C,EAAS37C,GAC5Bwb,EAAM,CAACmgC,EAASr6C,EAAIq6C,EAAS16C,MAAO06C,EAAS37C,EAAI27C,EAAS17C,SAG5D,IAAI27C,EAAUpgC,EAAI,GAAKD,EAAI,GACvBsgC,EAAWrgC,EAAI,GAAKD,EAAI,GACxBF,EAAYsgC,EAAS16C,MACrBqa,EAAaqgC,EAAS17C,OACtB67C,EAAez1C,EAAYC,iBAAmB,IAAI+xC,GACtDyD,EAAapC,UAAYrzC,EAAYxH,IAAI,cACzCi9C,EAAarD,gBAAgBl9B,EAAI,GAAIA,EAAI,GAAIqgC,EAASC,GACtDC,EAAalD,YAAY+C,EAASr6C,EAAGq6C,EAAS37C,EAAGqb,EAAWC,GAE5DwgC,EAAa1C,UAAU/yC,EAAYxH,IAAI,UAAWH,GAClDo9C,EAAatC,QAAQnzC,EAAYxH,IAAI,SACrC28C,EAAS70C,KAAKm1C,EAChB,CACF,IACON,CACT,C,eC3DO,SAASO,GAAgB75B,EAAM5H,GACpC,IAAI0hC,EAAY95B,EAAK6D,iBAAiB,kBAClC0D,EAAMuyB,EAAU/0C,OAEpB,GAAY,IAARwiB,EAAW,CACb,IAAIwyB,GAASC,EAAAA,GAAAA,IAAiBh6B,EAAM5H,EAAW0hC,EAAU,IACzD,OAAiB,MAAVC,EAAiBA,EAAS,GAAK,IACxC,CAAO,GAAIxyB,EAAK,CAGd,IAFA,IAAI0yB,EAAO,GAEFn1C,EAAI,EAAGA,EAAIg1C,EAAU/0C,OAAQD,IACpCm1C,EAAKx1C,MAAKu1C,EAAAA,GAAAA,IAAiBh6B,EAAM5H,EAAW0hC,EAAUh1C,KAGxD,OAAOm1C,EAAK5wB,KAAK,IACnB,CACF,C,eCXI6wB,GAEJ,SAAU1/C,GAGR,SAAS0/C,EAAOl6B,EAAMxE,EAAK2+B,EAAalH,GACtC,IAAIx4C,EAAQD,EAAOogC,KAAK5gC,OAASA,KAIjC,OAFAS,EAAM2/C,WAAWp6B,EAAMxE,EAAK2+B,EAAalH,GAElCx4C,CACT,CAkTA,OA1TAM,EAAAA,EAAAA,IAAUm/C,EAAQ1/C,GAUlB0/C,EAAO79C,UAAUg+C,cAAgB,SAAUjO,EAAYpsB,EAAMxE,EAAK6wB,EAAYiO,GAE5EtgD,KAAK0C,YAOL,IAAIy1C,GAAahhC,EAAAA,GAAAA,IAAai7B,GAAa,GAAI,EAAG,EAAG,EAAG,KAAMkO,GAC9DnI,EAAWrmC,KAAK,CACdrO,GAAI,IACJ88C,SAAS,EACTpvC,OAAQkhC,EAAW,GAAK,EACxBjhC,OAAQihC,EAAW,GAAK,IAG1B8F,EAAWpnC,MAAQyvC,GACnBxgD,KAAKygD,YAAcrO,EACnBpyC,KAAK2E,IAAIwzC,EACX,EAOA+H,EAAO79C,UAAUq+C,oBAAsB,SAAUC,GAC/C3gD,KAAK4gD,QAAQ,GAAG/uC,cAAc,KAAM8uC,EACtC,EAEAT,EAAO79C,UAAUw+C,cAAgB,WAC/B,OAAO7gD,KAAKygD,WACd,EAYAP,EAAO79C,UAAU+1C,cAAgB,WAC/B,OAAOp4C,KAAK4gD,QAAQ,EACtB,EAMAV,EAAO79C,UAAUy+C,UAAY,YAC3BC,EAAAA,GAAAA,IAAc/gD,KAAK4gD,QAAQ,GAC7B,EAMAV,EAAO79C,UAAU2+C,SAAW,YAC1BC,EAAAA,GAAAA,IAAcjhD,KAAK4gD,QAAQ,GAC7B,EAOAV,EAAO79C,UAAU6+C,KAAO,SAAU7tC,EAAQpS,GACxC,IAAIk3C,EAAan4C,KAAK4gD,QAAQ,GAC9BzI,EAAW9kC,OAASA,EACpB8kC,EAAWl3C,EAAIA,CACjB,EAEAi/C,EAAO79C,UAAU8+C,aAAe,SAAU3wC,EAAW4wC,GACnD,IAAIjJ,EAAan4C,KAAK4gD,QAAQ,GAC9BzI,EAAW3nC,UAAYA,EACvB2nC,EAAW5nC,QAAU6wC,GAAmB5wC,EAAY,OAAS2nC,EAAW5nC,MAC1E,EAMA2vC,EAAO79C,UAAU+9C,WAAa,SAAUp6B,EAAMxE,EAAK2+B,EAAalH,GAC9Dj5C,KAAKoE,QAAS,EACd,IAAIguC,EAAapsB,EAAK2gB,cAAcnlB,EAAK,WAAa,SAClDrX,EAAc6b,EAAKq7B,UACnBhP,EAAa6N,EAAO5J,cAActwB,EAAMxE,GACxCrR,EAASiiC,IAAepyC,KAAKygD,YAC7Ba,EAAmBrI,GAAQA,EAAKqI,iBAEpC,GAAInxC,EAAQ,CACV,IAAImwC,EAAat6B,EAAK2gB,cAAcnlB,EAAK,oBAEzCxhB,KAAKqgD,cAAcjO,EAAYpsB,EAAMxE,EAAK6wB,EAAYiO,EACxD,KAAO,CACL,IAAInI,EAAan4C,KAAK4gD,QAAQ,GAC9BzI,EAAW/zC,QAAS,EACpB,IAAIhD,EAAS,CACX+P,OAAQkhC,EAAW,GAAK,EACxBjhC,OAAQihC,EAAW,GAAK,GAE1BiP,EAAmBnJ,EAAWrmC,KAAK1Q,GAAU+B,EAAAA,EAAoBg1C,EAAY/2C,EAAQ+I,EAAaqX,IAClG+/B,EAAAA,EAAAA,IAAapJ,EACf,CAIA,GAFAn4C,KAAKwhD,cAAcx7B,EAAMxE,EAAK6wB,EAAY8N,EAAalH,GAEnD9oC,EAAQ,CACNgoC,EAAan4C,KAAK4gD,QAAQ,GAE9B,IAAKU,EAAkB,CACjBlgD,EAAS,CACX+P,OAAQnR,KAAKyhD,OACbrwC,OAAQpR,KAAK0hD,OACbt+C,MAAO,CAELwxB,QAASujB,EAAW/0C,MAAMwxB,UAG9BujB,EAAWhnC,OAASgnC,EAAW/mC,OAAS,EACxC+mC,EAAW/0C,MAAMwxB,QAAU,EAC3BzxB,EAAAA,GAAkBg1C,EAAY/2C,EAAQ+I,EAAaqX,EACrD,CACF,CAEI8/B,GAEFthD,KAAK4gD,QAAQ,GAAG/uC,cAAc,QAElC,EAEAquC,EAAO79C,UAAUm/C,cAAgB,SAAUx7B,EAAMxE,EAAK6wB,EAAY8N,EAAalH,GAC7E,IAEI0I,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAVAhK,EAAan4C,KAAK4gD,QAAQ,GAC1Bz2C,EAAc6b,EAAKq7B,UAuBvB,GAZIlB,IACFwB,EAAoBxB,EAAYwB,kBAChCC,EAAgBzB,EAAYyB,cAC5BC,EAAkB1B,EAAY0B,gBAC9BC,EAAQ3B,EAAY2B,MACpBC,EAAY5B,EAAY4B,UACxBE,EAAoB9B,EAAY8B,kBAChCC,EAAa/B,EAAY+B,WACzBC,EAAchC,EAAYgC,YAC1BH,EAAmB7B,EAAY6B,mBAG5B7B,GAAen6B,EAAKo8B,cAAe,CACtC,IAAI/Q,EAAY8O,GAAeA,EAAY9O,UAAY8O,EAAY9O,UAAYrrB,EAAKuS,aAAa/W,GAC7F6gC,EAAgBhR,EAAUxuC,SAAS,YACvC8+C,EAAoBU,EAAcx/C,SAAS,aAAa6C,eACxDm8C,EAAkBxQ,EAAUxuC,SAAS,CAAC,SAAU,cAAc6C,eAC9Dk8C,EAAgBvQ,EAAUxuC,SAAS,CAAC,OAAQ,cAAc6C,eAC1Do8C,EAAQO,EAAc1/C,IAAI,SAC1Bo/C,EAAYM,EAAc1/C,IAAI,aAC9Bq/C,EAAmBK,EAAc1/C,IAAI,YACrCs/C,GAAoBK,EAAAA,EAAAA,IAAqBjR,GACzC6Q,EAAaG,EAAcpkC,WAAW,SACtCkkC,EAAc9Q,EAAUpzB,WAAW,SACrC,CAEA,IAAI8kB,EAAe/c,EAAK2gB,cAAcnlB,EAAK,gBAC3C22B,EAAWrmC,KAAK,YAAaixB,GAAgB,GAAKpzB,KAAK4D,GAAK,KAAO,GACnE,IAAIgvC,GAAe7rC,EAAAA,GAAAA,IAAsBsP,EAAK2gB,cAAcnlB,EAAK,gBAAiB6wB,GAE9EkQ,IACFpK,EAAW/yC,EAAIm9C,EAAa,GAC5BpK,EAAWr0C,EAAIy+C,EAAa,IAG9BJ,GAAehK,EAAWrmC,KAAK,SAAUqwC,GACzC,IAAIK,EAAcx8B,EAAK2gB,cAAcnlB,EAAK,SACtCihC,EAAcD,EAAYl/C,KAE9B,GAAI60C,aAAsBuK,GAAAA,GAAS,CACjC,IAAIC,EAAYxK,EAAW/0C,MAC3B+0C,EAAWyK,UAASntC,EAAAA,EAAAA,QAAO,CAEzBotC,MAAOF,EAAUE,MACjBz9C,EAAGu9C,EAAUv9C,EACbtB,EAAG6+C,EAAU7+C,EACbiB,MAAO49C,EAAU59C,MACjBhB,OAAQ4+C,EAAU5+C,QACjBy+C,GACL,MACMrK,EAAW2K,eAIb3K,EAAWyK,UAASntC,EAAAA,EAAAA,QAAO,CAAC,EAAG+sC,IAE/BrK,EAAWyK,SAASJ,GAItBrK,EAAW/0C,MAAMmmC,MAAQ,KACzB4O,EAAW4K,SAASN,EAAaxJ,GAAQA,EAAK+J,kBAC9C7K,EAAW/0C,MAAM6/C,eAAgB,EAGnC,IAAIC,EAAQl9B,EAAK2gB,cAAcnlB,EAAK,SAChC2hC,EAAWnjD,KAAKojD,IAEP,MAATF,EACc,MAAZC,IACFnjD,KAAKojD,IAAMjL,EAAW10C,GACtB00C,EAAW10C,IAAMy/C,GAEE,MAAZC,IACThL,EAAW10C,GAAK0/C,EAChBnjD,KAAKojD,IAAM,MAGb,IAAIC,EAAepK,GAAQA,EAAKoK,aAShC,SAASC,EAAoB9hC,GAC3B,OAAO6hC,EAAer9B,EAAK+qB,QAAQvvB,GAAOq+B,GAAgB75B,EAAMxE,EAClE,EAVA6lB,EAAAA,EAAAA,IAAc8Q,EAAY8J,EAAmB,CAC3CsB,aAAcp5C,EACdq5C,eAAgBhiC,EAChB+lB,YAAa+b,EACbG,aAAchB,EACdiB,eAAgBlB,EAAY5tB,UAO9B50B,KAAKyhD,OAASpP,EAAW,GAAK,EAC9BryC,KAAK0hD,OAASrP,EAAW,GAAK,EAC9B,IAAItI,EAAgBoO,EAAWO,YAAY,YAC3C3O,EAAc3mC,MAAQu+C,EACtBxJ,EAAWO,YAAY,UAAUt1C,MAAQy+C,EACzC1J,EAAWO,YAAY,QAAQt1C,MAAQw+C,EAGvC,IAAI+B,EAA2B,MAAdzB,IAAqC,IAAfA,EAAsBvyC,KAAK2P,IAAI,IAAK,EAAItf,KAAK0hD,QAClFzoC,SAASipC,IAAeA,EAAa,GAAKA,EAAa,EAEzDnY,EAAc54B,OAASnR,KAAKyhD,OAASkC,EACrC5Z,EAAc34B,OAASpR,KAAK0hD,OAASiC,EACrC3jD,KAAK4jD,eAAe,IACpBC,EAAAA,GAAAA,IAAoB7jD,KAAM8hD,EAAOC,EAAWC,EAC9C,EAEA9B,EAAO79C,UAAUuhD,eAAiB,SAAUl4C,GAC1C1L,KAAKmR,OAASnR,KAAKoR,OAAS1F,CAC9B,EAEAw0C,EAAO79C,UAAUyhD,QAAU,SAAUr/B,EAAIta,EAAasJ,GACpD,IAAI0kC,EAAan4C,KAAK4gD,QAAQ,GAC1BxiC,GAAY7Z,EAAAA,EAAAA,GAAUvE,MAAMoe,UAC5B2lC,EAAetwC,GAAOA,EAAInE,UAI9B,GAFAtP,KAAKoE,OAAS+zC,EAAW/zC,QAAS,EAE9BqP,GAAOA,EAAIuwC,UAAW,CACxB,IAAIC,EAAc9L,EAAW+L,iBAEzBD,GACF9gD,EAAAA,GAAsB8gD,EAAa,CACjC7gD,MAAO,CACLwxB,QAAS,IAEVzqB,EAAa,CACdiU,UAAWA,EACX+lC,UAAWJ,EACXt/B,GAAI,WACF0zB,EAAWiM,mBACb,GAGN,MACEjM,EAAWiM,oBAGbjhD,EAAAA,GAAsBg1C,EAAY,CAChC/0C,MAAO,CACLwxB,QAAS,GAEXzjB,OAAQ,EACRC,OAAQ,GACPjH,EAAa,CACdiU,UAAWA,EACXqG,GAAIA,EACJ0/B,UAAWJ,GAEf,EAEA7D,EAAO5J,cAAgB,SAAUtwB,EAAMxE,GACrC,OAAO6iC,EAAAA,GAAAA,IAAoBr+B,EAAK2gB,cAAcnlB,EAAK,cACrD,EAEO0+B,CACT,CA5TA,CA4TE/8C,EAAAA,GAEF,SAASq9C,GAAY/uC,EAAIC,GACvB1R,KAAKg9C,OAAOjsC,MAAMU,EAAIC,EACxB,CAEA,UC1UA,SAAS4yC,GAAgBt+B,EAAMhP,EAAOwK,EAAK/N,GACzC,OAAOuD,IAAU0U,MAAM1U,EAAM,MAAQ0U,MAAM1U,EAAM,OAASvD,EAAI8wC,UAAY9wC,EAAI8wC,SAAS/iC,OAGlF/N,EAAIo6B,YAAcp6B,EAAIo6B,UAAUsR,QAAQnoC,EAAM,GAAIA,EAAM,MAA8C,SAAtCgP,EAAK2gB,cAAcnlB,EAAK,SAC/F,CAEA,SAASgjC,GAAmB/wC,GAO1B,OANW,MAAPA,IAAgBoK,EAAAA,EAAAA,UAASpK,KAC3BA,EAAM,CACJ8wC,SAAU9wC,IAIPA,GAAO,CAAC,CACjB,CAEA,SAASgxC,GAAgBz+B,GACvB,IAAI7b,EAAc6b,EAAKq7B,UACnBgB,EAAgBl4C,EAAYtH,SAAS,YACzC,MAAO,CACL8+C,kBAAmBU,EAAcx/C,SAAS,aAAa6C,eACvDk8C,cAAez3C,EAAYtH,SAAS,CAAC,OAAQ,cAAc6C,eAC3Dm8C,gBAAiB13C,EAAYtH,SAAS,CAAC,SAAU,cAAc6C,eAC/Do8C,MAAOO,EAAc1/C,IAAI,SACzBo/C,UAAWM,EAAc1/C,IAAI,aAC7Bq/C,iBAAkBK,EAAc1/C,IAAI,YACpCu/C,WAAYG,EAAc1/C,IAAI,SAC9Bs/C,mBAAmBK,EAAAA,EAAAA,IAAqBn4C,GACxCg4C,YAAah4C,EAAYxH,IAAI,UAEjC,CAEA,IAAI+hD,GAEJ,WACE,SAASA,EAAWC,GAClB3kD,KAAKyC,MAAQ,IAAIU,EAAAA,EACjBnD,KAAK4kD,YAAcD,GAAcE,EACnC,CA8JA,OAxJAH,EAAWriD,UAAU+9C,WAAa,SAAUp6B,EAAMvS,GAEhDzT,KAAK8kD,gBAAkB,KACvBrxC,EAAM+wC,GAAmB/wC,GACzB,IAAIhR,EAAQzC,KAAKyC,MACb0H,EAAc6b,EAAKq7B,UACnB0D,EAAU/kD,KAAKihC,MACf0jB,EAAa3kD,KAAK4kD,YAClBtD,EAAmB7tC,EAAI6tC,iBACvBnB,EAAcsE,GAAgBz+B,GAC9Bg/B,EAAkB,CACpB1D,iBAAkBA,GAGhB2D,EAAiBxxC,EAAIwxC,gBAAkB,SAAUzjC,GACnD,OAAOwE,EAAK21B,cAAcn6B,EAC5B,EAIKujC,GACHtiD,EAAMC,YAGRsjB,EAAKiE,KAAK86B,GAASpgD,KAAI,SAAUugD,GAC/B,IAAIluC,EAAQiuC,EAAeC,GAE3B,GAAIZ,GAAgBt+B,EAAMhP,EAAOkuC,EAAQzxC,GAAM,CAC7C,IAAI0xC,EAAW,IAAIR,EAAW3+B,EAAMk/B,EAAQ/E,EAAa6E,GACzDG,EAASvX,YAAY52B,GACrBgP,EAAKo/B,iBAAiBF,EAAQC,GAC9B1iD,EAAMkC,IAAIwgD,EACZ,CACF,IAAGl5B,QAAO,SAAUi5B,EAAQG,GAC1B,IAAIF,EAAWJ,EAAQ7+B,iBAAiBm/B,GACpCruC,EAAQiuC,EAAeC,GAE3B,GAAKZ,GAAgBt+B,EAAMhP,EAAOkuC,EAAQzxC,GAA1C,CAKA,IAAI6xC,EAAgBt/B,EAAK2gB,cAAcue,EAAQ,WAAa,SACxDK,EAAgBJ,GAAYA,EAAStE,eAAiBsE,EAAStE,gBAEnE,IAAKsE,GACFI,GAAiBA,IAAkBD,EACpC7iD,EAAMmK,OAAOu4C,GACbA,EAAW,IAAIR,EAAW3+B,EAAMk/B,EAAQ/E,EAAa6E,GACrDG,EAASvX,YAAY52B,OAChB,CACLmuC,EAAS/E,WAAWp6B,EAAMk/B,EAAQ/E,EAAa6E,GAC/C,IAAI5jD,EAAS,CACXgE,EAAG4R,EAAM,GACTlT,EAAGkT,EAAM,IAEXsqC,EAAmB6D,EAASrzC,KAAK1Q,GAAU+B,EAAAA,EAAoBgiD,EAAU/jD,EAAQ+I,EACnF,CAGA1H,EAAMkC,IAAIwgD,GACVn/B,EAAKo/B,iBAAiBF,EAAQC,EArB9B,MAFE1iD,EAAMmK,OAAOu4C,EAwBjB,IAAGv4C,QAAO,SAAUy4C,GAClB,IAAIxyC,EAAKkyC,EAAQ7+B,iBAAiBm/B,GAClCxyC,GAAMA,EAAGixC,SAAQ,WACfrhD,EAAMmK,OAAOiG,EACf,GAAG1I,EACL,IAAGq7C,UACHxlD,KAAKylD,gBAAkBR,EACvBjlD,KAAKihC,MAAQjb,CACf,EAIA0+B,EAAWriD,UAAUqjD,aAAe,WAClC,IAAIjlD,EAAQT,KAERgmB,EAAOhmB,KAAKihC,MAEZjb,GAEFA,EAAK2/B,mBAAkB,SAAU9yC,EAAI2O,GACnC,IAAIxK,EAAQvW,EAAMglD,gBAAgBjkC,GAElC3O,EAAG+6B,YAAY52B,GACfnE,EAAGxN,YACL,GAEJ,EAIAq/C,EAAWriD,UAAUujD,yBAA2B,SAAU5/B,GACxDhmB,KAAK6lD,aAAepB,GAAgBz+B,GACpChmB,KAAKihC,MAAQ,KACbjhC,KAAKyC,MAAMC,WACb,EAOAgiD,EAAWriD,UAAUyjD,kBAAoB,SAAUC,EAAY//B,EAAMvS,GAKnE,SAASuyC,EAA0BnzC,GAC5BA,EAAGozC,UACNpzC,EAAGqzC,aAAc,EACjBrzC,EAAG6lC,YAAY,YAAYvO,YAAa,EAE5C,CARAnqC,KAAK8kD,gBAAkB,GACvBrxC,EAAM+wC,GAAmB/wC,GASzB,IAAK,IAAI+N,EAAMukC,EAAWpW,MAAOnuB,EAAMukC,EAAWI,IAAK3kC,IAAO,CAC5D,IAAIxK,EAAQgP,EAAK21B,cAAcn6B,GAE/B,GAAI8iC,GAAgBt+B,EAAMhP,EAAOwK,EAAK/N,GAAM,CAC1C,IAAIZ,EAAK,IAAI7S,KAAK4kD,YAAY5+B,EAAMxE,EAAKxhB,KAAK6lD,cAC9ChzC,EAAGS,SAAS0yC,GACZnzC,EAAG+6B,YAAY52B,GACfhX,KAAKyC,MAAMkC,IAAIkO,GACfmT,EAAKo/B,iBAAiB5jC,EAAK3O,GAE3B7S,KAAK8kD,gBAAgBr6C,KAAKoI,EAC5B,CACF,CACF,EAIA6xC,EAAWriD,UAAU+jD,aAAe,SAAU3hC,GAC5CthB,EAAQkjD,iBAAiBrmD,KAAK8kD,iBAAmB9kD,KAAKyC,MAAOgiB,EAC/D,EAEAigC,EAAWriD,UAAUuK,OAAS,SAAU05C,GACtC,IAAI7jD,EAAQzC,KAAKyC,MACbujB,EAAOhmB,KAAKihC,MAEZjb,GAAQsgC,EACVtgC,EAAK2/B,mBAAkB,SAAU9yC,GAC/BA,EAAGixC,SAAQ,WACTrhD,EAAMmK,OAAOiG,EACf,GAAGmT,EAAKq7B,UACV,IAEA5+C,EAAMC,WAEV,EAGOgiD,CACT,CAnKA,GAqKA,M,sBCtMI6B,GAAoBpjD,EAAAA,EAAAA,UACpBqjD,GAAmBrjD,GAAAA,EAAAA,UAEnBsjD,GAEJ,WACE,SAASA,IAEPzmD,KAAK6V,GAAK,EACV7V,KAAK8V,GAAK,EAEV9V,KAAK+V,GAAK,EACV/V,KAAKgW,GAAK,EACVhW,KAAK0mD,QAAU,CACjB,CAEA,OAAOD,CACT,CAZA,IAgBA,SAAUjmD,GAGR,SAASmmD,IACP,OAAkB,OAAXnmD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,IAC7D,EAJAe,EAAAA,EAAAA,IAAU4lD,EAAYnmD,EAOxB,EARA,CAQEimD,IAEF,SAASG,GAAehhD,GACtB,OAAO8lB,OAAO9lB,EAAMihD,OAASn7B,OAAO9lB,EAAMkhD,KAC5C,CAEA,IAAIC,GAEJ,SAAUvmD,GAGR,SAASumD,EAAW9N,GAClB,IAAIx4C,EAAQD,EAAOogC,KAAK5gC,KAAMi5C,IAASj5C,KAGvC,OADAS,EAAMG,KAAO,UACNH,CACT,CAmCA,OA1CAM,EAAAA,EAAAA,IAAUgmD,EAAYvmD,GAStBumD,EAAW1kD,UAAU2kD,gBAAkB,WACrC,MAAO,CACL5vC,OAAQ,OACR9T,KAAM,KAEV,EAEAyjD,EAAW1kD,UAAU4kD,gBAAkB,WACrC,OAAO,IAAIR,EACb,EAEAM,EAAW1kD,UAAU6kD,UAAY,SAAUC,EAAKvhD,GAC1CghD,GAAehhD,GACjB2gD,GAAkBW,UAAUtmB,KAAK5gC,KAAMmnD,EAAKvhD,GAE5C4gD,GAAiBU,UAAUtmB,KAAK5gC,KAAMmnD,EAAKvhD,EAE/C,EAEAmhD,EAAW1kD,UAAU+kD,QAAU,SAAUC,GACvC,OAAIT,GAAe5mD,KAAK4F,OACf2gD,GAAkBa,QAAQxmB,KAAK5gC,KAAMqnD,GAErCb,GAAiBY,QAAQxmB,KAAK5gC,KAAMqnD,EAE/C,EAEAN,EAAW1kD,UAAUilD,UAAY,SAAUD,GACzC,IAAIzhD,EAAQ5F,KAAK4F,MACb2zC,EAAIqN,GAAehhD,GAAS,CAACA,EAAMmQ,GAAKnQ,EAAMiQ,GAAIjQ,EAAMoQ,GAAKpQ,EAAMkQ,IAAM0wC,GAAiBc,UAAU1mB,KAAK5gC,KAAMqnD,GACnH,OAAO/R,GAAAA,UAAeiE,EAAGA,EAC3B,EAEOwN,CACT,CA5CA,CA4CE5jD,GAAAA,IAEF,MCjFIokD,GAAoB,CAAC,aAAc,YAEvC,SAASC,GAAkBC,GACzB,MAAO,IAAMA,EAAiB,MAChC,CAMA,SAAStwC,GAAahM,EAAMu8C,EAAUlmC,GACpC,IAAI4wB,EAAasV,EAAS/gB,cAAcnlB,EAAKrW,GAE7C,GAAKinC,GAA6B,SAAfA,EAAnB,CAIA,IAAIC,EAAaqV,EAAS/gB,cAAcnlB,EAAKrW,EAAO,QAChD43B,EAAe2kB,EAAS/gB,cAAcnlB,EAAKrW,EAAO,UAClDo3C,EAAemF,EAAS/gB,cAAcnlB,EAAKrW,EAAO,UAClD63B,EAAmB0kB,EAAS/gB,cAAcnlB,EAAKrW,EAAO,cACtDw8C,EAAgBC,GAAAA,GAA+BvV,GAC/CwV,EAAkBD,GAAAA,GAAiCrF,GAAgB,EAAGoF,GACtExP,EAAayP,GAAAA,GAAwBxV,GAAauV,EAAc,GAAK,EAAIE,EAAgB,IAAKF,EAAc,GAAK,EAAIE,EAAgB,GAAIF,EAAc,GAAIA,EAAc,GAAI,KAAM3kB,GAGvL,OAFAmV,EAAW2P,oBAAsC,MAAhB/kB,GAAwBrX,MAAMqX,QAAgB,GAAUA,EAAepzB,KAAK4D,GAAK,KAAO,EACzH4kC,EAAWhtC,KAAOA,EACXgtC,CAXP,CAYF,CAEA,SAAS4P,GAAWvS,GAClB,IAAI5/B,EAAO,IAAImxC,GAAW,CACxB57C,KAAM,OACNrF,kBAAkB,IAGpB,OADAkiD,GAAcpyC,EAAKhQ,MAAO4vC,GACnB5/B,CACT,CAEA,SAASoyC,GAAc/kC,EAAauyB,GAClCvyB,EAAYpN,GAAK2/B,EAAO,GAAG,GAC3BvyB,EAAYnN,GAAK0/B,EAAO,GAAG,GAC3BvyB,EAAYlN,GAAKy/B,EAAO,GAAG,GAC3BvyB,EAAYjN,GAAKw/B,EAAO,GAAG,GAC3BvyB,EAAYyjC,QAAU,EACtB,IAAIvP,EAAM3B,EAAO,GAEb2B,GACFl0B,EAAY4jC,KAAO1P,EAAI,GACvBl0B,EAAY6jC,KAAO3P,EAAI,KAEvBl0B,EAAY4jC,KAAO9Q,IACnB9yB,EAAY6jC,KAAO/Q,IAEvB,CAEA,IAAIkS,GAEJ,SAAUznD,GAGR,SAASynD,EAAKP,EAAUlmC,EAAK2+B,GAC3B,IAAI1/C,EAAQD,EAAOogC,KAAK5gC,OAASA,KAIjC,OAFAS,EAAMynD,YAAYR,EAAUlmC,EAAK2+B,GAE1B1/C,CACT,CA2VA,OAnWAM,EAAAA,EAAAA,IAAUknD,EAAMznD,GAUhBynD,EAAK5lD,UAAU6lD,YAAc,SAAUR,EAAUlmC,EAAK2+B,GACpD,IAAIh2C,EAAcu9C,EAASrG,UACvB8G,EAAaT,EAAS/L,cAAcn6B,GACpC5L,EAAOmyC,GAAWI,GACtBvyC,EAAKhQ,MAAM8gD,QAAU,EACrBvjD,EAAAA,GAAkByS,EAAM,CACtBhQ,MAAO,CACL8gD,QAAS,IAEVv8C,EAAaqX,GAChBxhB,KAAK2E,IAAIiR,IACT3O,EAAAA,EAAAA,MAAKsgD,IAAmB,SAAUE,GAChC,IAAIvwC,EAASC,GAAaswC,EAAgBC,EAAUlmC,GAIpDxhB,KAAK2E,IAAIuS,GACTlX,KAAKwnD,GAAkBC,IAAmBC,EAAS/gB,cAAcnlB,EAAKimC,EACxE,GAAGznD,MAEHA,KAAKooD,iBAAiBV,EAAUlmC,EAAK2+B,EACvC,EAGA8H,EAAK5lD,UAAU+9C,WAAa,SAAUsH,EAAUlmC,EAAK2+B,GACnD,IAAIh2C,EAAcu9C,EAASrG,UACvBzrC,EAAO5V,KAAKuuC,YAAY,QACxB4Z,EAAaT,EAAS/L,cAAcn6B,GACpCpgB,EAAS,CACXwE,MAAO,CAAC,GAEVoiD,GAAc5mD,EAAOwE,MAAOuiD,GAC5BhlD,EAAAA,EAAoByS,EAAMxU,EAAQ+I,EAAaqX,IAC/Cva,EAAAA,EAAAA,MAAKsgD,IAAmB,SAAUE,GAChC,IAAIrV,EAAasV,EAAS/gB,cAAcnlB,EAAKimC,GACzC1+C,EAAMy+C,GAAkBC,GAE5B,GAAIznD,KAAK+I,KAASqpC,EAAY,CAC5BpyC,KAAK4M,OAAO5M,KAAKuuC,YAAYkZ,IAC7B,IAAIvwC,EAASC,GAAaswC,EAAgBC,EAAUlmC,GACpDxhB,KAAK2E,IAAIuS,EACX,CAEAlX,KAAK+I,GAAOqpC,CACd,GAAGpyC,MAEHA,KAAKooD,iBAAiBV,EAAUlmC,EAAK2+B,EACvC,EAIA8H,EAAK5lD,UAAUgmD,YAAc,WAC3B,OAAOroD,KAAK4gD,QAAQ,EACtB,EAEAqH,EAAK5lD,UAAU+lD,iBAAmB,SAAUV,EAAUlmC,EAAK2+B,GACzD,IAAIh2C,EAAcu9C,EAASrG,UACvBzrC,EAAO5V,KAAKuuC,YAAY,QACxB+Z,EAAoBnI,GAAeA,EAAYmI,kBAC/CC,EAAgBpI,GAAeA,EAAYoI,cAC3CC,EAAkBrI,GAAeA,EAAYqI,gBAC7CvG,EAAoB9B,GAAeA,EAAY8B,kBAC/CD,EAAmB7B,GAAeA,EAAY6B,iBAC9CF,EAAQ3B,GAAeA,EAAY2B,MACnCC,EAAY5B,GAAeA,EAAY4B,UAE3C,IAAK5B,GAAeuH,EAAStF,cAAe,CAC1C,IAAI/Q,EAAYqW,EAASnvB,aAAa/W,GAClC6gC,EAAgBhR,EAAUxuC,SAAS,YACvCylD,EAAoBjG,EAAcx/C,SAAS,aAAa8S,eACxD4yC,EAAgBlX,EAAUxuC,SAAS,CAAC,OAAQ,cAAc8S,eAC1D6yC,EAAkBnX,EAAUxuC,SAAS,CAAC,SAAU,cAAc8S,eAC9DqsC,EAAmBK,EAAc1/C,IAAI,YACrCm/C,EAAQO,EAAc1/C,IAAI,SAC1Bo/C,EAAYM,EAAc1/C,IAAI,aAC9Bs/C,GAAoBK,EAAAA,EAAAA,IAAqBjR,EAC3C,CAEA,IAAItnC,EAAY29C,EAAS/gB,cAAcnlB,EAAK,SACxCihC,EAAc14C,EAAUqN,OAC5BxB,EAAKgtC,SAAS74C,GACd6L,EAAKxS,MAAME,KAAO,KAClBsS,EAAKxS,MAAM6/C,eAAgB,EAC3BrtC,EAAK8iC,YAAY,YAAYt1C,MAAQklD,EACrC1yC,EAAK8iC,YAAY,QAAQt1C,MAAQmlD,EACjC3yC,EAAK8iC,YAAY,UAAUt1C,MAAQolD,GAEnCvhD,EAAAA,EAAAA,MAAKsgD,IAAmB,SAAUE,GAChC,IAAIvwC,EAASlX,KAAKuuC,YAAYkZ,GAE9B,GAAIvwC,EAAQ,CAEVA,EAAO6rC,SAASN,GAChBvrC,EAAO9T,MAAMwxB,QAAU7qB,EAAU6qB,QAEjC,IAAK,IAAI9pB,EAAI,EAAGA,EAAI29C,GAAAA,GAAAA,OAAuB39C,IAAK,CAC9C,IAAI49C,EAAYD,GAAAA,GAAe39C,GAC3B69C,EAAY/yC,EAAKgzC,SAASF,GAE9B,GAAIC,EAAW,CACb,IAAIE,EAAiBF,EAAUvlD,OAAS,CAAC,EACrC0lD,EAAQ5xC,EAAOwhC,YAAYgQ,GAC3BK,EAAaD,EAAM1lD,QAAU0lD,EAAM1lD,MAAQ,CAAC,GAEnB,MAAzBylD,EAAezxC,SACjB2xC,EAAW7xC,EAAO4rC,eAAiB,SAAW,QAAU+F,EAAezxC,QAG3C,MAA1ByxC,EAAej0B,UACjBm0B,EAAWn0B,QAAUi0B,EAAej0B,QAExC,CACF,CAEA1d,EAAO7R,YACT,CACF,GAAGrF,MACH,IAAI+/C,EAAS51C,EAAY6+C,YAAYxnC,IACrC6lB,EAAAA,EAAAA,IAAcrnC,KAAMiiD,EAAmB,CACrCuB,eAAgBhiC,EAChB+hC,aAAc,CACZ0F,kBAAmB,SAAU7qC,EAAWsqC,GACtC,OAAOv+C,EAAY8+C,kBAAkB7qC,EAAWsqC,EAAWhB,EAASlsB,SACtE,GAEFioB,aAAchB,GAAe,OAC7BiB,eAAgB35C,EAAU6qB,QAC1B2S,aAAwB,MAAVwY,EAAiB2H,EAAS3W,QAAQvvB,GAAOvI,SAAS8mC,IAAUnxB,EAAAA,EAAAA,IAAMmxB,GAAUA,GAAU,KAEtG,IAAIn2C,EAAQ5J,KAAKkkD,iBAGjB,GAAIt6C,EAAO,CACT,IAAIs/C,EAAmBjH,EAAkB3a,OACzC19B,EAAMu/C,QAAUv/C,EAAMxG,MAAMmC,MAC5BqE,EAAMw/C,gBAAkBx/C,EAAMxG,MAAMY,cAEpC4F,EAAMy/C,WAAaH,EAAiBvmD,IAAI,aAAe,SACvD,IAAI2mD,EAAWJ,EAAiBvmD,IAAI,aAE/B2I,EAAAA,EAAAA,SAAQg+C,KACXA,EAAW,CAACA,EAAUA,IAGxB1/C,EAAM2/C,gBAAkBD,CAC1B,CAEAtpD,KAAKw4C,cAAc,CACjBxkC,SAAU,KACVw1C,OAAO,EACPC,QAAQ,KAGV5F,EAAAA,GAAAA,IAAoB7jD,KAAM8hD,EAAOC,EAAWC,EAC9C,EAEAiG,EAAK5lD,UAAUy+C,UAAY,YACzBC,EAAAA,GAAAA,IAAc/gD,KAChB,EAEAioD,EAAK5lD,UAAU2+C,SAAW,YACxBC,EAAAA,GAAAA,IAAcjhD,KAChB,EAEAioD,EAAK5lD,UAAUqjD,aAAe,SAAUgC,EAAUlmC,GAChDxhB,KAAKgoD,cAAcN,EAAS/L,cAAcn6B,GAC5C,EAEAymC,EAAK5lD,UAAU2lD,cAAgB,SAAUxS,GACvC,IAAIkU,EAAW1pD,KAAKuuC,YAAY,QAChCyZ,GAAc0B,EAAS9jD,MAAO4vC,GAC9BkU,EAASC,OACX,EAEA1B,EAAK5lD,UAAUunD,aAAe,WAC5B,IAAIC,EAAY7pD,KACZ8pD,EAAaD,EAAUtb,YAAY,cACnCwb,EAAWF,EAAUtb,YAAY,YACjC3kC,EAAQigD,EAAU3F,iBAEtB,GAAK4F,GAAeC,GAAcngD,IAASA,EAAMwO,OAAjD,CAIA,IAAI4xC,EAAW,EACXj2B,EAAa/zB,KAAKg9C,OAEtB,MAAOjpB,EACDA,EAAW5iB,SACb64C,GAAYj2B,EAAW5iB,QAGzB4iB,EAAaA,EAAWipB,OAG1B,IAAIpnC,EAAOi0C,EAAUtb,YAAY,QAGjC,GAAKvuC,KAAKiqD,SAAYr0C,EAAKq0C,QAA3B,CAIA,IAAIvD,EAAU9wC,EAAKhQ,MAAM8gD,QACrBwD,EAAUt0C,EAAKwxC,QAAQ,GACvB+C,EAAQv0C,EAAKwxC,QAAQV,GACrBpM,EAAI4B,GAAOkO,IAAI,GAAID,EAAOD,GAgC9B,GA/BAhO,GAAOpK,UAAUwI,EAAGA,GAiBhBwP,IACFA,EAAWlc,YAAYsc,GACvBG,EAAkBP,EAAY,GAC9BA,EAAW34C,OAAS24C,EAAW14C,OAAS44C,EAAWtD,EACnDoD,EAAWzkD,cAGT0kD,IACFA,EAASnc,YAAYuc,GACrBE,EAAkBN,EAAU,GAC5BA,EAAS54C,OAAS44C,EAAS34C,OAAS44C,EAAWtD,EAC/CqD,EAAS1kD,cAGPuE,IAAUA,EAAMwO,OAAQ,CAC1BxO,EAAMxE,EAAIwE,EAAM9F,EAAI,EACpB8F,EAAMq0C,QAAUr0C,EAAMs0C,QAAU,EAChC,IAAIn7C,OAAY,EACZC,OAAoB,EACpBsmD,EAAW1/C,EAAM2/C,gBACjBe,EAAYhB,EAAS,GAAKU,EAC1BO,EAAYjB,EAAS,GAAKU,EAC1BQ,EAAc9D,EAAU,EACxB+D,EAAU70C,EAAK0xC,UAAUkD,GACzBlR,EAAI,CAACmR,EAAQ,IAAKA,EAAQ,IAC1BC,EAAK90C,EAAKwxC,QAAQoD,GAElBlR,EAAE,GAAK,IACTA,EAAE,IAAMA,EAAE,GACVA,EAAE,IAAMA,EAAE,IAGZ,IAAIqR,EAAMF,EAAQ,GAAK,GAAK,EAAI,EAEhC,GAAyB,UAArB7gD,EAAMy/C,YAA+C,QAArBz/C,EAAMy/C,WAAsB,CAC9D,IAAIj2C,GAAYzD,KAAK2oC,MAAMmS,EAAQ,GAAIA,EAAQ,IAE3CN,EAAM,GAAKD,EAAQ,KACrB92C,EAAWzD,KAAK4D,GAAKH,GAGvBxJ,EAAMwJ,SAAWA,CACnB,CAEA,IAAI1B,OAAK,EAET,OAAQ9H,EAAMy/C,YACZ,IAAK,iBACL,IAAK,kBACL,IAAK,eACL,IAAK,SACH33C,GAAM64C,EACNvnD,EAAoB,SACpB,MAEF,IAAK,oBACL,IAAK,qBACL,IAAK,kBACH0O,EAAK64C,EACLvnD,EAAoB,MACpB,MAEF,QACE0O,EAAK,EACL1O,EAAoB,SAGxB,OAAQ4G,EAAMy/C,YACZ,IAAK,MACHz/C,EAAMxE,EAAIk1C,EAAE,GAAKgQ,EAAYH,EAAM,GACnCvgD,EAAM9F,EAAIw2C,EAAE,GAAKiQ,EAAYJ,EAAM,GACnCpnD,EAAYu3C,EAAE,GAAK,GAAM,OAASA,EAAE,IAAM,GAAM,QAAU,SAC1Dt3C,EAAoBs3C,EAAE,GAAK,GAAM,MAAQA,EAAE,IAAM,GAAM,SAAW,SAClE,MAEF,IAAK,QACH1wC,EAAMxE,GAAKk1C,EAAE,GAAKgQ,EAAYJ,EAAQ,GACtCtgD,EAAM9F,GAAKw2C,EAAE,GAAKiQ,EAAYL,EAAQ,GACtCnnD,EAAYu3C,EAAE,GAAK,GAAM,QAAUA,EAAE,IAAM,GAAM,OAAS,SAC1Dt3C,EAAoBs3C,EAAE,GAAK,GAAM,SAAWA,EAAE,IAAM,GAAM,MAAQ,SAClE,MAEF,IAAK,iBACL,IAAK,cACL,IAAK,oBACH1wC,EAAMxE,EAAIklD,EAAYK,EAAMT,EAAQ,GACpCtgD,EAAM9F,EAAIomD,EAAQ,GAAKx4C,EACvB3O,EAAY0nD,EAAQ,GAAK,EAAI,QAAU,OACvC7gD,EAAMq0C,SAAWqM,EAAYK,EAC7B/gD,EAAMs0C,SAAWxsC,EACjB,MAEF,IAAK,kBACL,IAAK,eACL,IAAK,qBACL,IAAK,SACH9H,EAAMxE,EAAIslD,EAAG,GACb9gD,EAAM9F,EAAI4mD,EAAG,GAAKh5C,EAClB3O,EAAY,SACZ6G,EAAMs0C,SAAWxsC,EACjB,MAEF,IAAK,eACL,IAAK,YACL,IAAK,kBACH9H,EAAMxE,GAAKklD,EAAYK,EAAMR,EAAM,GACnCvgD,EAAM9F,EAAIqmD,EAAM,GAAKz4C,EACrB3O,EAAY0nD,EAAQ,IAAM,EAAI,QAAU,OACxC7gD,EAAMq0C,QAAUqM,EAAYK,EAC5B/gD,EAAMs0C,SAAWxsC,EACjB,MAGJ9H,EAAMuH,OAASvH,EAAMwH,OAAS44C,EAC9BpgD,EAAMpE,SAAS,CAEbxB,cAAe4F,EAAMw/C,iBAAmBpmD,EACxCuC,MAAOqE,EAAMu/C,SAAWpmD,GAE5B,CA9IA,CAlBA,CA0BA,SAASsnD,EAAkBnzC,EAAQwvC,GAKjC,IAAIkE,EAAoB1zC,EAAO4wC,oBAE/B,GAAyB,MAArB8C,EAA2B,CAC7B,IAAIH,EAAU70C,EAAK0xC,UAAUZ,GAC7BxvC,EAAOpF,KAAK,YAAyB,IAAZ40C,GAAiB,EAAI,GAAK/2C,KAAK4D,GAAK,EAAI5D,KAAK2oC,MAAMmS,EAAQ,GAAIA,EAAQ,IAClG,MACEvzC,EAAOpF,KAAK,WAAY84C,EAE5B,CA0HF,EAEO3C,CACT,CArWA,CAqWE9kD,EAAAA,GAEF,MCraI0nD,GAEJ,WACE,SAASA,EAASC,GAChB9qD,KAAKyC,MAAQ,IAAIU,EAAAA,EACjBnD,KAAK+qD,UAAYD,GAAYE,EAC/B,CAqHA,OAnHAH,EAASxoD,UAAU+9C,WAAa,SAAUsH,GACxC,IAAIjnD,EAAQT,KAGZA,KAAK8kD,gBAAkB,KACvB,IAAImG,EAAWjrD,KACXyC,EAAQwoD,EAASxoD,MACjByoD,EAAcD,EAASE,UAC3BF,EAASE,UAAYzD,EAGhBwD,GACHzoD,EAAMC,YAGR,IAAIy9C,EAAcsE,GAAgBiD,GAClCA,EAASz9B,KAAKihC,GAAavmD,KAAI,SAAU6c,GACvC/gB,EAAM2qD,OAAO1D,EAAUlmC,EAAK2+B,EAC9B,IAAGl0B,QAAO,SAAUi5B,EAAQG,GAC1B5kD,EAAM4qD,UAAUH,EAAaxD,EAAUrC,EAAQH,EAAQ/E,EACzD,IAAGvzC,QAAO,SAAU4U,GAClB/e,EAAMmK,OAAOs+C,EAAYhlC,iBAAiB1E,GAC5C,IAAGgkC,SACL,EAIAqF,EAASxoD,UAAUqjD,aAAe,WAChC,IAAIgC,EAAW1nD,KAAKmrD,UAEfzD,GAILA,EAAS/B,mBAAkB,SAAU9yC,EAAI2O,GACvC3O,EAAG6yC,aAAagC,EAAUlmC,EAC5B,GAAGxhB,KACL,EAIA6qD,EAASxoD,UAAUujD,yBAA2B,SAAU8B,GACtD1nD,KAAK6lD,aAAepB,GAAgBiD,GACpC1nD,KAAKmrD,UAAY,KACjBnrD,KAAKyC,MAAMC,WACb,EAIAmoD,EAASxoD,UAAUyjD,kBAAoB,SAAUC,EAAY2B,GAG3D,SAAS1B,EAA0BnzC,GAC5BA,EAAGozC,SAAYqF,GAAez4C,KACjCA,EAAGqzC,aAAc,EACjBrzC,EAAG6lC,YAAY,YAAYvO,YAAa,EAE5C,CAPAnqC,KAAK8kD,gBAAkB,GASvB,IAAK,IAAItjC,EAAMukC,EAAWpW,MAAOnuB,EAAMukC,EAAWI,IAAK3kC,IAAO,CAC5D,IAAI+pC,EAAa7D,EAAS/L,cAAcn6B,GAExC,GAAIgqC,GAAcD,GAAa,CAC7B,IAAI14C,EAAK,IAAI7S,KAAK+qD,UAAUrD,EAAUlmC,EAAKxhB,KAAK6lD,cAChDhzC,EAAGS,SAAS0yC,GACZhmD,KAAKyC,MAAMkC,IAAIkO,GACf60C,EAAStC,iBAAiB5jC,EAAK3O,GAE/B7S,KAAK8kD,gBAAgBr6C,KAAKoI,EAC5B,CACF,CACF,EAIAg4C,EAASxoD,UAAUuK,OAAS,WAC1B5M,KAAKyC,MAAMC,WACb,EAIAmoD,EAASxoD,UAAU+jD,aAAe,SAAU3hC,GAC1CthB,EAAQkjD,iBAAiBrmD,KAAK8kD,iBAAmB9kD,KAAKyC,MAAOgiB,EAC/D,EAEAomC,EAASxoD,UAAU+oD,OAAS,SAAU1D,EAAUlmC,EAAK2+B,GACnD,IAAIoL,EAAa7D,EAAS/L,cAAcn6B,GAExC,GAAKgqC,GAAcD,GAAnB,CAIA,IAAI14C,EAAK,IAAI7S,KAAK+qD,UAAUrD,EAAUlmC,EAAK2+B,GAC3CuH,EAAStC,iBAAiB5jC,EAAK3O,GAC/B7S,KAAKyC,MAAMkC,IAAIkO,EAJf,CAKF,EAEAg4C,EAASxoD,UAAUgpD,UAAY,SAAUH,EAAaO,EAAapG,EAAQH,EAAQ/E,GACjF,IAAIuL,EAASR,EAAYhlC,iBAAiBm/B,GAErCmG,GAAcC,EAAY9P,cAAcuJ,KAKxCwG,EAGHA,EAAOtL,WAAWqL,EAAavG,EAAQ/E,GAFvCuL,EAAS,IAAI1rD,KAAK+qD,UAAUU,EAAavG,EAAQ/E,GAKnDsL,EAAYrG,iBAAiBF,EAAQwG,GACrC1rD,KAAKyC,MAAMkC,IAAI+mD,IAXb1rD,KAAKyC,MAAMmK,OAAO8+C,EAYtB,EAEOb,CACT,CA1HA,GA4HA,SAASS,GAAez4C,GACtB,OAAOA,EAAG84C,WAAa94C,EAAG84C,UAAU5gD,OAAS,CAC/C,CAEA,SAAS05C,GAAgBiD,GACvB,IAAIrG,EAAYqG,EAASrG,UACrBgB,EAAgBhB,EAAUx+C,SAAS,YACvC,MAAO,CACLkH,UAAWs3C,EAAUx+C,SAAS,aAAa8S,eAC3C2yC,kBAAmBjG,EAAcx/C,SAAS,CAAC,cAAc8S,eACzD4yC,cAAelH,EAAUx+C,SAAS,CAAC,OAAQ,cAAc8S,eACzD6yC,gBAAiBnH,EAAUx+C,SAAS,CAAC,SAAU,cAAc8S,eAC7DqsC,iBAAkBK,EAAc1/C,IAAI,YACpCo/C,UAAWM,EAAc1/C,IAAI,aAC7Bm/C,MAAOO,EAAc1/C,IAAI,SACzBs/C,mBAAmBK,EAAAA,EAAAA,IAAqBjB,GAE5C,CAEA,SAASuK,GAAWv0C,GAClB,OAAOqU,MAAMrU,EAAG,KAAOqU,MAAMrU,EAAG,GAClC,CAEA,SAASm0C,GAAcK,GACrB,OAAOA,IAAQD,GAAWC,EAAI,MAAQD,GAAWC,EAAI,GACvD,CAEA,U,qBC1JIC,GAAO,0BAaJ,SAASC,GAAQ37C,EAAI47C,GAC1B,QAASC,GAAS77C,GAAI47C,EACxB,CAEA,SAASC,GAAS77C,GAChB,OAAOA,EAAG07C,MAAU17C,EAAG07C,IAAQ,CAAC,EAClC,CAWAI,GAAAA,GAAuB,CACrBtrD,KAAM,mBACNgQ,MAAO,oBACPqb,OAAQ,UACPiU,EAAAA,MC9BH,IAAIisB,GAEJ,SAAU3rD,GAGR,SAAS2rD,EAAe/7C,GACtB,IAAI3P,EAAQD,EAAOogC,KAAK5gC,OAASA,KAEjCS,EAAM0xB,IAAM/hB,EAEZ,IAAIg8C,GAAmB5+C,EAAAA,EAAAA,MAAK/M,EAAM4rD,kBAAmB5rD,GACjD6rD,GAAmB9+C,EAAAA,EAAAA,MAAK/M,EAAM8rD,kBAAmB9rD,GACjD+rD,GAAiBh/C,EAAAA,EAAAA,MAAK/M,EAAMgsD,gBAAiBhsD,GAC7CisD,GAAoBl/C,EAAAA,EAAAA,MAAK/M,EAAMksD,mBAAoBlsD,GACnDmsD,GAAep/C,EAAAA,EAAAA,MAAK/M,EAAMosD,cAAepsD,GA0C7C,OAnCAA,EAAMqsD,OAAS,SAAUC,EAAat5C,GAEpCzT,KAAKgtD,UACLhtD,KAAKitD,MAAOjjD,EAAAA,EAAAA,WAASN,EAAAA,EAAAA,OAAM+J,IAAQ,CAAC,EAAG,CACrCy5C,kBAAkB,EAClBC,iBAAiB,EAEjBC,kBAAkB,EAClBC,yBAAyB,IAGR,MAAfN,IACFA,GAAc,IAGI,IAAhBA,GAAwC,SAAhBA,GAA0C,QAAhBA,IACpD38C,EAAG/L,GAAG,YAAa+nD,GACnBh8C,EAAG/L,GAAG,YAAaioD,GACnBl8C,EAAG/L,GAAG,UAAWmoD,KAGC,IAAhBO,GAAwC,UAAhBA,GAA2C,SAAhBA,IACrD38C,EAAG/L,GAAG,aAAcqoD,GACpBt8C,EAAG/L,GAAG,QAASuoD,GAEnB,EAEAnsD,EAAMusD,QAAU,WACd58C,EAAGk9C,IAAI,YAAalB,GACpBh8C,EAAGk9C,IAAI,YAAahB,GACpBl8C,EAAGk9C,IAAI,UAAWd,GAClBp8C,EAAGk9C,IAAI,aAAcZ,GACrBt8C,EAAGk9C,IAAI,QAASV,EAClB,EAEOnsD,CACT,CA0IA,OAhMAM,EAAAA,EAAAA,IAAUorD,EAAgB3rD,GAwD1B2rD,EAAe9pD,UAAUkrD,WAAa,WACpC,OAAOvtD,KAAK0N,SACd,EAEAy+C,EAAe9pD,UAAUmrD,WAAa,WACpC,OAAOxtD,KAAKytD,SACd,EAEAtB,EAAe9pD,UAAUqrD,kBAAoB,SAAUC,GACrD3tD,KAAK2tD,eAAiBA,CACxB,EAEAxB,EAAe9pD,UAAU0K,QAAU,WACjC/M,KAAKgtD,SACP,EAEAb,EAAe9pD,UAAUgqD,kBAAoB,SAAU37C,GACrD,IAAIC,EAAAA,GAA6CD,GAAjD,CAIA,IAAImC,EAAKnC,EAAEtP,OAEX,MAAOyR,EAAI,CACT,GAAIA,EAAGrC,UACL,OAIFqC,EAAKA,EAAG+6C,cAAgB/6C,EAAGmqC,MAC7B,CAEA,IAAI53C,EAAIsL,EAAEkV,QACN9hB,EAAI4M,EAAEmV,QAGN7lB,KAAK2tD,gBAAkB3tD,KAAK2tD,eAAej9C,EAAGtL,EAAGtB,KACnD9D,KAAK6tD,GAAKzoD,EACVpF,KAAK8tD,GAAKhqD,EACV9D,KAAK0N,WAAY,EApBnB,CAsBF,EAEAy+C,EAAe9pD,UAAUkqD,kBAAoB,SAAU77C,GACrD,GAAK1Q,KAAK0N,WAAcqgD,GAAoB,kBAAmBr9C,EAAG1Q,KAAKitD,OAA4B,UAAnBv8C,EAAEs9C,eAA4BC,GAAyBjuD,KAAKmyB,IAAK,aAAjJ,CAIA,IAAI/sB,EAAIsL,EAAEkV,QACN9hB,EAAI4M,EAAEmV,QACNqoC,EAAOluD,KAAK6tD,GACZM,EAAOnuD,KAAK8tD,GACZr8C,EAAKrM,EAAI8oD,EACTx8C,EAAK5N,EAAIqqD,EACbnuD,KAAK6tD,GAAKzoD,EACVpF,KAAK8tD,GAAKhqD,EACV9D,KAAKitD,KAAKI,yBAA2B18C,EAAAA,GAAeD,EAAEE,OACtDyb,GAAQrsB,KAAM,MAAO,kBAAmB0Q,EAAG,CACzCe,GAAIA,EACJC,GAAIA,EACJw8C,KAAMA,EACNC,KAAMA,EACNC,KAAMhpD,EACNipD,KAAMvqD,EACNiqD,oBAAqB,MAlBvB,CAoBF,EAEA5B,EAAe9pD,UAAUoqD,gBAAkB,SAAU/7C,GAC9CC,EAAAA,GAA6CD,KAChD1Q,KAAK0N,WAAY,EAErB,EAEAy+C,EAAe9pD,UAAUsqD,mBAAqB,SAAUj8C,GACtD,IAAI49C,EAAaP,GAAoB,mBAAoBr9C,EAAG1Q,KAAKitD,MAC7DsB,EAAaR,GAAoB,mBAAoBr9C,EAAG1Q,KAAKitD,MAC7DuB,EAAa99C,EAAE89C,WACfC,EAAqB9+C,KAAKC,IAAI4+C,GAC9BvQ,EAAUvtC,EAAEkV,QACZs4B,EAAUxtC,EAAEmV,QAEhB,GAAmB,IAAf2oC,IAAqBF,GAAeC,GAAxC,CAOA,GAAID,EAAY,CASd,IAAII,EAASD,EAAqB,EAAI,IAAMA,EAAqB,EAAI,IAAM,IACvE/iD,EAAQ8iD,EAAa,EAAIE,EAAS,EAAIA,EAC1CC,GAAuB3uD,KAAM,OAAQ,mBAAoB0Q,EAAG,CAC1DhF,MAAOA,EACPuyC,QAASA,EACTC,QAASA,EACT6P,oBAAqB,MAEzB,CAEA,GAAIQ,EAAY,CAEd,IAAIK,EAAWj/C,KAAKC,IAAI4+C,GAEpBK,GAAeL,EAAa,EAAI,GAAK,IAAMI,EAAW,EAAI,GAAMA,EAAW,EAAI,IAAO,KAC1FD,GAAuB3uD,KAAM,aAAc,mBAAoB0Q,EAAG,CAChEm+C,YAAaA,EACb5Q,QAASA,EACTC,QAASA,EACT6P,oBAAqB,MAEzB,CAnCA,CAoCF,EAEA5B,EAAe9pD,UAAUwqD,cAAgB,SAAUn8C,GACjD,IAAIu9C,GAAyBjuD,KAAKmyB,IAAK,aAAvC,CAIA,IAAIzmB,EAAQgF,EAAEo+C,WAAa,EAAI,IAAM,EAAI,IACzCH,GAAuB3uD,KAAM,OAAQ,KAAM0Q,EAAG,CAC5ChF,MAAOA,EACPuyC,QAASvtC,EAAEq+C,OACX7Q,QAASxtC,EAAEs+C,OACXjB,oBAAqB,MAPvB,CASF,EAEO5B,CACT,CAlMA,CAkME8C,GAAAA,GAEF,SAASN,GAAuBO,EAAYC,EAAWC,EAAiB1+C,EAAG2+C,GACrEH,EAAWvB,gBAAkBuB,EAAWvB,eAAej9C,EAAG2+C,EAAepR,QAASoR,EAAenR,WAInGvtC,EAAAA,GAAeD,EAAEE,OACjByb,GAAQ6iC,EAAYC,EAAWC,EAAiB1+C,EAAG2+C,GAEvD,CAEA,SAAShjC,GAAQ6iC,EAAYC,EAAWC,EAAiB1+C,EAAG2+C,GAG1DA,EAAetB,qBAAsBvgD,EAAAA,EAAAA,MAAKugD,GAAqB,KAAMqB,EAAiB1+C,GAEtFw+C,EAAW7iC,QAAQ8iC,EAAWE,EAChC,CAQA,SAAStB,GAAoBqB,EAAiB1+C,EAAG4+C,GAC/C,IAAIC,EAAUD,EAASF,GACvB,OAAQA,GAAmBG,MAAah5C,EAAAA,EAAAA,UAASg5C,IAAY7+C,EAAEE,MAAM2+C,EAAU,OACjF,CAEA,UCtOO,SAASC,GAAgBC,EAAgBh+C,EAAIC,GAClD,IAAItQ,EAASquD,EAAeruD,OAC5BA,EAAOgE,GAAKqM,EACZrQ,EAAO0C,GAAK4N,EACZtQ,EAAOuoD,OACT,CAKO,SAAS+F,GAAiBD,EAAgBE,EAAWC,EAAOC,GACjE,IAAIzuD,EAASquD,EAAeruD,OACxBo8C,EAAYiS,EAAejS,UAC3BsS,EAAUL,EAAelS,KAAOkS,EAAelS,MAAQ,EAG3D,GAFAuS,GAAWH,EAEPnS,EAAW,CACb,IAAIuS,EAAUvS,EAAUn+B,KAAO,EAC3B2wC,EAAUxS,EAAUl+B,KAAO2wC,IAC/BH,EAAUngD,KAAK2P,IAAI3P,KAAK0P,IAAI2wC,EAASF,GAAUC,EACjD,CAEA,IAAIG,EAAYJ,EAAUL,EAAelS,KACzCkS,EAAelS,KAAOuS,EAEtB1uD,EAAOgE,IAAMwqD,EAAQxuD,EAAOgE,IAAM8qD,EAAY,GAC9C9uD,EAAO0C,IAAM+rD,EAAQzuD,EAAO0C,IAAMosD,EAAY,GAC9C9uD,EAAO+P,QAAU++C,EACjB9uD,EAAOgQ,QAAU8+C,EACjB9uD,EAAOuoD,OACT,CClCA,IAAIwG,GAAsB,CACxB,YAAe,EACf,QAAW,EACX,MAAS,GAOJ,SAASC,GAAoB1/C,EAAGlO,EAAK6tD,GAC1C,IAAI9oD,EAAQ/E,EAAI8tD,sBAAsB5/C,EAAE6/C,WAEpCppD,EAAWI,GAASA,EAAM6C,iBAC9B,OAAO7C,GAASA,IAAU8oD,IAAwBF,GAAoB3tB,eAAej7B,EAAMuN,WAAa3N,GAAYA,EAASI,QAAU8oD,CACzI,C,eCZIG,GAAK,GACLC,GAAK,GACLC,GAAK,GACLC,GAAcC,GAAAA,GACdC,GAAevb,GAAAA,WACfwb,GAAUnhD,KAAKC,IAEnB,SAASmhD,GAAqBC,EAAa5X,EAAQ6X,GASjD,IARA,IAII5J,EAJA6J,EAAKF,EAAY,GACjBpwC,EAAKowC,EAAY,GACjBnwC,EAAKmwC,EAAY,GACjB1W,EAAI2V,IAEJkB,EAAeF,EAASA,EACxBG,EAAW,GAENC,EAAK,GAAKA,GAAM,GAAKA,GAAM,GAAK,CACvCb,GAAG,GAAKG,GAAYO,EAAG,GAAItwC,EAAG,GAAIC,EAAG,GAAIwwC,GACzCb,GAAG,GAAKG,GAAYO,EAAG,GAAItwC,EAAG,GAAIC,EAAG,GAAIwwC,GACzC,IAAIpnC,EAAO6mC,GAAQD,GAAaL,GAAIpX,GAAU+X,GAE1ClnC,EAAOqwB,IACTA,EAAIrwB,EACJo9B,EAAIgK,EAER,CAIA,IAAK,IAAIvmD,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,IAAIoQ,EAAOmsC,EAAI+J,EAGfX,GAAG,GAAKE,GAAYO,EAAG,GAAItwC,EAAG,GAAIC,EAAG,GAAIwmC,GACzCoJ,GAAG,GAAKE,GAAYO,EAAG,GAAItwC,EAAG,GAAIC,EAAG,GAAIwmC,GACzCqJ,GAAG,GAAKC,GAAYO,EAAG,GAAItwC,EAAG,GAAIC,EAAG,GAAI3F,GACzCw1C,GAAG,GAAKC,GAAYO,EAAG,GAAItwC,EAAG,GAAIC,EAAG,GAAI3F,GACrC+O,EAAO4mC,GAAaJ,GAAIrX,GAAU+X,EAEtC,GAAIL,GAAQ7mC,GAAQ,IAClB,MAIF,IAAIqnC,EAAWT,GAAaH,GAAItX,GAAU+X,EAC1CC,GAAY,EAERnnC,EAAO,EACLqnC,GAAY,EACdjK,GAAQ+J,EAER/J,GAAQ+J,EAGNE,GAAY,EACdjK,GAAQ+J,EAER/J,GAAQ+J,CAGd,CAEA,OAAO/J,CACT,CAGe,SAASkK,GAAW5gB,EAAOjlC,GACxC,IAAI8lD,EAAO,GACPC,EAAqBb,GAAAA,GACrB/E,EAAM,CAAC,GAAI,GAAI,IACf6F,EAAO,CAAC,GAAI,IACZ3a,EAAI,GACRrrC,GAAS,EACTilC,EAAMyE,UAAS,SAAU7C,EAAM/wB,GAC7B,IAAI2mC,EAAa5V,EAAKgD,YAClBoc,EAAapf,EAAKtM,UAAU,cAC5B2rB,EAAWrf,EAAKtM,UAAU,YAEzBkiB,EAAW0J,aACd1J,EAAW0J,WAAa,CAACvc,GAAAA,MAAW6S,EAAW,IAAK7S,GAAAA,MAAW6S,EAAW,KAEtEA,EAAW,IACbA,EAAW0J,WAAWpnD,KAAK6qC,GAAAA,MAAW6S,EAAW,MAIrD,IAAI2J,EAAiB3J,EAAW0J,WAEhC,GAAqB,MAAjB1J,EAAW,GAAY,CAKzB,GAJA7S,GAAAA,KAAUuW,EAAI,GAAIiG,EAAe,IACjCxc,GAAAA,KAAUuW,EAAI,GAAIiG,EAAe,IACjCxc,GAAAA,KAAUuW,EAAI,GAAIiG,EAAe,IAE7BH,GAA6B,SAAfA,EAAuB,CACvC,IAAItf,EAAaiE,GAAc/D,EAAKI,OAChC0U,EAAI0J,GAAqBlF,EAAKiG,EAAe,GAAIzf,EAAa3mC,GAElE+lD,EAAmB5F,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIxE,EAAGmK,GACvD3F,EAAI,GAAG,GAAK2F,EAAK,GACjB3F,EAAI,GAAG,GAAK2F,EAAK,GACjBC,EAAmB5F,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIxE,EAAGmK,GACvD3F,EAAI,GAAG,GAAK2F,EAAK,GACjB3F,EAAI,GAAG,GAAK2F,EAAK,EACnB,CAEA,GAAII,GAAyB,SAAbA,EAAqB,CAC/Bvf,EAAaiE,GAAc/D,EAAKK,OAChCyU,EAAI0J,GAAqBlF,EAAKiG,EAAe,GAAIzf,EAAa3mC,GAElE+lD,EAAmB5F,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIxE,EAAGmK,GACvD3F,EAAI,GAAG,GAAK2F,EAAK,GACjB3F,EAAI,GAAG,GAAK2F,EAAK,GACjBC,EAAmB5F,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIA,EAAI,GAAG,GAAIxE,EAAGmK,GACvD3F,EAAI,GAAG,GAAK2F,EAAK,GACjB3F,EAAI,GAAG,GAAK2F,EAAK,EACnB,CAGAlc,GAAAA,KAAU6S,EAAW,GAAI0D,EAAI,IAC7BvW,GAAAA,KAAU6S,EAAW,GAAI0D,EAAI,IAC7BvW,GAAAA,KAAU6S,EAAW,GAAI0D,EAAI,GAC/B,KACK,CAMD,GALAvW,GAAAA,KAAUoc,EAAK,GAAII,EAAe,IAClCxc,GAAAA,KAAUoc,EAAK,GAAII,EAAe,IAClCxc,GAAAA,IAASyB,EAAG2a,EAAK,GAAIA,EAAK,IAC1Bpc,GAAAA,UAAeyB,EAAGA,GAEd4a,GAA6B,SAAfA,EAAuB,CACnCtf,EAAaiE,GAAc/D,EAAKI,OACpC2C,GAAAA,YAAiBoc,EAAK,GAAIA,EAAK,GAAI3a,EAAG1E,EAAa3mC,EACrD,CAEA,GAAIkmD,GAAyB,SAAbA,EAAqB,CAC/Bvf,EAAaiE,GAAc/D,EAAKK,OACpC0C,GAAAA,YAAiBoc,EAAK,GAAIA,EAAK,GAAI3a,GAAI1E,EAAa3mC,EACtD,CAEA4pC,GAAAA,KAAU6S,EAAW,GAAIuJ,EAAK,IAC9Bpc,GAAAA,KAAU6S,EAAW,GAAIuJ,EAAK,GAChC,CACJ,GACF,C,eCpIA,SAASK,GAAe5qD,GACtB,MAAyB,SAAlBA,EAASvG,IAClB,CAEA,IAAIoxD,GAEJ,SAAUxxD,GAGR,SAASwxD,IACP,IAAIvxD,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAGhE,OADAS,EAAMG,KAAOoxD,EAAUpxD,KAChBH,CACT,CA2OA,OAlPAM,EAAAA,EAAAA,IAAUixD,EAAWxxD,GASrBwxD,EAAU3vD,UAAU6zB,KAAO,SAAU3zB,EAASC,GAC5C,IAAIyvD,EAAa,IAAIvN,GACjBuG,EAAW,IAAIJ,GACfpoD,EAAQzC,KAAKyC,MACjBzC,KAAKkyD,YAAc,IAAI/F,GAAe3pD,EAAI2M,SAC1CnP,KAAKmyD,gBAAkB,CACrB/wD,OAAQqB,GAEVA,EAAMkC,IAAIstD,EAAWxvD,OACrBA,EAAMkC,IAAIsmD,EAASxoD,OACnBzC,KAAKoyD,YAAcH,EACnBjyD,KAAKqyD,UAAYpH,EACjBjrD,KAAKsyD,cAAe,CACtB,EAEAN,EAAU3vD,UAAUvC,OAAS,SAAUqK,EAAa5H,EAASC,GAC3D,IAAI/B,EAAQT,KAERmH,EAAWgD,EAAYC,iBAC3BpK,KAAKuyD,OAASpoD,EACd,IAAI8nD,EAAajyD,KAAKoyD,YAClBnH,EAAWjrD,KAAKqyD,UAChB5vD,EAAQzC,KAAKyC,MAEjB,GAAIsvD,GAAe5qD,GAAW,CAC5B,IAAIqrD,EAAe,CACjBptD,EAAG+B,EAAS/B,EACZtB,EAAGqD,EAASrD,EACZqN,OAAQhK,EAASgK,OACjBC,OAAQjK,EAASiK,QAGfpR,KAAKsyD,aACP7vD,EAAMqP,KAAK0gD,GAEXrvD,EAAAA,EAAoBV,EAAO+vD,EAAcroD,EAE7C,CAGAonD,GAAWpnD,EAAYymC,WAAYoF,GAAmB7rC,IACtD,IAAI6b,EAAO7b,EAAYQ,UACvBsnD,EAAW7R,WAAWp6B,GACtB,IAAIksB,EAAW/nC,EAAYgoC,cAE3B8Y,EAAS7K,WAAWlO,GAEpBlyC,KAAKyyD,0BAELzyD,KAAK0yD,kBAAkBvoD,EAAa5H,EAASC,GAE7CiwB,aAAazyB,KAAK2yD,gBAClB,IAAI7Z,EAAc3uC,EAAY2uC,YAC1B8Z,EAAkBzoD,EAAYxH,IAAI,CAAC,QAAS,oBAE5Cm2C,GACF94C,KAAK6yD,2BAA2B/Z,EAAa8Z,GAG/C,IAAI7xC,EAAS5W,EAAYxH,IAAI,UAC7BqjB,EAAK2qB,MAAMqE,UAAS,SAAUC,GAC5B,IAAIzzB,EAAMyzB,EAAK72B,UACXvL,EAAKoiC,EAAKgD,eACV5G,EAAY4D,EAAKpyC,WAErB,GAAKgQ,EAAL,CAKAA,EAAGy6C,IAAI,QAAQA,IAAI,WACnB,IAAI98C,EAAY6gC,EAAU1uC,IAAI,aAE1B6N,GACFqC,EAAGxO,GAAG,QAAQ,SAAUqM,GACtB,OAAQqQ,GACN,IAAK,QACH+3B,EAAYe,UACXp5C,EAAMqyD,YAAcryD,EAAMoyD,2BAA2B/Z,EAAa8Z,GACnE9Z,EAAYgB,SAASt4B,GAErBwE,EAAK8vB,cAAct0B,EAAK,CAAC3O,EAAGzN,EAAGyN,EAAG/O,IAClC,MAEF,IAAK,WACHkiB,EAAK8vB,cAAct0B,EAAK,CAAC3O,EAAGzN,EAAGyN,EAAG/O,IAElCmxC,EAAKC,UAAU,CACb8C,OAAO,IACN,GAEHxB,GAAersC,EAAa,aAAc8qC,EAAM,CAACvkC,EAAEkV,QAASlV,EAAEmV,UAE9DplB,EAAMilD,aAAav7C,GAEnB,MAEF,IAAK,OACL,QACE6b,EAAK8vB,cAAct0B,EAAK,CAAC3O,EAAGzN,EAAGyN,EAAG/O,IAElCqxC,GAAiBhrC,EAAYymC,WAAYzmC,GAEzC1J,EAAMilD,aAAav7C,GAEnB,MAEN,IAAG9F,GAAG,WAAW,WACXy0C,GACFA,EAAYiB,WAAWv4B,EAE3B,IAGF3O,EAAGsuC,aAAa3wC,KAAesoC,IAAezH,EAAU1uC,IAAI,WAC5D,IAAIm/C,EAAQzQ,EAAU1uC,IAAI,CAAC,WAAY,UAEzB,cAAVm/C,KACFv9C,EAAAA,EAAAA,GAAUsO,GAAIivC,MAAQ7M,EAAK8d,yBAnD7B,CAqDF,IACA/sC,EAAK2qB,MAAMyE,UAAS,SAAU7C,GAC5B,IAAI1/B,EAAK0/B,EAAK0F,eACV6J,EAAQvP,EAAK1vC,WAAWF,IAAI,CAAC,WAAY,UAExCkQ,GAIS,cAAVivC,KACFv9C,EAAAA,EAAAA,GAAUsO,GAAIivC,MAAQ,CACpBvP,KAAM,CAACA,EAAKn0B,WACZ62B,KAAM,CAAC1C,EAAKI,MAAMv0B,UAAWm0B,EAAKK,MAAMx0B,YAG9C,IACA,IAAI44B,EAAoD,aAA9B7sC,EAAYxH,IAAI,WAA4BwH,EAAYxH,IAAI,CAAC,WAAY,gBAC/Fs1B,EAAKjS,EAAKuvB,UAAU,MACpBrd,EAAKlS,EAAKuvB,UAAU,MACxBvvB,EAAK2qB,MAAMqE,UAAS,SAAUC,GAC5BgC,GAAgBhC,EAAM+B,EAAqB/e,EAAIC,EACjD,IACAl4B,KAAKsyD,cAAe,CACtB,EAEAN,EAAU3vD,UAAU0K,QAAU,WAC5B/M,KAAKkyD,aAAelyD,KAAKkyD,YAAYnlD,UACrC/M,KAAKmyD,gBAAkB,IACzB,EAEAH,EAAU3vD,UAAUwwD,2BAA6B,SAAU/Z,EAAa8Z,GACtE,IAAIrgC,EAAOvyB,MAEX,SAAUk6C,IACRpB,EAAYoB,MAAK,SAAU+B,GACzB1pB,EAAKmzB,aAAanzB,EAAKggC,SACtBhgC,EAAKugC,YAAc7W,KAAa2W,EAAkBrgC,EAAKogC,eAAiB79B,WAAWolB,EAAM,IAAMA,IAClG,GACD,EALD,EAMF,EAEA8X,EAAU3vD,UAAUqwD,kBAAoB,SAAUvoD,EAAa5H,EAASC,GACtE,IAAI/B,EAAQT,KAERkvD,EAAalvD,KAAKkyD,YAClBzC,EAAiBzvD,KAAKmyD,gBACtB1vD,EAAQzC,KAAKyC,MACjBysD,EAAWxB,mBAAkB,SAAUh9C,EAAGtL,EAAGtB,GAC3C,IAAI6B,EAAOlD,EAAMkB,kBAEjB,OADAgC,EAAK4V,eAAe9Y,EAAM2S,WACnBzP,EAAKw5C,QAAQ/5C,EAAGtB,KAAOssD,GAAoB1/C,EAAGlO,EAAK2H,EAC5D,IAEK4nD,GAAe5nD,EAAYC,mBAKhC8kD,EAAWpC,OAAO3iD,EAAYxH,IAAI,SAClC8sD,EAAejS,UAAYrzC,EAAYxH,IAAI,cAC3C8sD,EAAelS,KAAOpzC,EAAYC,iBAAiBgsC,UACnD8Y,EAAW5B,IAAI,OAAOA,IAAI,QAAQjpD,GAAG,OAAO,SAAUqM,GACpDsiD,GAA2BvD,EAAgB/+C,EAAEe,GAAIf,EAAEgB,IACnDlP,EAAI0P,eAAe,CACjB+gD,SAAU9oD,EAAYe,GACtBtK,KAAM,YACN6Q,GAAIf,EAAEe,GACNC,GAAIhB,EAAEgB,IAEV,IAAGrN,GAAG,QAAQ,SAAUqM,GACtBsiD,GAA4BvD,EAAgB/+C,EAAEhF,MAAOgF,EAAEutC,QAASvtC,EAAEwtC,SAClE17C,EAAI0P,eAAe,CACjB+gD,SAAU9oD,EAAYe,GACtBtK,KAAM,YACN28C,KAAM7sC,EAAEhF,MACRuyC,QAASvtC,EAAEutC,QACXC,QAASxtC,EAAEwtC,UAGbz9C,EAAMgyD,0BAENlB,GAAWpnD,EAAYymC,WAAYoF,GAAmB7rC,IAEtD1J,EAAM4xD,UAAU3M,eAGhBljD,EAAI0wD,mBACN,KAjCEhE,EAAWlC,SAkCf,EAEAgF,EAAU3vD,UAAUowD,wBAA0B,WAC5C,IAAItoD,EAAcnK,KAAKuyD,OACnBvsC,EAAO7b,EAAYQ,UACnB0rC,EAAYL,GAAmB7rC,GACnC6b,EAAK2/B,mBAAkB,SAAU9yC,EAAI2O,GACnC3O,GAAMA,EAAG+wC,eAAevN,EAC1B,GACF,EAEA2b,EAAU3vD,UAAUqjD,aAAe,SAAUv7C,GAC3ConD,GAAWpnD,EAAYymC,WAAYoF,GAAmB7rC,IAEtDnK,KAAKoyD,YAAY1M,eAEjB1lD,KAAKqyD,UAAU3M,cACjB,EAEAsM,EAAU3vD,UAAUuK,OAAS,SAAUrK,EAASC,GAC9CxC,KAAKoyD,aAAepyD,KAAKoyD,YAAYxlD,SACrC5M,KAAKqyD,WAAaryD,KAAKqyD,UAAUzlD,QACnC,EAEAolD,EAAUpxD,KAAO,QACVoxD,CACT,CApPA,CAoPEmB,GAAAA,GAEF,M,WCxQA,SAASC,GAAgBloD,GACvB,MAAO,OAASA,CAClB,CAEA,IAAImoD,GAEJ,WACE,SAASA,EAAMC,GACbtzD,KAAKY,KAAO,QACZZ,KAAKk5C,MAAQ,GACbl5C,KAAKm5C,MAAQ,GACbn5C,KAAKuzD,UAAY,CAAC,EAMlBvzD,KAAKwzD,UAAY,CAAC,EAClBxzD,KAAKyzD,UAAYH,IAAY,CAC/B,CAiRA,OA3QAD,EAAMhxD,UAAUqxD,WAAa,WAC3B,OAAO1zD,KAAKyzD,SACd,EAOAJ,EAAMhxD,UAAUsxD,QAAU,SAAUzoD,EAAIkT,GACtClT,EAAW,MAANA,EAAa,GAAKkT,EAAY,GAAKlT,EACxC,IAAI0oD,EAAW5zD,KAAKuzD,UAEpB,IAAIK,EAASR,GAAgBloD,IAA7B,CAQA,IAAI+pC,EAAO,IAAI4e,GAAU3oD,EAAIkT,GAI7B,OAHA62B,EAAK6e,UAAY9zD,KACjBA,KAAKk5C,MAAMzuC,KAAKwqC,GAChB2e,EAASR,GAAgBloD,IAAO+pC,EACzBA,CANP,CAOF,EAOAoe,EAAMhxD,UAAU25C,eAAiB,SAAU59B,GACzC,IAAI21C,EAAS/zD,KAAKgmB,KAAKmE,YAAY/L,GACnC,OAAOpe,KAAKk5C,MAAM6a,EACpB,EAOAV,EAAMhxD,UAAU2xD,YAAc,SAAU9oD,GACtC,OAAOlL,KAAKuzD,UAAUH,GAAgBloD,GACxC,EAOAmoD,EAAMhxD,UAAU4xD,QAAU,SAAU5gB,EAAIC,EAAIl1B,GAC1C,IAAIw1C,EAAW5zD,KAAKuzD,UAChBW,EAAWl0D,KAAKwzD,UAkBpB,GAhBIvwD,EAAAA,SAAgBowC,KAClBA,EAAKrzC,KAAKk5C,MAAM7F,IAGdpwC,EAAAA,SAAgBqwC,KAClBA,EAAKtzC,KAAKk5C,MAAM5F,IAGZD,aAAcwgB,KAClBxgB,EAAKugB,EAASR,GAAgB/f,KAG1BC,aAAcugB,KAClBvgB,EAAKsgB,EAASR,GAAgB9f,KAG3BD,GAAOC,EAAZ,CAIA,IAAIvqC,EAAMsqC,EAAGnoC,GAAK,IAAMooC,EAAGpoC,GACvBqnC,EAAO,IAAI4hB,GAAU9gB,EAAIC,EAAIl1B,GAgBjC,OAfAm0B,EAAKuhB,UAAY9zD,KAEbA,KAAKyzD,YACPpgB,EAAG+gB,SAAS3pD,KAAK8nC,GACjBe,EAAG0F,QAAQvuC,KAAK8nC,IAGlBc,EAAG8F,MAAM1uC,KAAK8nC,GAEVc,IAAOC,GACTA,EAAG6F,MAAM1uC,KAAK8nC,GAGhBvyC,KAAKm5C,MAAM1uC,KAAK8nC,GAChB2hB,EAASnrD,GAAOwpC,EACTA,CAnBP,CAoBF,EAOA8gB,EAAMhxD,UAAUmwC,eAAiB,SAAUp0B,GACzC,IAAI21C,EAAS/zD,KAAKkyC,SAAS/nB,YAAY/L,GACvC,OAAOpe,KAAKm5C,MAAM4a,EACpB,EAOAV,EAAMhxD,UAAUgyD,QAAU,SAAUhhB,EAAIC,GAClCD,aAAcwgB,KAChBxgB,EAAKA,EAAGnoC,IAGNooC,aAAcugB,KAChBvgB,EAAKA,EAAGpoC,IAGV,IAAIgpD,EAAWl0D,KAAKwzD,UAEpB,OAAIxzD,KAAKyzD,UACAS,EAAS7gB,EAAK,IAAMC,GAEpB4gB,EAAS7gB,EAAK,IAAMC,IAAO4gB,EAAS5gB,EAAK,IAAMD,EAE1D,EAOAggB,EAAMhxD,UAAU2yC,SAAW,SAAUvwB,EAAI6vC,GAIvC,IAHA,IAAIpb,EAAQl5C,KAAKk5C,MACb3rB,EAAM2rB,EAAMnuC,OAEPD,EAAI,EAAGA,EAAIyiB,EAAKziB,IACnBouC,EAAMpuC,GAAGsT,WAAa,GACxBqG,EAAGmc,KAAK0zB,EAASpb,EAAMpuC,GAAIA,EAGjC,EAOAuoD,EAAMhxD,UAAU+yC,SAAW,SAAU3wB,EAAI6vC,GAIvC,IAHA,IAAInb,EAAQn5C,KAAKm5C,MACb5rB,EAAM4rB,EAAMpuC,OAEPD,EAAI,EAAGA,EAAIyiB,EAAKziB,IACnBquC,EAAMruC,GAAGsT,WAAa,GAAK+6B,EAAMruC,GAAG6nC,MAAMv0B,WAAa,GAAK+6B,EAAMruC,GAAG8nC,MAAMx0B,WAAa,GAC1FqG,EAAGmc,KAAK0zB,EAASnb,EAAMruC,GAAIA,EAGjC,EAQAuoD,EAAMhxD,UAAUkyD,qBAAuB,SAAU9vC,EAAI+vC,EAAW//C,EAAW6/C,GAKzE,GAJME,aAAqBX,KACzBW,EAAYx0D,KAAKuzD,UAAUH,GAAgBoB,KAGxCA,EAAL,CAMA,IAFA,IAAIC,EAAyB,QAAdhgD,EAAsB,WAA2B,OAAdA,EAAqB,UAAY,QAE1E3J,EAAI,EAAGA,EAAI9K,KAAKk5C,MAAMnuC,OAAQD,IACrC9K,KAAKk5C,MAAMpuC,GAAG4pD,WAAY,EAG5B,IAAIjwC,EAAGmc,KAAK0zB,EAASE,EAAW,MAAhC,CAIA,IAAIG,EAAQ,CAACH,GAEb,MAAOG,EAAM5pD,OACX,KAAI6pD,EAAcD,EAAME,QACpB1b,EAAQyb,EAAYH,GAExB,IAAS3pD,EAAI,EAAGA,EAAIquC,EAAMpuC,OAAQD,IAAK,CACrC,IAAI4F,EAAIyoC,EAAMruC,GACVgqD,EAAYpkD,EAAEiiC,QAAUiiB,EAAclkD,EAAEkiC,MAAQliC,EAAEiiC,MAEtD,IAAKmiB,EAAUJ,UAAW,CACxB,GAAIjwC,EAAGmc,KAAK0zB,EAASQ,EAAWF,GAE9B,OAGFD,EAAMlqD,KAAKqqD,GACXA,EAAUJ,WAAY,CACxB,CACF,CAhB+B,CALjC,CAVA,CAiCF,EASArB,EAAMhxD,UAAU4pB,OAAS,WAMvB,IALA,IAAIjG,EAAOhmB,KAAKgmB,KACZksB,EAAWlyC,KAAKkyC,SAChBgH,EAAQl5C,KAAKk5C,MACbC,EAAQn5C,KAAKm5C,MAERruC,EAAI,EAAGyiB,EAAM2rB,EAAMnuC,OAAQD,EAAIyiB,EAAKziB,IAC3CouC,EAAMpuC,GAAGsT,WAAa,EAGxB,IAAStT,EAAI,EAAGyiB,EAAMvH,EAAKpb,QAASE,EAAIyiB,EAAKziB,IAC3CouC,EAAMlzB,EAAKmE,YAAYrf,IAAIsT,UAAYtT,EAGzConC,EAASlB,YAAW,SAAUxvB,GAC5B,IAAI+wB,EAAO4G,EAAMjH,EAAS/nB,YAAY3I,IACtC,OAAO+wB,EAAKI,MAAMv0B,WAAa,GAAKm0B,EAAKK,MAAMx0B,WAAa,CAC9D,IAEA,IAAStT,EAAI,EAAGyiB,EAAM4rB,EAAMpuC,OAAQD,EAAIyiB,EAAKziB,IAC3CquC,EAAMruC,GAAGsT,WAAa,EAGxB,IAAStT,EAAI,EAAGyiB,EAAM2kB,EAAStnC,QAASE,EAAIyiB,EAAKziB,IAC/CquC,EAAMjH,EAAS/nB,YAAYrf,IAAIsT,UAAYtT,CAE/C,EAOAuoD,EAAMhxD,UAAUqH,MAAQ,WAKtB,IAJA,IAAIinC,EAAQ,IAAI0iB,EAAMrzD,KAAKyzD,WACvBva,EAAQl5C,KAAKk5C,MACbC,EAAQn5C,KAAKm5C,MAERruC,EAAI,EAAGA,EAAIouC,EAAMnuC,OAAQD,IAChC6lC,EAAMgjB,QAAQza,EAAMpuC,GAAGI,GAAIguC,EAAMpuC,GAAGsT,WAGtC,IAAStT,EAAI,EAAGA,EAAIquC,EAAMpuC,OAAQD,IAAK,CACrC,IAAI4F,EAAIyoC,EAAMruC,GACd6lC,EAAMsjB,QAAQvjD,EAAEiiC,MAAMznC,GAAIwF,EAAEkiC,MAAM1nC,GAAIwF,EAAE0N,UAC1C,CAEA,OAAOuyB,CACT,EAGO0iB,CACT,CA/RA,GAiSIQ,GAEJ,WACE,SAASA,EAAU3oD,EAAIkT,GACrBpe,KAAKg5C,QAAU,GACfh5C,KAAKo0D,SAAW,GAChBp0D,KAAKm5C,MAAQ,GACbn5C,KAAKoe,WAAa,EAClBpe,KAAKkL,GAAW,MAANA,EAAa,GAAKA,EAC5BlL,KAAKoe,UAAyB,MAAbA,GAAqB,EAAIA,CAC5C,CAwDA,OAlDAy1C,EAAUxxD,UAAU0yD,OAAS,WAC3B,OAAO/0D,KAAKm5C,MAAMpuC,MACpB,EAMA8oD,EAAUxxD,UAAU2yD,SAAW,WAC7B,OAAOh1D,KAAKg5C,QAAQjuC,MACtB,EAMA8oD,EAAUxxD,UAAU4yD,UAAY,WAC9B,OAAOj1D,KAAKo0D,SAASrpD,MACvB,EAEA8oD,EAAUxxD,UAAUQ,SAAW,SAAUqyD,GACvC,KAAIl1D,KAAKoe,UAAY,GAArB,CAIA,IAAIuyB,EAAQ3wC,KAAK8zD,UACbziB,EAAYV,EAAM3qB,KAAKuS,aAAav4B,KAAKoe,WAC7C,OAAOizB,EAAUxuC,SAASqyD,EAJ1B,CAKF,EAEArB,EAAUxxD,UAAU0wD,uBAAyB,WAM3C,IALA,IAAIppC,EAAc,CAChB4oB,KAAM,GACN0C,KAAM,IAGCnqC,EAAI,EAAGA,EAAI9K,KAAKm5C,MAAMpuC,OAAQD,IAAK,CAC1C,IAAIqqD,EAAen1D,KAAKm5C,MAAMruC,GAE1BqqD,EAAa/2C,UAAY,IAI7BuL,EAAY4oB,KAAK9nC,KAAK0qD,EAAa/2C,WACnCuL,EAAYsrB,KAAKxqC,KAAK0qD,EAAaxiB,MAAMv0B,UAAW+2C,EAAaviB,MAAMx0B,WACzE,CAEA,OAAOuL,CACT,EAEOkqC,CACT,CAjEA,GAmEIM,GAEJ,WACE,SAASA,EAAU9gB,EAAIC,EAAIl1B,GACzBpe,KAAKoe,WAAa,EAClBpe,KAAK2yC,MAAQU,EACbrzC,KAAK4yC,MAAQU,EACbtzC,KAAKoe,UAAyB,MAAbA,GAAqB,EAAIA,CAC5C,CAoBA,OAjBA+1C,EAAU9xD,UAAUQ,SAAW,SAAUqyD,GACvC,KAAIl1D,KAAKoe,UAAY,GAArB,CAIA,IAAIuyB,EAAQ3wC,KAAK8zD,UACbziB,EAAYV,EAAMuB,SAAS3Z,aAAav4B,KAAKoe,WACjD,OAAOizB,EAAUxuC,SAASqyD,EAJ1B,CAKF,EAEAf,EAAU9xD,UAAU0wD,uBAAyB,WAC3C,MAAO,CACLxgB,KAAM,CAACvyC,KAAKoe,WACZ62B,KAAM,CAACj1C,KAAK2yC,MAAMv0B,UAAWpe,KAAK4yC,MAAMx0B,WAE5C,EAEO+1C,CACT,CA3BA,GA6BA,SAASiB,GAA0BC,EAAUxrB,GAC3C,MAAO,CAIL6N,SAAU,SAAU4d,GAClB,IAAItvC,EAAOhmB,KAAKq1D,GAAUxrB,GAC1B,OAAO7jB,EAAKimC,WAAWtpD,IAAIqjB,EAAKuvC,kBAAkBD,GAAa,SAAUt1D,KAAKoe,UAChF,EAEAk0B,UAAW,SAAUvpC,EAAK8C,GACxB7L,KAAKoe,WAAa,GAAKpe,KAAKq1D,GAAUxrB,GAAU0H,cAAcvxC,KAAKoe,UAAWrV,EAAK8C,EACrF,EACAo6B,UAAW,SAAUl9B,GACnB,OAAO/I,KAAKq1D,GAAUxrB,GAAUlD,cAAc3mC,KAAKoe,UAAWrV,EAChE,EACAmsC,UAAW,SAAUn0B,EAAQy0C,GAC3Bx1D,KAAKoe,WAAa,GAAKpe,KAAKq1D,GAAUxrB,GAAUiM,cAAc91C,KAAKoe,UAAW2C,EAAQy0C,EACxF,EACAjgB,UAAW,WACT,OAAOv1C,KAAKq1D,GAAUxrB,GAAU8R,cAAc37C,KAAKoe,UACrD,EACA65B,aAAc,WACZ,OAAOj4C,KAAKq1D,GAAUxrB,GAAU3jB,iBAAiBlmB,KAAKoe,UACxD,EACA+L,YAAa,WACX,OAAOnqB,KAAKq1D,GAAUxrB,GAAU1f,YAAYnqB,KAAKoe,UACnD,EAEJ,CAKAnb,EAAAA,MAAa4wD,GAAWuB,GAA0B,YAAa,SAC/DnyD,EAAAA,MAAakxD,GAAWiB,GAA0B,YAAa,aAC/D,UC3aI9nD,IAAQC,EAAAA,EAAAA,MAEZ,SAASkoD,GAAehiD,GACtB,IAAIiiD,EAAWjiD,EAAIiiD,SACfC,EAAQliD,EAAIkiD,MAEXA,IACHA,EAAQ,CACNC,KAAMF,GAERjiD,EAAIoiD,UAAY,CACdD,KAAM,SAIVniD,EAAIkiD,MAAQliD,EAAIiiD,SAAW,KAC3BI,GAAQJ,EAAUC,EAAOliD,IAEzBxM,EAAAA,EAAAA,MAAK0uD,GAAO,SAAU3vC,IACpB/e,EAAAA,EAAAA,MAAKyuD,EAASK,sBAAsB,SAAUtrB,GAC5CzkB,EAAKgwC,WAAWvrB,GAAY7iC,EAAAA,EAAAA,OAAMquD,GAAmBxiD,GACvD,GACF,IAEAiiD,EAASM,WAAW,gBAAgBpuD,EAAAA,EAAAA,OAAMsuD,GAAuBziD,KAGjExM,EAAAA,EAAAA,MAAKyuD,EAASS,mBAAmB,SAAU1rB,GACzCirB,EAASM,WAAWvrB,GAAY7iC,EAAAA,EAAAA,OAAMwuD,GAAiB3iD,GACzD,KAEA4iD,EAAAA,EAAAA,QAAOV,EAAMD,EAASl6B,YAAck6B,EACtC,CAEA,SAASO,GAAkBxiD,EAAK6iD,GAC9B,GAAIC,GAAWv2D,MAAO,CAEpB,IAAI21D,GAAQlgD,EAAAA,EAAAA,QAAO,CAAC,EAAGnI,GAAMtN,MAAM21D,OACnCA,EAAM31D,KAAKw7B,UAAY86B,EACvBR,GAAQQ,EAAKX,EAAOliD,EACtB,MAEE+iD,GAAWF,EAAKt2D,KAAKw7B,SAAUluB,GAAMtN,MAAM01D,SAAUjiD,GAGvD,OAAO6iD,CACT,CAEA,SAASF,GAAgB3iD,EAAK6iD,GAE5B,OADA7iD,EAAIgjD,QAAUhjD,EAAIgjD,OAAOxqC,SAClBqqC,CACT,CAEA,SAASJ,GAAsBziD,EAAK6iD,GAQlC,OAHArvD,EAAAA,EAAAA,MAAKqG,GAAMgpD,GAAKX,OAAO,SAAU3vC,EAAMwV,GACrCxV,IAASswC,GAAOE,GAAWxwC,EAAK0wC,eAAgBl7B,EAAU86B,EAAK7iD,EACjE,IACO6iD,CACT,CASA,SAASK,GAAcn7B,GACrB,IAAIk6B,EAAWpoD,GAAMtN,MAAM01D,SAC3B,OAAmB,MAAZl6B,GAAgC,MAAZk6B,EAAmBA,EAAWpoD,GAAMooD,GAAUC,MAAMn6B,EACjF,CAMA,SAASo7B,KACP,IAAIlB,EAAWpoD,GAAMtN,MAAM01D,SAC3B,OAAmB,MAAZA,EAAmB,CAAC,CACzB1vC,KAAM0vC,KACHz9C,EAAAA,EAAAA,MAAIqnB,EAAAA,EAAAA,MAAKhyB,GAAMooD,GAAUC,QAAQ,SAAU/0D,GAC9C,MAAO,CACLA,KAAMA,EACNolB,KAAM1Y,GAAMooD,GAAUC,MAAM/0D,GAEhC,GACF,CAEA,SAAS21D,GAAWvwC,GAClB,OAAO1Y,GAAM0Y,GAAM0vC,WAAa1vC,CAClC,CAEA,SAAS8vC,GAAQJ,EAAUC,EAAOliD,GAChCnG,GAAMooD,GAAUC,MAAQ,CAAC,GACzB1uD,EAAAA,EAAAA,MAAK0uD,GAAO,SAAU3vC,EAAMwV,GAC1Bg7B,GAAWxwC,EAAMwV,EAAUk6B,EAAUjiD,EACvC,GACF,CAEA,SAAS+iD,GAAWxwC,EAAMwV,EAAUk6B,EAAUjiD,GAC5CnG,GAAMooD,GAAUC,MAAMn6B,GAAYxV,EAClC1Y,GAAM0Y,GAAM0vC,SAAWA,EACvB1vC,EAAKwV,SAAWA,EAEZ/nB,EAAIgjD,SACNzwC,EAAKvS,EAAIojD,YAAcpjD,EAAIgjD,OAC3BhjD,EAAIgjD,OAAOhjD,EAAIoiD,UAAUr6B,IAAaxV,GAIxCA,EAAK2wC,cAAgBA,GACrB3wC,EAAK4wC,iBAAmBA,EAC1B,CAEA,U,iCCpHe,SAASE,GAAwB5d,EAAOC,EAAOhvC,EAAampD,EAAUyD,GAKnF,IAFA,IAAIpmB,EAAQ,IAAI0iB,GAAMC,GAEbxoD,EAAI,EAAGA,EAAIouC,EAAMnuC,OAAQD,IAChC6lC,EAAMgjB,QAAQ1wD,EAAAA,SACdi2C,EAAMpuC,GAAGI,GAAIguC,EAAMpuC,GAAGK,KAAML,GAAIA,GAGlC,IAAIksD,EAAe,GACfC,EAAa,GACbC,EAAY,EAEhB,IAASpsD,EAAI,EAAGA,EAAIquC,EAAMpuC,OAAQD,IAAK,CACrC,IAAI7G,EAAOk1C,EAAMruC,GACbyoC,EAAStvC,EAAKsvC,OACdnyC,EAAS6C,EAAK7C,OAEduvC,EAAMsjB,QAAQ1gB,EAAQnyC,EAAQ81D,KAChCD,EAAWxsD,KAAKxG,GAChB+yD,EAAavsD,KAAKxH,EAAAA,UAAgBk0D,EAAAA,EAAAA,IAAoBlzD,EAAKiH,GAAI,MAAOqoC,EAAS,MAAQnyC,IACvF81D,IAEJ,CAEA,IACIvgB,EADAxvC,EAAWgD,EAAYxH,IAAI,oBAG/B,GAAiB,gBAAbwE,GAA2C,UAAbA,EAChCwvC,GAAWygB,EAAAA,GAAAA,GAAiBle,EAAO/uC,OAC9B,CACL,IAAIktD,EAAeC,GAAAA,EAAAA,IAAqBnwD,GACpCowD,EAAkBF,GAAeA,EAAapwC,YAAmB,GAIjEhkB,EAAAA,QAAes0D,EAAiB,SAAW,GAC7CA,EAAgBv1B,OAAO,CAAC,UAG1B,IAAI/a,GAAauwC,EAAAA,GAAAA,GAAwBte,EAAO,CAC9Cqe,gBAAiBA,EACjBE,aAActtD,EAAYutD,cACzBzwC,WACH0vB,EAAW,IAAIghB,GAAAA,EAAW1wC,EAAY9c,GACtCwsC,EAASihB,SAAS1e,EACpB,CAEA,IAAIhH,EAAW,IAAIylB,GAAAA,EAAW,CAAC,SAAUxtD,GAkBzC,OAjBA+nC,EAAS0lB,SAASX,EAAYD,GAC9BD,GAAcA,EAAWpgB,EAAUzE,GACnCujB,GAAe,CACbC,SAAU/e,EACV8f,OAAQ9lB,EACRkmB,WAAY,QACZlB,MAAO,CACL1gB,KAAM0B,EACNpE,KAAML,GAER2jB,UAAW,CACT5gB,KAAM,OACN1C,KAAM,cAIV5B,EAAM1kB,SACC0kB,CACT,CCvEA,IAAIknB,GAEJ,WACE,SAASA,EACTC,EACAC,GACE/3D,KAAKg4D,0BAA4BF,EACjC93D,KAAKi4D,YAAcF,CACrB,CAgCA,OA9BAF,EAAqBx1D,UAAUy/B,YAAc,WAC3C,IAAIK,EAAUniC,KAAKi4D,cAInB,OAAO91B,EAAQ2O,SAAS3O,EAAQ4O,QAClC,EAEA8mB,EAAqBx1D,UAAUokC,YAAc,SAAUt7B,GACrD,IAAIg3B,EAAUniC,KAAKi4D,cAEnB,OAAO91B,EAAQuE,YAAYv7B,IAAS,CACtC,EAEA0sD,EAAqBx1D,UAAUqkC,YAAc,SAAUv7B,GAIrD,IAAI+sD,EAAwBl4D,KAAKg4D,4BAEjC,OAAOE,EAAsBxxB,YAAYv7B,EAC3C,EAEA0sD,EAAqBx1D,UAAUskC,cAAgB,SAAUvoB,EAAWrV,GAElE,IAAImvD,EAAwBl4D,KAAKg4D,4BAEjC,OAAOE,EAAsBvxB,cAAcvoB,EAAWrV,EACxD,EAEO8uD,CACT,CAvCA,GAyCA,M,qBCpCIM,GAEJ,SAAU33D,GAGR,SAAS23D,IACP,IAAI13D,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMV,KAAMW,YAAcX,KAIhE,OAFAS,EAAMG,KAAOu3D,EAAiBv3D,KAC9BH,EAAM23D,iBAAkB,EACjB33D,CACT,CAiPA,OAzPAM,EAAAA,EAAAA,IAAUo3D,EAAkB33D,GAU5B23D,EAAiB91D,UAAU6zB,KAAO,SAAUvqB,GAC1CnL,EAAO6B,UAAU6zB,KAAKx1B,MAAMV,KAAMW,WAElC,IAAI4xB,EAAOvyB,KAEX,SAAS0wC,IACP,OAAOne,EAAK8lC,eACd,CAGAr4D,KAAK2hC,qBAAuB,IAAIk2B,GAAqBnnB,EAAmBA,GACxE1wC,KAAKs4D,kBAAkB3sD,EAAOwtC,OAASxtC,EAAO4sD,OAE9Cv4D,KAAKw4D,uBACP,EAEAL,EAAiB91D,UAAUs+B,YAAc,SAAUh1B,GACjDnL,EAAO6B,UAAUs+B,YAAYjgC,MAAMV,KAAMW,WAEzCX,KAAKs4D,kBAAkB3sD,EAAOwtC,OAASxtC,EAAO4sD,OAE9Cv4D,KAAKw4D,uBACP,EAEAL,EAAiB91D,UAAUm+B,qBAAuB,SAAU70B,GAC1DnL,EAAO6B,UAAUm+B,qBAAqB9/B,MAAMV,KAAMW,YAElD83D,EAAAA,EAAAA,IAAgB9sD,EAAQ,YAAa,CAAC,QACxC,EAEAwsD,EAAiB91D,UAAUq2D,eAAiB,SAAU/sD,EAAQpJ,GAC5D,IAAI42C,EAAQxtC,EAAOwtC,OAASxtC,EAAO4sD,OAAS,GACxCrf,EAAQvtC,EAAOqa,MAAQra,EAAOutC,OAAS,GACvC3mB,EAAOvyB,KAEX,GAAIk5C,GAASC,EAAO,CAElBnF,GAAkBh0C,MAClB,IAAI2wC,EAAQmmB,GAAwB5d,EAAOC,EAAOn5C,MAAM,EAAM+2D,GAI9D,OAHA9zD,EAAAA,KAAY0tC,EAAMwI,OAAO,SAAU5G,GACjC0B,GAA0B1B,EAAKI,MAAOJ,EAAKK,MAAO5yC,KAAMuyC,EAAKn0B,UAC/D,GAAGpe,MACI2wC,EAAM3qB,IACf,CAEA,SAAS+wC,EAAWpgB,EAAUzE,GAE5ByE,EAASqf,WAAW,gBAAgB,SAAUzuD,GAC5C,IAAIoxD,EAAmBpmC,EAAKqmC,kBACxBlnB,EAAcnqC,EAAM0W,WAAW,YAC/B46C,EAAgBF,EAAiBjnB,GAOrC,OALImnB,IACFA,EAAct4B,YAAch5B,EAAMg5B,YAClCh5B,EAAMg5B,YAAcs4B,GAGftxD,CACT,IAEA,IAAIuxD,EAAc7uD,EAAAA,EAAAA,UAAAA,SAElB,SAAS8uD,EAAY7D,EAAM30B,GACzB,IAAIh5B,EAAQuxD,EAAYl4B,KAAK5gC,KAAMk1D,EAAM30B,GAEzC,OADAh5B,EAAMyxD,kBAAoBA,EACnBzxD,CACT,CAQA,SAASyxD,EAAkBC,GACzB,GAAIA,IAA2B,UAAfA,EAAQ,IAAiC,UAAfA,EAAQ,IAAiB,CACjE,IAAIC,EAAaD,EAAQhtD,QAQzB,MANmB,UAAfgtD,EAAQ,GACVC,EAAW,GAAK,YACQ,UAAfD,EAAQ,KACjBC,EAAW,GAAK,aAGXA,CACT,CAEA,OAAOD,CACT,CApBA/mB,EAAS8jB,WAAW,gBAAgB,SAAUzuD,GAG5C,OAFAA,EAAMyxD,kBAAoBA,EAC1BzxD,EAAM1E,SAAWk2D,EACVxxD,CACT,GAiBF,CACF,EAEA4wD,EAAiB91D,UAAUuuC,SAAW,WACpC,OAAO5wC,KAAK2K,UAAUgmC,KACxB,EAEAwnB,EAAiB91D,UAAU8vC,YAAc,WACvC,OAAOnyC,KAAK4wC,WAAWsB,QACzB,EAEAimB,EAAiB91D,UAAUquC,kBAAoB,WAC7C,OAAO1wC,KAAKq4D,eACd,EAEAF,EAAiB91D,UAAUk4B,cAAgB,SAAUnc,EAAW+6C,EAAgB39B,GAC9E,GAAiB,SAAbA,EAAqB,CACvB,IAAImb,EAAW32C,KAAK2K,UAChB+wB,EAAS17B,KAAKmgB,cAAc/B,EAAWod,GACvC+W,EAAOoE,EAAShG,MAAM6B,eAAep0B,GACrCg7C,EAAaziB,EAAS5F,QAAQwB,EAAKI,MAAMv0B,WACzCi7C,EAAa1iB,EAAS5F,QAAQwB,EAAKK,MAAMx0B,WACzCk7C,EAAU,GAGd,OAFc,MAAdF,GAAsBE,EAAQ7uD,KAAK2uD,GACrB,MAAdC,GAAsBC,EAAQ7uD,KAAK4uD,IAC5BjgC,EAAAA,GAAAA,IAAoB,YAAa,CACtCjuB,KAAMmuD,EAAQjqC,KAAK,OACnBxjB,MAAO6vB,EAAO7vB,MACd0tD,QAAyB,MAAhB79B,EAAO7vB,OAEpB,CAGA,IAAI2tD,GAAaC,EAAAA,GAAAA,GAA2B,CAC1C35C,OAAQ9f,KACRoe,UAAWA,EACX+6C,eAAgBA,IAElB,OAAOK,CACT,EAEArB,EAAiB91D,UAAUm2D,sBAAwB,WACjD,IAAIkB,EAAaz2D,EAAAA,IAAWjD,KAAK2L,OAAO+tD,YAAc,IAAI,SAAUzoB,GAElE,OAAyB,MAAlBA,EAASplC,MAAgBolC,EAAWhuC,EAAAA,OAAc,CACvD4I,MAAO,GACNolC,EACL,IACIR,EAAiB,IAAIknB,GAAAA,EAAW,CAAC,SAAU33D,MAC/CywC,EAAemnB,SAAS8B,GACxB15D,KAAKq4D,gBAAkB5nB,EACvBzwC,KAAK44D,kBAAoBnoB,EAAeK,UAAS,SAAUtvB,GACzD,OAAOivB,EAAelY,aAAa/W,EACrC,GACF,EAEA22C,EAAiB91D,UAAUi7C,QAAU,SAAUC,GAC7Cv9C,KAAK2L,OAAO4xC,KAAOA,CACrB,EAEA4a,EAAiB91D,UAAU66C,UAAY,SAAU9D,GAC/Cp5C,KAAK2L,OAAOytC,OAASA,CACvB,EAEA+e,EAAiB91D,UAAUs3D,mBAAqB,WAC9C,OAAOn5D,EAAO6B,UAAUs3D,mBAAmB/4B,KAAK5gC,SACpB,UAAvBA,KAAK2C,IAAI,WAAyB3C,KAAK2C,IAAI,CAAC,QAAS,oBAC5D,EAEAw1D,EAAiBv3D,KAAO,eACxBu3D,EAAiBhsC,aAAe,CAAC,OAAQ,QAAS,MAAO,aAAc,YACvEgsC,EAAiBn3D,cAAgB,CAE/BC,EAAG,EACHmJ,iBAAkB,OAMlBwvD,iBAAiB,EACjB74C,OAAQ,KAER84C,SAAU,CACRC,aAAa,GAGfC,MAAO,CACL9e,WAAY,KAEZK,UAAW,CAAC,EAAG,IACfjC,QAAS,GAETO,SAAU,GAEV2B,WAAY,GACZqX,iBAAiB,GAEnBrxD,KAAM,SACNC,IAAK,SAKL0V,OAAQ,SACRm7B,WAAY,GACZ2nB,WAAY,CAAC,OAAQ,QACrBC,eAAgB,GAChBC,UAAW,CACTlmD,SAAU,SACVs1C,SAAU,GAEZ94C,WAAW,EACXmuC,MAAM,EAENvF,OAAQ,KACRmE,KAAM,EAENtH,eAAgB,GAUhBrsC,MAAO,CACL1I,MAAM,EACN2d,UAAW,OAEbukB,UAAW,CAAC,EACZr5B,UAAW,CACT9H,MAAO,OACP8C,MAAO,EACP6vB,QAAS,IAEXmP,SAAU,CACRr4B,OAAO,EACP9B,MAAO,CACL1I,MAAM,IAGVmgC,OAAQ,CACN+B,UAAW,CACT1hC,YAAa,aAIZy2D,CACT,CA3PA,CA2PEgC,GAAAA,GAEF,MC3QA,SAASC,GAAev6B,EAAM7oB,GAE5B,OAAO6oB,EAAKw6B,iBAAmBx6B,EAAKw6B,iBAAiBrjD,GAAS6oB,EAAK1X,YAAYnR,EACjF,CAEO,SAASsjD,GAAoBz6B,EAAMtzB,EAASixC,EAAWh7C,GAC5D,IAAI+3D,EAAe16B,EAAKuW,UACpBgD,EAASvZ,EAAK+d,YACdL,EAAOhxC,EAAQgxC,KACfvmC,EAAQ6oB,EAAK26B,iBAAmB36B,EAAK26B,iBAAiBphB,GAAUvZ,EAAKzZ,YAAYgzB,GAQrF,GANkB,MAAd7sC,EAAQkF,IAA4B,MAAdlF,EAAQmF,KAChCsF,EAAM,IAAMzK,EAAQkF,GACpBuF,EAAM,IAAMzK,EAAQmF,GACpBmuB,EAAKqd,UAAUkd,GAAev6B,EAAM7oB,GAAQxU,IAGlC,MAAR+6C,EAAc,CAChB,GAAIC,EAAW,CACb,IAAIuS,EAAUvS,EAAUn+B,KAAO,EAC3B2wC,EAAUxS,EAAUl+B,KAAO2wC,IAC/B1S,EAAO5tC,KAAK2P,IAAI3P,KAAK0P,IAAIk7C,EAAehd,EAAMyS,GAAUD,GAAWwK,CACrE,CAGA16B,EAAK1uB,QAAUosC,EACf1d,EAAKzuB,QAAUmsC,EACf,IAAIkd,GAAQluD,EAAQ0xC,QAAUpe,EAAKz6B,IAAMm4C,EAAO,GAC5Cmd,GAAQnuD,EAAQ2xC,QAAUre,EAAK/7B,IAAMy5C,EAAO,GAChD1d,EAAKz6B,GAAKq1D,EACV56B,EAAK/7B,GAAK42D,EACV76B,EAAK5rB,kBAEL4rB,EAAKqd,UAAUkd,GAAev6B,EAAM7oB,GAAQxU,GAC5Cq9B,EAAKyd,QAAQC,EAAOgd,EACtB,CAEA,MAAO,CACLnhB,OAAQvZ,EAAK+d,YACbL,KAAM1d,EAAKuW,UAEf,CC7BA,IAAIukB,GAAa,CACf/5D,KAAM,YACNgQ,MAAO,YACPqb,OAAQ,QAEH,SAASjmB,GAAQC,GACtBA,EAAU20D,kBAAkB5I,IAC5B/rD,EAAU40D,oBAAoB1C,IAC9BlyD,EAAU2lB,kBAAkB0kB,IAC5BrqC,EAAU60D,eAAe5pB,IACzBjrC,EAAU60D,eAAeC,IACzB90D,EAAU+0D,eAAejmB,IACzB9uC,EAAU+0D,eAAe/0D,EAAU4lB,SAASovC,OAAOC,kBAAmB1kB,IACtEvwC,EAAU+0D,eAAeliB,IACzB7yC,EAAUk1D,yBAAyB,YAAa,CAC9Cl0C,WAAYk1B,GAAAA,WACZ57B,OAAQ66C,KAGVn1D,EAAU+lB,eAAe,CACvBprB,KAAM,qBACNgQ,MAAO,qBACPqb,OAAQ,6BACPiU,EAAAA,MACHj6B,EAAU+lB,eAAe,CACvBprB,KAAM,uBACNgQ,MAAO,uBACPqb,OAAQ,+BACPiU,EAAAA,MAEHj6B,EAAU+lB,eAAe2uC,IAAY,SAAUpuD,EAAShK,EAASC,GAC/DD,EAAQqoC,cAAc,CACpB91B,SAAU,SACVq7B,MAAO5jC,IACN,SAAUpC,GACX,IAAIhD,EAAWgD,EAAYC,iBACvBksD,EAAMgE,GAAoBnzD,EAAUoF,OAAS8uD,EAAW74D,GAC5D2H,EAAY+yC,WAAa/yC,EAAY+yC,UAAUoZ,EAAIld,QACnDjvC,EAAYmzC,SAAWnzC,EAAYmzC,QAAQgZ,EAAI/Y,KACjD,GACF,GACF,C,sECvFA,SAAS+d,GAAUpwD,EAAI+lB,EAASsqC,GAC5B,IAAIC,EAASC,GAAAA,GAAAA,eACT12D,EAAQksB,EAAQ/rB,WAChBnB,EAASktB,EAAQ9rB,YACjBu2D,EAAcF,EAAOp4D,MAWzB,OAVIs4D,IACAA,EAAY1nD,SAAW,WACvB0nD,EAAYn6D,KAAO,IACnBm6D,EAAYl6D,IAAM,IAClBk6D,EAAY32D,MAAQA,EAAQ,KAC5B22D,EAAY33D,OAASA,EAAS,KAC9By3D,EAAOG,aAAa,iBAAkBzwD,IAE1CswD,EAAOz2D,MAAQA,EAAQw2D,EACvBC,EAAOz3D,OAASA,EAASw3D,EAClBC,CACX,CAEA,IAAII,GAAS,SAAUp7D,GAEnB,SAASo7D,EAAM1wD,EAAI+lB,EAASsqC,GACxB,IAiBIM,EAjBAp7D,EAAQD,EAAOogC,KAAK5gC,OAASA,KACjCS,EAAMq7D,YAAa,EACnBr7D,EAAMs7D,eAAiB,GACvBt7D,EAAM86D,IAAM,EACZ96D,EAAMu7D,SAAU,EAChBv7D,EAAMw7D,OAAS,CAAC,EAChBx7D,EAAMylD,aAAc,EACpBzlD,EAAM4S,OAAS,EACf5S,EAAMy7D,oBAAsB,EAC5Bz7D,EAAMwpD,SAAU,EAChBxpD,EAAM07D,kBAAmB,EACzB17D,EAAM27D,QAAS,EACf37D,EAAM47D,YAAc,EACpB57D,EAAM67D,aAAe,EACrB77D,EAAM87D,WAAa,EACnB97D,EAAM+7D,iBAAmB,KACzB/7D,EAAMg8D,eAAiB,KAEvBlB,EAAMA,GAAOmB,GAAAA,GACK,kBAAPxxD,EACP2wD,EAAMP,GAAUpwD,EAAI+lB,EAASsqC,GAExBoB,EAAK9+C,SAAS3S,KACnB2wD,EAAM3wD,EACNA,EAAK2wD,EAAI3wD,IAEbzK,EAAMyK,GAAKA,EACXzK,EAAMo7D,IAAMA,EACZ,IAAI3oC,EAAW2oC,EAAIz4D,MAUnB,OATI8vB,IACAypC,EAAKC,kBAAkBf,GACvBA,EAAIgB,cAAgB,WAAc,OAAO,CAAO,EAChD3pC,EAAStxB,QAAU,IACnBsxB,EAASztB,OAAS,IAClBytB,EAASvxB,YAAc,KAE3BlB,EAAMwwB,QAAUA,EAChBxwB,EAAM86D,IAAMA,EACL96D,CACX,CA4NA,OArQAM,EAAAA,GAAAA,IAAU66D,EAAOp7D,GA0CjBo7D,EAAMv5D,UAAUy6D,gBAAkB,WAC9B,OAAO98D,KAAKu8D,WAAav8D,KAAKs8D,YAClC,EACAV,EAAMv5D,UAAU06D,WAAa,WACzB/8D,KAAKw8D,iBAAmBx8D,KAAKs8D,aAC7Bt8D,KAAKy8D,eAAiBz8D,KAAKu8D,UAC/B,EACAX,EAAMv5D,UAAU26D,YAAc,WAC1Bh9D,KAAKmnD,IAAMnnD,KAAK67D,IAAIoB,WAAW,MAC/Bj9D,KAAKmnD,IAAIoU,IAAMv7D,KAAKu7D,GACxB,EACAK,EAAMv5D,UAAU66D,aAAe,WAC3Bl9D,KAAKm8D,kBAAmB,CAC5B,EACAP,EAAMv5D,UAAU86D,iBAAmB,WAC/B,IAAI5B,EAAMv7D,KAAKu7D,IACfv7D,KAAKo9D,QAAU9B,GAAU,QAAUt7D,KAAKkL,GAAIlL,KAAKixB,QAASsqC,GAC1Dv7D,KAAKq9D,QAAUr9D,KAAKo9D,QAAQH,WAAW,MAC3B,IAAR1B,GACAv7D,KAAKq9D,QAAQ3xD,MAAM6vD,EAAKA,EAEhC,EACAK,EAAMv5D,UAAUi7D,mBAAqB,SAAUC,EAAaC,EAAUr+C,EAAWC,GAC7E,GAAIpf,KAAKm8D,iBAEL,OADAn8D,KAAKm8D,kBAAmB,EACjB,KAEX,IAkFIsB,EAlFAC,EAAqB,GACrBxB,EAAsBl8D,KAAKk8D,oBAC3ByB,GAAO,EACPC,EAAc,IAAInhB,GAAAA,EAAa,EAAG,EAAG,EAAG,GAC5C,SAASohB,EAAmBl4D,GACxB,GAAKA,EAAKsT,aAActT,EAAKm4D,SAG7B,GAAkC,IAA9BJ,EAAmB3yD,OAAc,CACjC,IAAIgzD,EAAe,IAAIthB,GAAAA,EAAa,EAAG,EAAG,EAAG,GAC7CshB,EAAa1f,KAAK14C,GAClB+3D,EAAmBjzD,KAAKszD,EAC5B,KACK,CAID,IAHA,IAAIC,GAAW,EACXC,EAAehO,IACfiO,EAAqB,EAChBpzD,EAAI,EAAGA,EAAI4yD,EAAmB3yD,SAAUD,EAAG,CAChD,IAAIqzD,EAAaT,EAAmB5yD,GACpC,GAAIqzD,EAAW1iD,UAAU9V,GAAO,CAC5B,IAAIy4D,EAAgB,IAAI3hB,GAAAA,EAAa,EAAG,EAAG,EAAG,GAC9C2hB,EAAc/f,KAAK8f,GACnBC,EAAcC,MAAM14D,GACpB+3D,EAAmB5yD,GAAKszD,EACxBJ,GAAW,EACX,KACJ,CACK,GAAIL,EAAM,CACXC,EAAYvf,KAAK14C,GACjBi4D,EAAYS,MAAMF,GAClB,IAAIG,EAAQ34D,EAAKZ,MAAQY,EAAK5B,OAC1Bw6D,EAAQJ,EAAWp5D,MAAQo5D,EAAWp6D,OACtCy6D,EAAcZ,EAAY74D,MAAQ64D,EAAY75D,OAC9C06D,EAAYD,EAAcF,EAAQC,EAClCE,EAAYR,IACZA,EAAeQ,EACfP,EAAqBpzD,EAE7B,CACJ,CAKA,GAJI6yD,IACAD,EAAmBQ,GAAoBG,MAAM14D,GAC7Cq4D,GAAW,IAEVA,EAAU,CACPD,EAAe,IAAIthB,GAAAA,EAAa,EAAG,EAAG,EAAG,GAC7CshB,EAAa1f,KAAK14C,GAClB+3D,EAAmBjzD,KAAKszD,EAC5B,CACKJ,IACDA,EAAOD,EAAmB3yD,QAAUmxD,EAE5C,CACJ,CACA,IAAK,IAAIpxD,EAAI9K,KAAKs8D,aAAcxxD,EAAI9K,KAAKu8D,aAAczxD,EAAG,CACtD,IAAI+H,EAAK0qD,EAAYzyD,GACrB,GAAI+H,EAAI,CACJ,IAAI6rD,EAAc7rD,EAAG8rD,gBAAgBx/C,EAAWC,GAAY,GAAM,GAC9Dw/C,EAAW/rD,EAAGgsD,eAAkBhsD,EAAGo3C,QAAU6U,GAAAA,KAAgBJ,GAC3D7rD,EAAGksD,mBACH,KACFH,GACAf,EAAmBe,GAEvB,IAAII,EAAUN,IAAiB7rD,EAAGo3C,QAAU6U,GAAAA,KAAgBjsD,EAAGgsD,cACzDhsD,EAAGosD,eACH,KACFD,GACAnB,EAAmBmB,EAE3B,CACJ,CACA,IAASl0D,EAAI9K,KAAKw8D,iBAAkB1xD,EAAI9K,KAAKy8D,iBAAkB3xD,EAAG,CAC1D+H,EAAK2qD,EAAS1yD,GACd4zD,EAAc7rD,EAAG8rD,gBAAgBx/C,EAAWC,GAAY,GAAM,GAClE,GAAIvM,KAAQ6rD,IAAgB7rD,EAAGqsD,OAASrsD,EAAGgsD,aAAc,CACjDD,EAAW/rD,EAAGksD,mBACdH,GACAf,EAAmBe,EAE3B,CACJ,CAEA,EAAG,CACCnB,GAAmB,EACnB,IAAS3yD,EAAI,EAAGA,EAAI4yD,EAAmB3yD,QACnC,GAAI2yD,EAAmB5yD,GAAGgzD,SACtBJ,EAAmByB,OAAOr0D,EAAG,OADjC,CAIA,IAAK,IAAIwzB,EAAIxzB,EAAI,EAAGwzB,EAAIo/B,EAAmB3yD,QACnC2yD,EAAmB5yD,GAAG2Q,UAAUiiD,EAAmBp/B,KACnDm/B,GAAmB,EACnBC,EAAmB5yD,GAAGuzD,MAAMX,EAAmBp/B,IAC/Co/B,EAAmByB,OAAO7gC,EAAG,IAG7BA,IAGRxzB,GAXA,CAaR,OAAS2yD,GAET,OADAz9D,KAAKo/D,YAAc1B,EACZA,CACX,EACA9B,EAAMv5D,UAAUg9D,mBAAqB,WACjC,OAAQr/D,KAAKo/D,aAAe,IAAInzD,OACpC,EACA2vD,EAAMv5D,UAAUi9D,OAAS,SAAUv6D,EAAOhB,GACtC,IAAIw3D,EAAMv7D,KAAKu7D,IACXM,EAAM77D,KAAK67D,IACX3oC,EAAW2oC,EAAIz4D,MACfg6D,EAAUp9D,KAAKo9D,QACflqC,IACAA,EAASnuB,MAAQA,EAAQ,KACzBmuB,EAASnvB,OAASA,EAAS,MAE/B83D,EAAI92D,MAAQA,EAAQw2D,EACpBM,EAAI93D,OAASA,EAASw3D,EAClB6B,IACAA,EAAQr4D,MAAQA,EAAQw2D,EACxB6B,EAAQr5D,OAASA,EAASw3D,EACd,IAARA,GACAv7D,KAAKq9D,QAAQ3xD,MAAM6vD,EAAKA,GAGpC,EACAK,EAAMv5D,UAAUoM,MAAQ,SAAU8wD,EAAUC,EAAYC,GACpD,IAAI5D,EAAM77D,KAAK67D,IACX1U,EAAMnnD,KAAKmnD,IACXpiD,EAAQ82D,EAAI92D,MACZhB,EAAS83D,EAAI93D,OACjBy7D,EAAaA,GAAcx/D,KAAKw/D,WAChC,IAAIE,EAAiB1/D,KAAK87D,aAAeyD,EACrCxD,EAAiB/7D,KAAK+7D,eACtBR,EAAMv7D,KAAKu7D,IACXhpC,EAAOvyB,KACP0/D,IACK1/D,KAAKo9D,SACNp9D,KAAKm9D,mBAETn9D,KAAKq9D,QAAQsC,yBAA2B,OACxC3/D,KAAKq9D,QAAQuC,UAAU/D,EAAK,EAAG,EAAG92D,EAAQw2D,EAAKx3D,EAASw3D,IAE5D,IAAI6B,EAAUp9D,KAAKo9D,QACnB,SAAS7qD,EAAQnN,EAAGtB,EAAGiB,EAAOhB,GAE1B,GADAojD,EAAI0Y,UAAUz6D,EAAGtB,EAAGiB,EAAOhB,GACvBy7D,GAA6B,gBAAfA,EAA8B,CAC5C,IAAIM,OAA8B,EAC9BnD,EAAKoD,iBAAiBP,IACtBM,EAA8BN,EAAWQ,mBAClCC,EAAAA,GAAAA,IAAkB9Y,EAAKqY,EAAY,CAClCp6D,EAAG,EACHtB,EAAG,EACHiB,MAAOA,EACPhB,OAAQA,IAEhBy7D,EAAWQ,iBAAmBF,GAEzBnD,EAAKuD,qBAAqBV,KAC/BA,EAAWruD,OAASquD,EAAWruD,QAAUoqD,EACzCiE,EAAWpuD,OAASouD,EAAWpuD,QAAUmqD,EACzCuE,GAA8BK,EAAAA,GAAAA,IAAoBhZ,EAAKqY,EAAY,CAC/D7V,MAAO,WACHp3B,EAAK2qC,eACL3qC,EAAK6tC,UAAUC,SACnB,KAGRlZ,EAAImZ,OACJnZ,EAAIoZ,UAAYT,GAA+BN,EAC/CrY,EAAIqZ,SAASp7D,EAAGtB,EAAGiB,EAAOhB,GAC1BojD,EAAIsZ,SACR,CACIf,IACAvY,EAAImZ,OACJnZ,EAAIuZ,YAAc3E,EAClB5U,EAAIyY,UAAUxC,EAASh4D,EAAGtB,EAAGiB,EAAOhB,GACpCojD,EAAIsZ,UAEZ,EAEKhB,GAAgBC,EACjBntD,EAAQ,EAAG,EAAGxN,EAAOhB,GAEhB07D,EAAa10D,QAClB4xD,EAAK11D,KAAKw4D,GAAc,SAAU95D,GAC9B4M,EAAQ5M,EAAKP,EAAIm2D,EAAK51D,EAAK7B,EAAIy3D,EAAK51D,EAAKZ,MAAQw2D,EAAK51D,EAAK5B,OAASw3D,EACxE,GAER,EACOK,CACX,CAvQa,CAuQX3M,GAAAA,GACF,M,WC3RI0R,GAAqB,IACrBC,GAAgB,OAChBC,GAA2B,IAC3BC,GAAkB,KACtB,SAASC,GAAaC,GAClB,QAAKA,MAGDA,EAAMC,aAGoB,oBAAlBD,EAAM1B,QACgB,oBAAnB0B,EAAMX,QAIzB,CACA,SAASa,GAAWn8D,EAAOhB,GACvB,IAAIo9D,EAAU9zC,SAAS4E,cAAc,OASrC,OARAkvC,EAAQ/9D,MAAM+sB,QAAU,CACpB,oBACA,SAAWprB,EAAQ,KACnB,UAAYhB,EAAS,KACrB,YACA,WACA,kBACFsrB,KAAK,KAAO,IACP8xC,CACX,CACA,IAAIC,GAAiB,WACjB,SAASA,EAAcC,EAAMr3B,EAASiP,EAAM/tC,GACxClL,KAAKY,KAAO,SACZZ,KAAKshE,YAAc,GACnBthE,KAAKuhE,iBAAmB,GACxBvhE,KAAKwhE,QAAU,CAAC,EAChBxhE,KAAKyhE,aAAe,CAAC,EACrBzhE,KAAK0hE,2BAA4B,EACjC1hE,KAAKY,KAAO,SACZ,IAAI+gE,GAAgBN,EAAKO,UACc,WAAhCP,EAAKO,SAASC,cACrB7hE,KAAK8hE,MAAQ7oB,EAAO0jB,EAAKlnD,OAAO,CAAC,EAAGwjC,GAAQ,CAAC,GAC7Cj5C,KAAKu7D,IAAMtiB,EAAKyjB,kBAAoBA,GAAAA,GACpC18D,KAAK+hE,cAAgBJ,EACrB3hE,KAAKqhE,KAAOA,EACZ,IAAIW,EAAYX,EAAKj+D,MACjB4+D,IACArF,EAAKC,kBAAkByE,GACvBA,EAAK7tC,UAAY,IAErBxzB,KAAKgqC,QAAUA,EACf,IAAIi4B,EAAajiE,KAAKshE,YACtBthE,KAAKuhE,iBAAmB,GACxB,IAAIW,EAASliE,KAAKwhE,QAClB,GAAKG,EAMA,CACD,IAAIQ,EAAad,EACbt8D,EAAQo9D,EAAWp9D,MACnBhB,EAASo+D,EAAWp+D,OACN,MAAdk1C,EAAKl0C,QACLA,EAAQk0C,EAAKl0C,OAEE,MAAfk0C,EAAKl1C,SACLA,EAASk1C,EAAKl1C,QAElB/D,KAAKu7D,IAAMtiB,EAAKyjB,kBAAoB,EACpCyF,EAAWp9D,MAAQA,EAAQ/E,KAAKu7D,IAChC4G,EAAWp+D,OAASA,EAAS/D,KAAKu7D,IAClCv7D,KAAKoiE,OAASr9D,EACd/E,KAAKqiE,QAAUt+D,EACf,IAAIu+D,EAAY,IAAI1G,GAAMuG,EAAYniE,KAAMA,KAAKu7D,KACjD+G,EAAUrB,aAAc,EACxBqB,EAAUtF,cACVkF,EAAOtB,IAAiB0B,EACxBA,EAAUjvD,OAASutD,GACnBqB,EAAWx3D,KAAKm2D,IAChB5gE,KAAKuiE,SAAWlB,CACpB,KA5BmB,CACfrhE,KAAKoiE,QAASjuC,EAAAA,GAAAA,IAAQktC,EAAM,EAAGpoB,GAC/Bj5C,KAAKqiE,SAAUluC,EAAAA,GAAAA,IAAQktC,EAAM,EAAGpoB,GAChC,IAAIkoB,EAAUnhE,KAAKuiE,SAAWrB,GAAWlhE,KAAKoiE,OAAQpiE,KAAKqiE,SAC3DhB,EAAKhvC,YAAY8uC,EACrB,CAwBJ,CAmiBA,OAliBAC,EAAc/+D,UAAUmgE,QAAU,WAC9B,MAAO,QACX,EACApB,EAAc/+D,UAAUogE,eAAiB,WACrC,OAAOziE,KAAK+hE,aAChB,EACAX,EAAc/+D,UAAU8uB,gBAAkB,WACtC,OAAOnxB,KAAKuiE,QAChB,EACAnB,EAAc/+D,UAAUkvB,sBAAwB,WAC5C,IAAImxC,EAAe1iE,KAAKmxB,kBACxB,GAAIuxC,EACA,MAAO,CACHlxC,WAAYkxC,EAAalxC,YAAc,EACvCC,UAAWixC,EAAajxC,WAAa,EAGjD,EACA2vC,EAAc/+D,UAAUg+D,QAAU,SAAUsC,GACxC,IAAIj7C,EAAO1nB,KAAKgqC,QAAQC,gBAAe,GACnCuzB,EAAWx9D,KAAKuhE,iBAChBU,EAAajiE,KAAKshE,YACtBthE,KAAK4iE,UAAYjzD,KAAKyrB,SACtBp7B,KAAK6iE,WAAWn7C,EAAM81C,EAAUmF,EAAU3iE,KAAK4iE,WAC/C,IAAK,IAAI93D,EAAI,EAAGA,EAAIm3D,EAAWl3D,OAAQD,IAAK,CACxC,IAAI7J,EAAIghE,EAAWn3D,GACfk2D,EAAQhhE,KAAKwhE,QAAQvgE,GACzB,IAAK+/D,EAAMC,aAAeD,EAAMX,QAAS,CACrC,IAAIb,EAAmB,IAAN10D,EAAU9K,KAAK8iE,iBAAmB,KACnD9B,EAAMX,QAAQb,EAClB,CACJ,CAIA,OAHIx/D,KAAK8hE,MAAMiB,eACX/iE,KAAKuhE,iBAAmB75C,EAAKzb,SAE1BjM,IACX,EACAohE,EAAc/+D,UAAU2gE,aAAe,WACnChjE,KAAKijE,gBAAgBjjE,KAAKgqC,QAAQC,gBAAe,GACrD,EACAm3B,EAAc/+D,UAAU4gE,gBAAkB,SAAUv7C,GAChD,IAAI6F,EAAM7F,EAAK3c,OACXo/B,EAAanqC,KAAKkjE,YAEtB,GADA/4B,GAAcA,EAAW17B,QACpB8e,EAAL,CASA,IANA,IAKI45B,EALAgc,EAAQ,CACRC,SAAS,EACTjkD,UAAWnf,KAAKoiE,OAChBhjD,WAAYpf,KAAKqiE,SAGZv3D,EAAI,EAAGA,EAAIyiB,EAAKziB,IAAK,CAC1B,IAAI+H,EAAK6U,EAAK5c,GACV+H,EAAGwwD,YACEl5B,IACDA,EAAanqC,KAAKkjE,YAAcljE,KAAKsjE,SAAS3C,KAE7CxZ,IACDA,EAAMhd,EAAWgd,IACjBA,EAAImZ,SAERiD,EAAAA,GAAAA,IAAMpc,EAAKt0C,EAAIswD,EAAOr4D,IAAMyiB,EAAM,GAE1C,CACI45B,GACAA,EAAIsZ,SArBR,CAuBJ,EACAW,EAAc/+D,UAAUmhE,cAAgB,WACpC,OAAOxjE,KAAKsjE,SAAS3C,GACzB,EACAS,EAAc/+D,UAAUohE,SAAW,SAAUtc,EAAKt0C,IAC9C6wD,EAAAA,GAAAA,IAAYvc,EAAKt0C,EACrB,EACAuuD,EAAc/+D,UAAUwgE,WAAa,SAAUn7C,EAAM81C,EAAUmF,EAAUgB,GACrE,GAAI3jE,KAAK4iE,YAAce,EAAvB,CAGAhB,EAAWA,IAAY,EACvB3iE,KAAK4jE,mBAAmBl8C,GACxB,IAAIkvB,EAAK52C,KAAK6jE,aAAan8C,EAAM81C,EAAUmF,GAAWjoB,EAAW9D,EAAG8D,SAAUopB,EAAoBltB,EAAGktB,kBAOrG,GANI9jE,KAAK0hE,2BACL1hE,KAAK+jE,qBAELD,GACA9jE,KAAKijE,gBAAgBv7C,GAEpBgzB,EAOD16C,KAAKgkE,WAAU,SAAUhD,GACrBA,EAAMjE,YAAciE,EAAMjE,YAC9B,QATW,CACX,IAAI7lC,EAASl3B,MACbikE,EAAAA,GAAAA,IAAsB,WAClB/sC,EAAO2rC,WAAWn7C,EAAM81C,EAAUmF,EAAUgB,EAChD,GACJ,CAfA,CAqBJ,EACAvC,EAAc/+D,UAAU0hE,mBAAqB,WACzC,IAAI5c,EAAMnnD,KAAKsjE,SAAS1C,IAAezZ,IACnCpiD,EAAQ/E,KAAKuiE,SAASx9D,MACtBhB,EAAS/D,KAAKuiE,SAASx+D,OAC3BojD,EAAI0Y,UAAU,EAAG,EAAG96D,EAAOhB,GAC3B/D,KAAKkkE,kBAAiB,SAAUlD,GACxBA,EAAMhF,SACN7U,EAAIyY,UAAUoB,EAAMnF,IAAK,EAAG,EAAG92D,EAAOhB,EAE9C,GACJ,EACAq9D,EAAc/+D,UAAUwhE,aAAe,SAAUn8C,EAAM81C,EAAUmF,GAI7D,IAHA,IAAIliE,EAAQT,KACRmkE,EAAY,GACZpB,EAAe/iE,KAAK8hE,MAAMiB,aACrBqB,EAAK,EAAGA,EAAKpkE,KAAKshE,YAAYv2D,OAAQq5D,IAAM,CACjD,IAAI/wD,EAASrT,KAAKshE,YAAY8C,GAC1BpD,EAAQhhE,KAAKwhE,QAAQnuD,GACrB2tD,EAAMC,aACHD,IAAUhhE,KAAKkjE,cACdlC,EAAM/W,SAAW0Y,IACrBwB,EAAU15D,KAAKu2D,EAEvB,CAgFA,IA/EA,IAAItmB,GAAW,EACXopB,GAAoB,EACpBO,EAAU,SAAUxnD,GACpB,IAsBI/R,EAtBAk2D,EAAQmD,EAAUtnD,GAClBsqC,EAAM6Z,EAAM7Z,IACZsY,EAAesD,GACZ/B,EAAM1D,mBAAmB51C,EAAM81C,EAAU8G,EAAOlC,OAAQkC,EAAOjC,SAClE1yB,EAAQgzB,EAAW3B,EAAM1E,aAAe0E,EAAM3E,YAC9CkI,GAAY5B,GAAY3B,EAAM9a,aAAese,KAAKC,IAClDC,EAAYH,GAAYC,KAAKC,MAC7BjF,EAAawB,EAAM3tD,SAAWixD,EAAOhD,YAAY,GAC/CgD,EAAOxB,iBAAmB,KAChC,GAAI9B,EAAM1E,eAAiB0E,EAAMzE,WAC7ByE,EAAMvyD,OAAM,EAAO+wD,EAAYC,QAE9B,GAAI9vB,IAAUqxB,EAAM1E,aAAc,CACnC,IAAIqI,EAAUj9C,EAAKioB,GACdg1B,EAAQze,aAAgBye,EAAQC,WAAYjC,GAC7C3B,EAAMvyD,OAAM,EAAO+wD,EAAYC,EAEvC,EACe,IAAX9vB,IACAk1B,QAAQC,MAAM,4CACdn1B,EAAQqxB,EAAM1E,cAGlB,IAAIyI,EAAU,SAAUC,GACpB,IAAI7B,EAAQ,CACRC,SAAS,EACT6B,YAAY,EACZC,OAAQ,KACR/lD,UAAW1e,EAAM2hE,OACjBhjD,WAAY3e,EAAM4hE,SAEtB,IAAKv3D,EAAI6kC,EAAO7kC,EAAIk2D,EAAMzE,WAAYzxD,IAAK,CACvC,IAAI+H,EAAK6U,EAAK5c,GAKd,GAJI+H,EAAGwwD,YACHS,GAAoB,GAExBrjE,EAAM0kE,WAAWtyD,EAAImuD,EAAO+B,EAAciC,EAAa7B,EAAOr4D,IAAMk2D,EAAMzE,WAAa,GACnFgI,EAAU,CACV,IAAIa,EAAQZ,KAAKC,MAAQC,EACzB,GAAIU,EAAQ,GACR,KAER,CACJ,CACIjC,EAAMkC,iBACNle,EAAIsZ,SAEZ,EACA,GAAIhB,EACA,GAA4B,IAAxBA,EAAa10D,OACbD,EAAIk2D,EAAMzE,gBAIV,IADA,IAAIhB,EAAM+I,EAAO/I,IACR11D,EAAI,EAAGA,EAAI45D,EAAa10D,SAAUlF,EAAG,CAC1C,IAAIF,EAAO85D,EAAa55D,GACxBshD,EAAImZ,OACJnZ,EAAIme,YACJne,EAAIxhD,KAAKA,EAAKP,EAAIm2D,EAAK51D,EAAK7B,EAAIy3D,EAAK51D,EAAKZ,MAAQw2D,EAAK51D,EAAK5B,OAASw3D,GACrEpU,EAAIoe,OACJR,EAAQp/D,GACRwhD,EAAIsZ,SACR,MAIJtZ,EAAImZ,OACJyE,IACA5d,EAAIsZ,UAERO,EAAM3E,YAAcvxD,EAChBk2D,EAAM3E,YAAc2E,EAAMzE,aAC1B7hB,GAAW,EAEnB,EACI4pB,EAAStkE,KACJ6c,EAAI,EAAGA,EAAIsnD,EAAUp5D,OAAQ8R,IAClCwnD,EAAQxnD,GASZ,OAPIsH,GAAAA,EAAAA,KACAw4C,EAAK11D,KAAKjH,KAAKwhE,SAAS,SAAUR,GAC1BA,GAASA,EAAM7Z,KAAO6Z,EAAM7Z,IAAIqe,MAChCxE,EAAM7Z,IAAIqe,MAElB,IAEG,CACH9qB,SAAUA,EACVopB,kBAAmBA,EAE3B,EACA1C,EAAc/+D,UAAU8iE,WAAa,SAAUtyD,EAAI4yD,EAAc1C,EAAciC,EAAa7B,EAAOuC,GAC/F,IAAIve,EAAMse,EAAate,IACvB,GAAI4b,EAAc,CACd,IAAI4C,EAAY9yD,EAAGosD,iBACd+F,GAAeW,GAAaA,EAAUlqD,UAAUupD,OACjDzB,EAAAA,GAAAA,IAAMpc,EAAKt0C,EAAIswD,EAAOuC,GACtB7yD,EAAG+yD,iBAAiBD,GAE5B,MAEIpC,EAAAA,GAAAA,IAAMpc,EAAKt0C,EAAIswD,EAAOuC,EAE9B,EACAtE,EAAc/+D,UAAUihE,SAAW,SAAUjwD,EAAQ2oD,GAC7Ch8D,KAAK+hE,gBAAkB/hE,KAAK0hE,4BAC5BruD,EAASutD,IAEb,IAAII,EAAQhhE,KAAKwhE,QAAQnuD,GAiBzB,OAhBK2tD,IACDA,EAAQ,IAAIpF,GAAM,MAAQvoD,EAAQrT,KAAMA,KAAKu7D,KAC7CyF,EAAM3tD,OAASA,EACf2tD,EAAMC,aAAc,EAChBjhE,KAAKyhE,aAAapuD,GAClBspD,EAAKnH,MAAMwL,EAAOhhE,KAAKyhE,aAAapuD,IAAS,GAExCrT,KAAKyhE,aAAapuD,EAASwtD,KAChClE,EAAKnH,MAAMwL,EAAOhhE,KAAKyhE,aAAapuD,EAASwtD,KAA2B,GAExE7E,IACAgF,EAAMhF,QAAUA,GAEpBh8D,KAAK6lE,YAAYxyD,EAAQ2tD,GACzBA,EAAMhE,eAEHgE,CACX,EACAI,EAAc/+D,UAAUwjE,YAAc,SAAUxyD,EAAQ2tD,GACpD,IAAI8E,EAAY9lE,KAAKwhE,QACjBS,EAAajiE,KAAKshE,YAClB/zC,EAAM00C,EAAWl3D,OACjBo2D,EAAUnhE,KAAKuiE,SACfwD,EAAY,KACZj7D,GAAK,EACT,IAAIg7D,EAAUzyD,IAMT0tD,GAAaC,GAAlB,CAMA,GAAIzzC,EAAM,GAAKla,EAAS4uD,EAAW,GAAI,CACnC,IAAKn3D,EAAI,EAAGA,EAAIyiB,EAAM,EAAGziB,IACrB,GAAIm3D,EAAWn3D,GAAKuI,GACb4uD,EAAWn3D,EAAI,GAAKuI,EACvB,MAGR0yD,EAAYD,EAAU7D,EAAWn3D,GACrC,CAGA,GAFAm3D,EAAW9C,OAAOr0D,EAAI,EAAG,EAAGuI,GAC5ByyD,EAAUzyD,GAAU2tD,GACfA,EAAMhF,QACP,GAAI+J,EAAW,CACX,IAAIC,EAAUD,EAAUlK,IACpBmK,EAAQC,YACR9E,EAAQ+E,aAAalF,EAAMnF,IAAKmK,EAAQC,aAGxC9E,EAAQ9uC,YAAY2uC,EAAMnF,IAElC,MAEQsF,EAAQgF,WACRhF,EAAQ+E,aAAalF,EAAMnF,IAAKsF,EAAQgF,YAGxChF,EAAQ9uC,YAAY2uC,EAAMnF,KAItCmF,EAAMZ,UAAYpgE,IA/BlB,CAgCJ,EACAohE,EAAc/+D,UAAU2hE,UAAY,SAAUv/C,EAAI6vC,GAE9C,IADA,IAAI2N,EAAajiE,KAAKshE,YACbx2D,EAAI,EAAGA,EAAIm3D,EAAWl3D,OAAQD,IAAK,CACxC,IAAI7J,EAAIghE,EAAWn3D,GACnB2Z,EAAGmc,KAAK0zB,EAASt0D,KAAKwhE,QAAQvgE,GAAIA,EACtC,CACJ,EACAmgE,EAAc/+D,UAAU6hE,iBAAmB,SAAUz/C,EAAI6vC,GAErD,IADA,IAAI2N,EAAajiE,KAAKshE,YACbx2D,EAAI,EAAGA,EAAIm3D,EAAWl3D,OAAQD,IAAK,CACxC,IAAI7J,EAAIghE,EAAWn3D,GACfk2D,EAAQhhE,KAAKwhE,QAAQvgE,GACrB+/D,EAAMC,aACNx8C,EAAGmc,KAAK0zB,EAAS0M,EAAO//D,EAEhC,CACJ,EACAmgE,EAAc/+D,UAAU+jE,eAAiB,SAAU3hD,EAAI6vC,GAEnD,IADA,IAAI2N,EAAajiE,KAAKshE,YACbx2D,EAAI,EAAGA,EAAIm3D,EAAWl3D,OAAQD,IAAK,CACxC,IAAI7J,EAAIghE,EAAWn3D,GACfk2D,EAAQhhE,KAAKwhE,QAAQvgE,GACpB+/D,EAAMC,aACPx8C,EAAGmc,KAAK0zB,EAAS0M,EAAO//D,EAEhC,CACJ,EACAmgE,EAAc/+D,UAAUgkE,UAAY,WAChC,OAAOrmE,KAAKwhE,OAChB,EACAJ,EAAc/+D,UAAUuhE,mBAAqB,SAAUl8C,GAInD,SAAS4+C,EAAgB9kD,GACjBukD,IACIA,EAAUxJ,aAAe/6C,IACzBukD,EAAU9b,SAAU,GAExB8b,EAAUxJ,WAAa/6C,EAE/B,CACA,GAXAxhB,KAAKkkE,kBAAiB,SAAUlD,EAAO//D,GACnC+/D,EAAM/W,QAAU+W,EAAM5E,QAAS,CACnC,IASIp8D,KAAK+hE,cACL,IAAK,IAAIwE,EAAM,EAAGA,EAAM7+C,EAAK3c,OAAQw7D,IAAO,CACxC,IAAI1zD,EAAK6U,EAAK6+C,GACd,GAAI1zD,EAAGQ,SAAWqU,EAAK6+C,EAAM,GAAGlzD,QAAUR,EAAGqzC,YAAa,CACtDlmD,KAAK0hE,2BAA4B,EACjC,KACJ,CACJ,CAEJ,IAEI8E,EACA17D,EAHAi7D,EAAY,KACZU,EAAwB,EAG5B,IAAK37D,EAAI,EAAGA,EAAI4c,EAAK3c,OAAQD,IAAK,CAC1B+H,EAAK6U,EAAK5c,GAAd,IACIuI,EAASR,EAAGQ,OACZ2tD,OAAQ,EACRwF,IAAenzD,IACfmzD,EAAanzD,EACbozD,EAAwB,GAExB5zD,EAAGqzC,aACH8a,EAAQhhE,KAAKsjE,SAASjwD,EAASytD,GAAiB9gE,KAAK0hE,2BACrDV,EAAM9a,aAAc,EACpBugB,EAAwB,GAGxBzF,EAAQhhE,KAAKsjE,SAASjwD,GAAUozD,EAAwB,EAAI5F,GAA2B,GAAI7gE,KAAK0hE,2BAE/FV,EAAMC,aACPtE,EAAK+J,SAAS,UAAYrzD,EAAS,kCAAoC2tD,EAAM91D,IAE7E81D,IAAU+E,IACV/E,EAAM5E,QAAS,EACX4E,EAAM1E,eAAiBxxD,IACvBk2D,EAAM/W,SAAU,GAEpB+W,EAAM1E,aAAexxD,EAChBk2D,EAAM9a,YAIP8a,EAAM3E,aAAe,EAHrB2E,EAAM3E,YAAcvxD,EAKxBw7D,EAAgBx7D,GAChBi7D,EAAY/E,GAEXnuD,EAAGo3C,QAAU6U,GAAAA,KAAgBjsD,EAAGwwD,YACjCrC,EAAM/W,SAAU,EACZ+W,EAAM9a,aAAe8a,EAAM3E,YAAc,IACzC2E,EAAM3E,YAAcvxD,GAGhC,CACAw7D,EAAgBx7D,GAChB9K,KAAKkkE,kBAAiB,SAAUlD,EAAO//D,IAC9B+/D,EAAM5E,QAAU4E,EAAMlE,kBAAoB,IAC3CkE,EAAM/W,SAAU,EAChB+W,EAAM1E,aAAe0E,EAAMzE,WAAayE,EAAM3E,YAAc,GAE5D2E,EAAM/W,SAAW+W,EAAM3E,YAAc,IACrC2E,EAAM3E,YAAc2E,EAAM1E,aAElC,GACJ,EACA8E,EAAc/+D,UAAUoM,MAAQ,WAE5B,OADAzO,KAAKkkE,iBAAiBlkE,KAAK2mE,aACpB3mE,IACX,EACAohE,EAAc/+D,UAAUskE,YAAc,SAAU3F,GAC5CA,EAAMvyD,OACV,EACA2yD,EAAc/+D,UAAUukE,mBAAqB,SAAUnlE,GACnDzB,KAAK8iE,iBAAmBrhE,EACxBk7D,EAAK11D,KAAKjH,KAAKwhE,SAAS,SAAUR,GAC9BA,EAAM9D,cACV,GACJ,EACAkE,EAAc/+D,UAAUwkE,YAAc,SAAUxzD,EAAQ4oD,GACpD,GAAIA,EAAQ,CACR,IAAI6K,EAAc9mE,KAAKyhE,aAClBqF,EAAYzzD,GAIbspD,EAAKnH,MAAMsR,EAAYzzD,GAAS4oD,GAAQ,GAHxC6K,EAAYzzD,GAAU4oD,EAK1B,IAAK,IAAInxD,EAAI,EAAGA,EAAI9K,KAAKshE,YAAYv2D,OAAQD,IAAK,CAC9C,IAAIi8D,EAAU/mE,KAAKshE,YAAYx2D,GAC/B,GAAIi8D,IAAY1zD,GAAU0zD,IAAY1zD,EAASwtD,GAA0B,CACrE,IAAIG,EAAQhhE,KAAKwhE,QAAQuF,GACzBpK,EAAKnH,MAAMwL,EAAO8F,EAAYzzD,IAAS,EAC3C,CACJ,CACJ,CACJ,EACA+tD,EAAc/+D,UAAU2kE,SAAW,SAAU3zD,GACzC,IAAI6uD,EAASliE,KAAKwhE,QACdS,EAAajiE,KAAKshE,YAClBN,EAAQkB,EAAO7uD,GACd2tD,IAGLA,EAAMnF,IAAI9nC,WAAWkB,YAAY+rC,EAAMnF,YAChCqG,EAAO7uD,GACd4uD,EAAW9C,OAAOxC,EAAKpxD,QAAQ02D,EAAY5uD,GAAS,GACxD,EACA+tD,EAAc/+D,UAAUi9D,OAAS,SAAUv6D,EAAOhB,GAC9C,GAAK/D,KAAKuiE,SAASn/D,MAQd,CACD,IAAI+9D,EAAUnhE,KAAKuiE,SACnBpB,EAAQ/9D,MAAMqwB,QAAU,OACxB,IAAIwlB,EAAOj5C,KAAK8hE,MACZT,EAAOrhE,KAAKqhE,KAMhB,GALS,MAATt8D,IAAkBk0C,EAAKl0C,MAAQA,GACrB,MAAVhB,IAAmBk1C,EAAKl1C,OAASA,GACjCgB,GAAQovB,EAAAA,GAAAA,IAAQktC,EAAM,EAAGpoB,GACzBl1C,GAASowB,EAAAA,GAAAA,IAAQktC,EAAM,EAAGpoB,GAC1BkoB,EAAQ/9D,MAAMqwB,QAAU,GACpBzzB,KAAKoiE,SAAWr9D,GAAShB,IAAW/D,KAAKqiE,QAAS,CAGlD,IAAK,IAAIn3D,KAFTi2D,EAAQ/9D,MAAM2B,MAAQA,EAAQ,KAC9Bo8D,EAAQ/9D,MAAMW,OAASA,EAAS,KACjB/D,KAAKwhE,QACZxhE,KAAKwhE,QAAQh/B,eAAet3B,IAC5BlL,KAAKwhE,QAAQt2D,GAAIo0D,OAAOv6D,EAAOhB,GAGvC/D,KAAKqgE,SAAQ,EACjB,CACArgE,KAAKoiE,OAASr9D,EACd/E,KAAKqiE,QAAUt+D,CACnB,KA9B0B,CACtB,GAAa,MAATgB,GAA2B,MAAVhB,EACjB,OAEJ/D,KAAKoiE,OAASr9D,EACd/E,KAAKqiE,QAAUt+D,EACf/D,KAAKsjE,SAAS1C,IAAetB,OAAOv6D,EAAOhB,EAC/C,CAwBA,OAAO/D,IACX,EACAohE,EAAc/+D,UAAU4kE,WAAa,SAAU5zD,GAC3C,IAAI2tD,EAAQhhE,KAAKwhE,QAAQnuD,GACrB2tD,GACAA,EAAMvyD,OAEd,EACA2yD,EAAc/+D,UAAU0K,QAAU,WAC9B/M,KAAKqhE,KAAK7tC,UAAY,GACtBxzB,KAAKqhE,KACDrhE,KAAKgqC,QACDhqC,KAAKuiE,SACDviE,KAAKwhE,QAAU,IAC/B,EACAJ,EAAc/+D,UAAU6kE,kBAAoB,SAAUjuB,GAElD,GADAA,EAAOA,GAAQ,CAAC,EACZj5C,KAAK+hE,gBAAkB/hE,KAAK+jE,mBAC5B,OAAO/jE,KAAKwhE,QAAQZ,IAAe/E,IAEvC,IAAIsL,EAAa,IAAIvL,GAAM,QAAS57D,KAAMi5C,EAAKmuB,YAAcpnE,KAAKu7D,KAClE4L,EAAWnK,cACXmK,EAAW14D,OAAM,EAAOwqC,EAAKx3C,iBAAmBzB,KAAK8iE,kBACrD,IAAI3b,EAAMggB,EAAWhgB,IACrB,GAAIlO,EAAKmuB,YAAcpnE,KAAKu7D,IAAK,CAC7Bv7D,KAAKqgE,UACL,IAAIgH,EAAUF,EAAWtL,IAAI92D,MACzBuiE,EAAWH,EAAWtL,IAAI93D,OAC9B/D,KAAKgkE,WAAU,SAAUhD,GACjBA,EAAMC,YACN9Z,EAAIyY,UAAUoB,EAAMnF,IAAK,EAAG,EAAGwL,EAASC,GAEnCtG,EAAMuG,iBACXpgB,EAAImZ,OACJU,EAAMuG,eAAepgB,GACrBA,EAAIsZ,UAEZ,GACJ,MAQI,IANA,IAAI0C,EAAQ,CACRC,SAAS,EACTjkD,UAAWnf,KAAKoiE,OAChBhjD,WAAYpf,KAAKqiE,SAEjB9E,EAAcv9D,KAAKgqC,QAAQC,gBAAe,GACrCn/B,EAAI,EAAGyiB,EAAMgwC,EAAYxyD,OAAQD,EAAIyiB,EAAKziB,IAAK,CACpD,IAAI+H,EAAK0qD,EAAYzyD,IACrBy4D,EAAAA,GAAAA,IAAMpc,EAAKt0C,EAAIswD,EAAOr4D,IAAMyiB,EAAM,EACtC,CAEJ,OAAO45C,EAAWtL,GACtB,EACAuF,EAAc/+D,UAAU6C,SAAW,WAC/B,OAAOlF,KAAKoiE,MAChB,EACAhB,EAAc/+D,UAAU8C,UAAY,WAChC,OAAOnF,KAAKqiE,OAChB,EACOjB,CACX,CAzlBqB,GA0lBrB,MCnlBO,SAASp7D,GAAQC,GACtBA,EAAUuhE,gBAAgB,SAAUpG,GACtC,C,+/gBC/BA,IACAj2D,KAAAA,eACAs8D,WAAAA,CAAAA,EACAzhD,OACA,OAEA,CACA,EACA0hD,SAAAA,CAAAA,EACAC,MAAAA,CAAAA,EACA70D,MAAAA,CAAAA,EACA80D,QAAAA,CACAC,SACA,mBACAC,EACAC,GACAC,GACAC,GACAC,KAIA,IACA,EADA,yDAEAC,EAAAA,cACAA,EAAAA,cACAx3B,GAAAA,GAAAA,SAAAA,SAAAA,GACAsE,EAAAA,MAAAA,CACA/zC,KAAAA,EAAAA,WAAAA,GAEA,IACAyK,EAAAA,CACAy0B,MAAAA,CACAj/B,KAAAA,iBACAE,QAAAA,iBACAG,IAAAA,SACAD,KAAAA,SAEAs2B,QAAAA,CAAAA,EACAuwC,OAAAA,CACA,CAEApiD,KAAAA,GAAAA,GAAAA,KAAAA,SAAAA,GACA,aACA,MAGAqiD,kBAAAA,KACAt7C,sBAAAA,eACAjN,OAAAA,CACA,CACA3U,KAAAA,iBACAvK,KAAAA,QACAmgB,OAAAA,OACAiF,KAAAA,GAAAA,GACAuyC,MAAAA,GAAAA,GACAmB,WAAAA,GAAAA,GACA/a,MAAAA,EACA/0C,MAAAA,CACAoK,SAAAA,QACA6K,UAAAA,OAEA9U,UAAAA,CACA9H,MAAAA,SACAozC,UAAAA,IAEAtR,SAAAA,CACA+d,MAAAA,YACA/3C,UAAAA,CACAhF,MAAAA,QAMAojE,EAAAA,UAAAA,EAIA,GAEAG,UACA,aACA,GClG8P,M,WCQ1P,IAAY,QACd,GACAxoE,EACAQ,GACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,O","sources":["webpack://friends/./src/views/relation/index.vue","webpack://friends/./node_modules/echarts/lib/component/title/install.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack://friends/./node_modules/echarts/lib/component/axis/AxisView.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack://friends/./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/viewHelper.js","webpack://friends/./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack://friends/./node_modules/echarts/lib/component/axisPointer/install.js","webpack://friends/./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack://friends/./node_modules/echarts/lib/component/tooltip/helper.js","webpack://friends/./node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","webpack://friends/./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack://friends/./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack://friends/./node_modules/echarts/lib/component/tooltip/install.js","webpack://friends/./node_modules/echarts/lib/component/legend/LegendModel.js","webpack://friends/./node_modules/echarts/lib/component/helper/listComponent.js","webpack://friends/./node_modules/echarts/lib/component/legend/LegendView.js","webpack://friends/./node_modules/echarts/lib/component/legend/legendFilter.js","webpack://friends/./node_modules/echarts/lib/component/legend/legendAction.js","webpack://friends/./node_modules/echarts/lib/component/legend/installLegendPlain.js","webpack://friends/./node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","webpack://friends/./node_modules/echarts/lib/component/legend/ScrollableLegendView.js","webpack://friends/./node_modules/echarts/lib/component/legend/scrollableLegendAction.js","webpack://friends/./node_modules/echarts/lib/component/legend/installLegendScroll.js","webpack://friends/./node_modules/echarts/lib/component/legend/install.js","webpack://friends/./node_modules/echarts/lib/chart/graph/categoryFilter.js","webpack://friends/./node_modules/echarts/lib/chart/graph/categoryVisual.js","webpack://friends/./node_modules/echarts/lib/chart/graph/edgeVisual.js","webpack://friends/./node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/simpleLayout.js","webpack://friends/./node_modules/echarts/lib/chart/graph/graphHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/circularLayout.js","webpack://friends/./node_modules/echarts/lib/chart/graph/forceHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/forceLayout.js","webpack://friends/./node_modules/echarts/lib/coord/View.js","webpack://friends/./node_modules/echarts/lib/chart/graph/createView.js","webpack://friends/./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack://friends/./node_modules/echarts/lib/chart/helper/Symbol.js","webpack://friends/./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack://friends/./node_modules/echarts/lib/chart/helper/LinePath.js","webpack://friends/./node_modules/echarts/lib/chart/helper/Line.js","webpack://friends/./node_modules/echarts/lib/chart/helper/LineDraw.js","webpack://friends/./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack://friends/./node_modules/echarts/lib/component/helper/RoamController.js","webpack://friends/./node_modules/echarts/lib/component/helper/roamHelper.js","webpack://friends/./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/adjustEdge.js","webpack://friends/./node_modules/echarts/lib/chart/graph/GraphView.js","webpack://friends/./node_modules/echarts/lib/data/Graph.js","webpack://friends/./node_modules/echarts/lib/data/helper/linkSeriesData.js","webpack://friends/./node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","webpack://friends/./node_modules/echarts/lib/visual/LegendVisualProvider.js","webpack://friends/./node_modules/echarts/lib/chart/graph/GraphSeries.js","webpack://friends/./node_modules/echarts/lib/action/roamHelper.js","webpack://friends/./node_modules/echarts/lib/chart/graph/install.js","webpack://friends/./node_modules/zrender/lib/canvas/Layer.js","webpack://friends/./node_modules/zrender/lib/canvas/Painter.js","webpack://friends/./node_modules/echarts/lib/renderer/installCanvasRenderer.js","webpack://friends/src/views/relation/index.vue","webpack://friends/./src/views/relation/index.vue?35d5","webpack://friends/./src/views/relation/index.vue?c4b7"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"relation-container\",attrs:{\"id\":\"myChart\"}},[_vm._v(\" relation-container \")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\n\nvar TitleModel =\n/** @class */\nfunction (_super) {\n  __extends(TitleModel, _super);\n\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel); // View\n\n\nvar TitleView =\n/** @class */\nfunction (_super) {\n  __extends(TitleView, _super);\n\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleView.type;\n    return _this;\n  }\n\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js'; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nexport function collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\n * Base class of AxisView.\n */\n\nvar AxisView =\n/** @class */\nfunction (_super) {\n  __extends(AxisView, _super);\n\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n\n    _super.prototype.render.apply(this, arguments);\n\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\n   * Action handler.\n   */\n\n\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n\n    if (!Clazz) {\n      return;\n    }\n\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n\n    axisPointerClazz[type] = clazz;\n  };\n\n  ;\n\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\n\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n */\n\nvar BaseAxisPointer =\n/** @class */\nfunction () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\n     * In px, arbitrary value. Do not set too small,\n     * no animation is ok for most cases.\n     */\n\n    this.animationThreshold = 15;\n  }\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  };\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  };\n\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  };\n  /**\n   * Throttled method.\n   */\n\n\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\n  };\n\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n\n  return BaseAxisPointer;\n}();\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieve, defaults, extend, each, isObject, map, isString, isNumber, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { prepareLayoutList, hideOverlap } from '../../label/labelLayoutHelper.js';\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n */\n\nvar AxisBuilder =\n/** @class */\nfunction () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel; // Default value\n\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function () {\n        return true;\n      }\n    }); // FIXME Not use a seperate text group?\n\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    }); // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n\n  return AxisBuilder;\n}();\n\n;\nvar builders = {\n  axisLine: function (opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n\n    if (!shown) {\n      return;\n    }\n\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(opt.rotation),\n            y: pt[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function (opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection); // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n\n    if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n      var labelList = prepareLayoutList(map(labelEls, function (label) {\n        return {\n          label: label,\n          priority: label.z2,\n          defaultAttr: {\n            ignore: label.ignore\n          }\n        };\n      }));\n      hideOverlap(labelList);\n    }\n  },\n  axisName: function (opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name; // Id for animation\n\n    textEl.anid = 'name';\n\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10 + (labelItem.level || 0),\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n        verticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n        fill: isFunction(textColor) ? textColor( // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user repalce ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue; // Pack data for mouse event\n\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n */\n\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\n\nvar CartesianAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisPointer, _super);\n\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar AxisPointerModel =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerModel, _super);\n\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\n\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\n\nvar AxisPointerView =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerView, _super);\n\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\n\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param ecModel\n * @return  {point: [x, y], el: ...} point Will not be null.\n */\n\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @return content of event obj for echarts.connect.\n */\n\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  }); // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  }); // Broadcast to all views.\n\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar TooltipModel =\n/** @class */\nfunction (_super) {\n  __extends(TooltipModel, _super);\n\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      } // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\n\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\n\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\n\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n\n  var style = document.documentElement.style;\n\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\n\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isArray, isDom } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\n\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\n\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\n\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\n\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  } // support transform\n\n\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize // @ts-ignore, leave it to the tooltip refactor.\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nvar TooltipHTMLContent =\n/** @class */\nfunction () {\n  function TooltipHTMLContent(container, api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._firstShow = true;\n    this._longHide = true;\n\n    if (env.wxa) {\n      return null;\n    }\n\n    var el = document.createElement('div'); // TODO: TYPE\n\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendToBody = this._appendToBody = opt && opt.appendToBody;\n    makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n    if (appendToBody) {\n      document.body.appendChild(el);\n    } else {\n      container.appendChild(el);\n    }\n\n    this._container = container; // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n\n    var self = this;\n\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    };\n\n    el.onmousemove = function (e) {\n      e = e || window.event;\n\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var position = getComputedStyle(container, 'position');\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // move tooltip if chart resized\n\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized(); // update className\n\n    this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n\n    var arrow = '';\n\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n\n      if (!isArray(content)) {\n        content = [content];\n      }\n\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      } // no arrow if empty\n\n\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return [el.offsetWidth, el.offsetHeight];\n  };\n\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipHTMLContent.prototype.dispose = function () {\n    this.el.parentNode.removeChild(this.el);\n  };\n\n  return TooltipHTMLContent;\n}();\n\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\n\nvar TooltipRichContent =\n/** @class */\nfunction () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n  };\n\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n\n\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  };\n\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  };\n\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n\n  return TooltipRichContent;\n}();\n\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\n\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\n\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar TooltipView =\n/** @class */\nfunction (_super) {\n  __extends(TooltipView, _super);\n\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipView.type;\n    return _this;\n  }\n\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n      appendToBody: tooltipModel.get('appendToBody', true)\n    });\n  };\n\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow(); // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n\n\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn'); // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n\n\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      }; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n\n\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex; // @ts-ignore\n\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        } // Tooltip provided directly. Like legend.\n\n\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n\n      this._hide(dispatchAction);\n    }\n  };\n\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex); // Can't find data.\n\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n\n          cbParamsList.push(cbParams);\n        });\n      });\n    }); // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  };\n\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher); // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var tooltipModelCascade = [tooltipOpt];\n\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they can not share the same formatter. Since the global tooltip formatter is used for series\n    // by convension, we do not use it as the default formatter for component.\n\n\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n    var nearPointColor = nearPoint.color;\n\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n  y, // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  }; // FIXME\n  // Should we remove this but leave this to user?\n\n\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        }); // check is cbParams data value changed\n\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n\n    clear(this, '_updatePosition');\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  };\n\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in defaut tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\n\n\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n\n  if (!model) {\n    return;\n  }\n\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\n\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../../model/Model.js';\nimport { isNameSpecified } from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\n\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\n\nvar LegendModel =\n/** @class */\nfunction (_super) {\n  __extends(LegendModel, _super);\n\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas realy width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (zrUtil.isString(dataItem) || zrUtil.isNumber(dataItem)) {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  };\n\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  };\n\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  };\n\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\n\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as graphic from '../../util/graphic.js';\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\n\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar LegendView =\n/** @class */\nfunction (_super) {\n  __extends(LegendView, _super);\n\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n\n\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    } // selector has been normalized to an array in model\n\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw(); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group(); // @ts-ignore\n\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n\n        var style = data.getVisual('style');\n\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n\n    var inactiveColor = legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup); // @ts-ignore\n\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\n\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  } // itemStyle\n\n\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n\n  if (itemStyle.fill === 'inherit') {\n    /**\n     * Series with visualDrawType as 'stroke' should have\n     * series stroke as legend fill\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n\n  if (itemStyle.stroke === 'inherit') {\n    /**\n     * icon type with \"emptyXXX\" should use fill color\n     * in visual style\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n\n  if (itemStyle.opacity === 'inherit') {\n    /**\n     * Use lineStyle.opacity if drawType is stroke\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n\n  handleCommonProps(itemStyle, itemVisualStyle); // lineStyle\n\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle); // Fix auto color to real color\n\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\n\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n\n  return icon;\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n  // TODO higlight immediately may cause animation loss.\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n\n  return emphasisState && emphasisState.hoverLayer;\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { curry, each } from 'zrender/lib/core/util.js';\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n\nexport function installLegendAction(registers) {\n  /**\n   * @event legendToggleSelect\n   * @type {Object}\n   * @property {string} type 'legendToggleSelect'\n   * @property {string} [from]\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\n   * @event legendSelect\n   * @type {Object}\n   * @property {string} type 'legendSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\n   * @event legendUnSelect\n   * @type {Object}\n   * @property {string} type 'legendUnSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LegendModel from './LegendModel.js';\nimport LegendView from './LegendView.js';\nimport legendFilter from './legendFilter.js';\nimport { installLegendAction } from './legendAction.js';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel.js';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar ScrollableLegendModel =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendModel, _super);\n\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\n   * @param {number} scrollDataIndex\n   */\n\n\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n\n; // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\n\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport LegendView from './LegendView.js';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\n\nvar ScrollableLegendView =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendView, _super);\n\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this; // Render content items.\n\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n\n    var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh]; // In case that the inner elements of contentGroup layout do not based on [0, 0]\n\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    } // Layout container group based on 0.\n\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n          containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n        }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n\n\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n\n    if (!targetItem) {\n      return result;\n    }\n\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n        }\n      }\n\n      winEndItemInfo = currItemInfo;\n    }\n\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n      winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n\n      winStartItemInfo = currItemInfo;\n    }\n\n    return result;\n\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex; // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\n\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\n   * @event legendScroll\n   * @type {Object}\n   * @property {string} type 'legendScroll'\n   * @property {string} scrollDataIndex\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport ScrollableLegendModel from './ScrollableLegendModel.js';\nimport ScrollableLegendView from './ScrollableLegendView.js';\nimport installScrollableLegendAction from './scrollableLegendAction.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport { install as installLegendScroll } from './installLegendScroll.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\n\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\n\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\n\n\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = []; // handler the function set\n\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  } // append length\n\n\n  if (appendLength > length) {\n    length = appendLength;\n  } // make sure the length is even\n\n\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\n\n\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\n\n\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\n\n\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\n\n\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\n\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\n\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\n\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\n\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n\n  if (!autoCurvenessParams) {\n    return null;\n  }\n\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n\n  if (!edgeArray) {\n    return null;\n  }\n\n  var edgeIndex = -1;\n\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  } // if totalLen is Longer createCurveness\n\n\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\n\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\n\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n\n          value.push(val);\n        }\n\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\n\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\n\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n\n  if (!count) {\n    return;\n  }\n\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n        tempX = _a[0],\n        tempY = _a[1];\n\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\n\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf; // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl(); // need to check if el exists. '-' value may not create node element.\n\n  if (!el) {\n    return;\n  }\n\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n\n    var isLeft = pos[0] < cx;\n\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n\n\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\n\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      }); // let coordSys = graphSeries.coordinateSystem;\n\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\n\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { parsePercent } from '../util/number.js';\nvar v2ApplyTransform = vector.applyTransform;\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(name) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\n     * Represents the transform brought by roam/zoom.\n     * If `View['_viewRect']` applies roam transform,\n     * we can get the final displayed rect.\n     */\n\n    _this._roamTransformable = new Transformable();\n    /**\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\n     */\n\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  }\n\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n\n\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n\n\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n\n    this._updateTransform();\n  };\n  /**\n   * Set center of view\n   */\n\n\n  View.prototype.setCenter = function (centerCoord, api) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = [parsePercent(centerCoord[0], api.getWidth()), parsePercent(centerCoord[1], api.getHeight())];\n\n    this._updateCenterAndZoom();\n  };\n\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n\n\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Remove roam\n   */\n\n\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n\n    this._updateTransform();\n  };\n  /**\n   * Update transform props on `this` based on the current\n   * `this._roamTransformable` and `this._rawTransformable`.\n   */\n\n\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable; // Becuase roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalcualte them.\n\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n\n\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n\n\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n\n\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\n\nexport default View;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\n\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'), api);\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\n\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n\n  var vals = [];\n\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar Symbol =\n/** @class */\nfunction (_super) {\n  __extends(Symbol, _super);\n\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n\n\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n\n\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n\n\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle; // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY) // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1; // always set scale to allow resetting\n\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n\n  return Symbol;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n\n      if (!symbolEl // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\n\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nvar StraightLineShape =\n/** @class */\nfunction () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0; // End point\n\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n\n  return StraightLineShape;\n}();\n\nvar CurveShape =\n/** @class */\nfunction (_super) {\n  __extends(CurveShape, _super);\n\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return CurveShape;\n}(StraightLineShape);\n\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar ECLinePath =\n/** @class */\nfunction (_super) {\n  __extends(ECLinePath, _super);\n\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-line';\n    return _this;\n  }\n\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n\n  return ECLinePath;\n}(graphic.Path);\n\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nvar Line =\n/** @class */\nfunction (_super) {\n  __extends(Line, _super);\n\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createLine(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  }; // TODO More strict on the List type in parameters?\n\n\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = lineData.getItemVisual(idx, symbolCategory);\n      var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n\n      this[key] = symbolType;\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope; // Optimization for large dataset\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle; // Update symbol\n\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent(); // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign; // 'start', 'middle', 'end'\n\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n\n      label.__labelDistance = distance;\n    }\n\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n\n    });\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent(); // Quick reject\n\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n\n    var invScale = 1;\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    var line = lineGroup.childOfName('line'); // If line not changed\n    // FIXME Parent scale changed\n\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n\n      var dir = tangent[0] < 0 ? -1 : 1;\n\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.rotation = rotation;\n      }\n\n      var dy = void 0;\n\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n\n  return Line;\n}(graphic.Group);\n\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\n\nvar LineDraw =\n/** @class */\nfunction () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this; // Remove progressive els.\n\n\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!oldLineData) {\n      group.removeAll();\n    }\n\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n\n  ;\n\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData; // Do not support update layout in incremental mode.\n\n    if (!lineData) {\n      return;\n    }\n\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n\n  ;\n\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n\n  return LineDraw;\n}();\n\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\n\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\n\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util.js';\n;\n\nvar RoamController =\n/** @class */\nfunction (_super) {\n  __extends(RoamController, _super);\n\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n\n    _this._zr = zr; // Avoid two roamController bind the same handler\n\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice: only enable needed types. For example, if 'zoom'\n     * is not needed, 'zoom' should not be enabled, otherwise\n     * default mousewheel behaviour (scroll page) will be disabled.\n     */\n\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n\n      if (controlType == null) {\n        controlType = true;\n      }\n\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n\n    return _this;\n  }\n\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      return;\n    }\n\n    var el = e.target;\n\n    while (el) {\n      if (el.draggable) {\n        return;\n      } // check if host is draggable\n\n\n      el = el.__hostTarget || el.parent;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY; // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    } // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n\n\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n\n  return RoamController;\n}(Eventful);\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e); // TODO should not have type issue.\n\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\n\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n */\n\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  target.x -= (zoomX - target.x) * (zoomScale - 1);\n  target.y -= (zoomY - target.y) * (zoomScale - 1);\n  target.scaleX *= zoomScale;\n  target.scaleY *= zoomScale;\n  target.dirty();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n        vec2.copy(pts2[0], originalPoints[0]);\n        vec2.copy(pts2[1], originalPoints[1]);\n        vec2.sub(v, pts2[1], pts2[0]);\n        vec2.normalize(v, v);\n\n        if (fromSymbol && fromSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node1);\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n        }\n\n        if (toSymbol && toSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node2);\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n        }\n\n        vec2.copy(linePoints[0], pts2[0]);\n        vec2.copy(linePoints[1], pts2[1]);\n      }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\n\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\n\nvar GraphView =\n/** @class */\nfunction (_super) {\n  __extends(GraphView, _super);\n\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphView.type;\n    return _this;\n  }\n\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\n\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n\n      if (!el) {\n        return;\n      } // Update draggable\n\n\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n              forceLayout.setFixed(idx); // Write position back to layout\n\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]); // mark node fixed\n\n              node.setLayout({\n                fixed: true\n              }, true); // recalculate circular layout\n\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n\n              _this.updateLayout(seriesModel);\n\n              break;\n\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]); // update edge\n\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n\n              _this.updateLayout(seriesModel);\n\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n\n      el.setDraggable(draggable && !!forceLayout, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n\n      if (!el) {\n        return;\n      }\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n  };\n\n  GraphView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  };\n\n  GraphView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\n\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // id may be function name of Object, add a prefix to avoid this problem.\n\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n\nvar Graph =\n/** @class */\nfunction () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n\n\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n\n  ;\n  /**\n   * Add a new node\n   */\n\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n\n      return;\n    }\n\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n\n  ;\n  /**\n   * Get node by data index\n   */\n\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n\n  ;\n  /**\n   * Get node by id\n   */\n\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n\n  ;\n  /**\n   * Add a new edge\n   */\n\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap; // PNEDING\n\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n\n    if (!n1 || !n2) {\n      return;\n    }\n\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n\n    n1.edges.push(edge);\n\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n\n  ;\n  /**\n   * Get edge by data index\n   */\n\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n\n    var edgesMap = this._edgesMap;\n\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n\n  ;\n  /**\n   * Iterate all nodes\n   */\n\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Iterate all edges\n   */\n\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n\n    if (!startNode) {\n      return;\n    }\n\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n\n    var queue = [startNode];\n\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n\n  ; // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    }); // Update edge\n\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n\n    return graph;\n  };\n\n  ;\n  return Graph;\n}();\n\nvar GraphNode =\n/** @class */\nfunction () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n\n\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n\n    return dataIndices;\n  };\n\n  return GraphNode;\n}();\n\nvar GraphEdge =\n/** @class */\nfunction () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n\n  return GraphEdge;\n}();\n\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\n\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\n\n\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\n\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\n\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\n\nvar GraphSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphSeriesModel, _super);\n\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n\n    var self = this;\n\n    function getCategoriesData() {\n      return self._categoriesData;\n    } // Provide data for legend select\n\n\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\n\n      var oldGetModel = Model.prototype.getModel;\n\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n\n          return newPathArr;\n        }\n\n        return pathArr;\n      }\n    }\n  };\n\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    } // dataType === 'node' or empty\n\n\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\n\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getCenterCoord(view, point) {\n  // Use projected coord as center because it's linear.\n  return view.pointToProjected ? view.pointToProjected(point) : view.pointToData(point);\n}\n\nexport function updateCenterAndZoom(view, payload, zoomLimit, api) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.projectedToPoint ? view.projectedToPoint(center) : view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(getCenterCoord(view, point), api);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scaleX *= zoom;\n    view.scaleY *= zoom;\n    var fixX = (payload.originX - view.x) * (zoom - 1);\n    var fixY = (payload.originY - view.y) * (zoom - 1);\n    view.x -= fixX;\n    view.y -= fixY;\n    view.updateTransform(); // Get the new center\n\n    view.setCenter(getCenterCoord(view, point), api);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoom } from '../../action/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  }); // Register legacy focus actions\n\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop); // Register roam action.\n\n  registers.registerAction(actionInfo, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload, undefined, api);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}","<template>\n  <div class=\"relation-container\" id=\"myChart\">\n      relation-container\n  </div>\n</template>\n<script>\n\nimport {\n  TitleComponent,\n  TooltipComponent,\n  LegendComponent\n} from 'echarts/components';\nimport { GraphChart } from 'echarts/charts';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport graph from '@/assets/les-miserables.json'\nexport default {\n  name: 'RealtionShip',\n  components: {},\n  data() {\n    return {\n\n    }\n  },\n  computed: {},\n  watch: {},\n  props: {},\n  methods: {\n   onLoad(){\n      this.$echarts.use([\n        TitleComponent,\n        TooltipComponent,\n        LegendComponent,\n        GraphChart,\n        CanvasRenderer\n      ]);\n\n\n      var myChart = this.$echarts.init(document.getElementById('myChart'));\n      var option;\n      myChart.showLoading();      \n      myChart.hideLoading();\n      graph.nodes.forEach(function (node) {\n        node.label = {\n          show: node.symbolSize > 30\n        };\n      });\n      option = {\n        title: {\n          text: 'Les Miserables',\n          subtext: 'Default layout',\n          top: 'bottom',\n          left: 'right'\n        },\n        tooltip: {},\n        legend: [\n          {\n            // selectedMode: 'single',\n            data: graph.categories.map(function (a) {\n              return a.name;\n            })\n          }\n        ],\n        animationDuration: 1500,\n        animationEasingUpdate: 'quinticInOut',\n        series: [\n          {\n            name: 'Les Miserables',\n            type: 'graph',\n            layout: 'none',\n            data: graph.nodes,\n            links: graph.links,\n            categories: graph.categories,\n            roam: true,\n            label: {\n              position: 'right',\n              formatter: '{b}'\n            },\n            lineStyle: {\n              color: 'source',\n              curveness: 0.3\n            },\n            emphasis: {\n              focus: 'adjacency',\n              lineStyle: {\n                width: 10\n              }\n            }\n          }\n        ]\n      };\n      myChart.setOption(option);\n      // option \n      // myChart.setOption(option);\n\n    }\n  },\n  mounted() {\n    this.onLoad()\n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n.relation-container{\n  width: 100%;\n  height: 500px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4dee5766&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4dee5766&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dee5766\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","staticRenderFns","TitleModel","_super","_this","apply","arguments","type","layoutMode","ignoreSize","__extends","defaultOption","z","show","text","target","subtext","subtarget","left","top","backgroundColor","borderColor","borderWidth","padding","itemGap","textStyle","fontSize","fontWeight","color","subtextStyle","ComponentModel","TitleView","prototype","titleModel","ecModel","api","group","removeAll","get","textStyleModel","getModel","subtextStyleModel","textAlign","textVerticalAlign","zrUtil","textEl","graphic","style","createTextStyle","fill","getTextColor","disableBox","z2","textRect","getBoundingRect","subText","subTextEl","y","height","verticalAlign","link","sublink","triggerEvent","silent","on","windowOpen","getECData","eventData","componentType","componentIndex","add","groupRect","layoutOption","getBoxLayoutParams","width","layoutRect","getLayoutRect","getWidth","getHeight","x","markRedraw","alignStyle","align","setStyle","margin","getItemStyle","rect","shape","r","subPixelOptimize","ComponentView","install","registers","registerComponentModel","registerComponentView","collect","result","axesInfo","seriesInvolved","coordSysAxesInfo","coordSysMap","collectAxesInfo","collectSeriesInfo","globalTooltipModel","getComponent","globalAxisPointerModel","linksOption","linkGroups","each","getCoordinateSystems","coordSys","axisPointerEnabled","coordSysKey","makeKey","model","axesInfoInCoordSys","coordSysModel","baseTooltipModel","getAxes","curry","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axis","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","axisKey","involveSeries","axisInfo","key","useHandle","seriesModels","linkGroup","groupIndex","getLinkGroupIndex","mapper","tooltipAxisPointerModel","fields","volatileOption","field","clone","labelOption","label","tooltipAxisPointerLabelShow","crossStyle","lineStyle","defaults","Model","eachSeries","seriesModel","coordinateSystem","seriesTooltipTrigger","seriesTooltipShow","getAxis","dim","push","seriesDataCount","getData","count","axisModel","i","length","linkOption","checkPropInLink","id","name","linkPropValue","axisPropValue","isArray","indexOf","fixValue","getAxisInfo","scale","option","status","value","parse","extent","getExtent","slice","reverse","isBlank","getAxisPointerModel","axisPointerClazz","AxisView","payload","axisPointerClass","axisPointerModelHelper","_doUpdateAxisPointerClass","updateAxisPointer","remove","axisPointer","_axisPointer","dispose","_disposeAxisPointer","forceRender","Clazz","getAxisPointerClass","registerAxisPointerClass","clazz","inner","makeInner","bind","BaseAxisPointer","_dragging","animationThreshold","_axisModel","_axisPointerModel","_api","_lastValue","_lastStatus","_group","handle","_handle","hide","elOption","makeElOption","graphicKey","_lastGraphicKey","clear","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","updateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","getZr","updateMandatoryProps","_renderHandle","animation","isCategoryAxis","useSnap","getBandWidth","axisExtent","Math","abs","pointerOption","pointer","pointerEl","labelEl","updateLabelShowHide","updateHandleTransform","isInit","zr","handleModel","createIcon","cursor","draggable","onmousemove","e","eventTool","event","onmousedown","_onHandleDragMove","drift","ondragend","_onHandleDragEnd","handleSize","scaleX","scaleY","throttleUtil","_moveHandleToValue","getHandleTransProps","getHandleTransform","dx","dy","trans","_payloadInfo","stopAnimation","attr","lastProp","_doDispatchAxisPointer","payloadInfo","dispatchAction","cursorPoint","tooltipOption","axisDim","axisIndex","doClear","buildLabel","xy","wh","xDimIndex","animationModel","el","props","propsEqual","lastProps","newProps","equals_1","item","rotation","zlevel","traverse","PI","AxisBuilder","opt","labelOffset","nameDirection","tickDirection","labelDirection","handleAutoShown","transformGroup","position","updateTransform","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","direction","rotationDiff","remRadian","isRadianAroundZero","makeAxisEventDataBase","mainType","isLabelSilent","tooltipOpt","axisLine","shown","matrix","transform","pt1","pt2","inverse","v2ApplyTransform","extend","lineCap","getLineStyle","line","x1","y1","x2","y2","strokeContainThreshold","subPixelOptimizeLine","lineWidth","anid","arrows","arrowSize","isString","isNumber","arrowOffset","normalizeSymbolOffset","symbolWidth_1","symbolHeight_1","rotate","offset","sqrt","point","index","symbol","createSymbol","stroke","pt","cos","sin","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","labelList","prepareLayoutList","map","priority","defaultAttr","ignore","hideOverlap","axisName","retrieve","labelLayout","axisNameAvailableWidth","nameLocation","gap","gapSignal","pos","isNameLocationCenter","nameRotation","endTextLayout","isFinite","textFont","getFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","font","overflow","setTooltipConfig","componentModel","itemName","__fullText","targetType","decomposeTransform","textPosition","textRotate","onLeft","tickEls","shouldShowAllLabels","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","current","next","firstRect","nextRect","mRotationBack","matrixUtil","applyTransform","getLocalTransform","intersect","createTicks","ticksCoords","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","coord","tickEl","autoBatch","tickValue","tickModel","lineStyleModel","getTicksCoords","minorTickModel","minorTicksCoords","getMinorTicksCoords","minorTickLineStyle","minorTicksEls","k","axisLabelShow","labelModel","labelMargin","labels","getViewLabels","labelRotation","labelRotate","rawCategoryData","getCategories","labelItem","getRawOrdinalNumber","formattedLabel","rawLabel","itemLabelModel","rawCategoryItem","isObject","textColor","dataToCoord","level","getShallow","isFunction","tickIndex","dataIndex","buildElStyle","axisPointerType","styleModel","getAreaStyle","buildLabelElOption","labelPos","getValueLabel","precision","formatter","paddings","formatUtil","textContain","confineInContainer","bgColor","viewWidth","viewHeight","min","max","seriesDataIndices","getLabel","params_1","axisHelper","axisDimension","seriesData","idxItem","series","getSeriesByIndex","seriesIndex","dataIndexInside","dataParams","getDataParams","replace","getTransformedPosition","layoutInfo","create","translate","buildCartesianSingleLabelElOption","textLayout","makeLineShape","p1","p2","makeRectShape","layout","gridModel","grid","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","getRect","rectBound","idx","right","bottom","onZero","axisOffset","posBound","onZeroCoord","toGlobalCoord","dirMap","labelInside","CartesianAxisPointer","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","elStyle","viewHelper","pointerShapeBuilder","cartesianAxisHelper","delta","dimIndex","currPosition","cursorOtherValue","tooltipOptions","targetShape","getAxisDimIndex","shadow","bandWidth","span","AxisPointerModel","animationDurationUpdate","shadowStyle","borderRadius","icon","size","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","throttle","register","handler","env","records","initGlobalListeners","record","useHandler","eventType","cb","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","pendingList","unregister","AxisPointerView","triggerOn","globalListener","offsetX","offsetY","findPointFromSeries","finder","data","modelUtil","getItemGraphicEl","getTooltipPosition","dataToPoint","isStacked","baseAxis","getBaseAxis","valueAxis","valueAxisDim","baseAxisDim","baseDataOffset","baseDim","mapDimension","stackedData","getCalculationInfo","getValues","dimensions","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","list","updaters","showPointer","showTooltip","coordSysContainsPoint","containPoint","inputAxisInfo","findInputAxisInfo","val","pointToData","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","containData","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","dataDim","mapDimensionsAll","getAxisTooltipData","nestestValue","indicesOfNearest","diff","dist","getRawIndex","modelHelper","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","axisType","axisId","valueLabelOpt","outputAxesInfo","valItem","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","notBlur","batch","isNaN","registerPreprocessor","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","registerAction","update","TooltipModel","dependencies","showContent","trigger","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","animationEasingUpdate","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","document","documentElement","len","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","toCamelCase","toLowerCase","getComputedStyle","stl","currentStyle","defaultView","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","convertToColorString","rotateDeg","arrowPos","round","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","SQRT2","borderStyle","styleCss","join","assembleTransition","duration","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","toString","x0","toFixed","y0","is3d","assembleFont","cssText","assembleCssText","enableTransition","getPaddingFromTooltipModel","boxShadow","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","appendToBody","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipHTMLContent","container","_show","_styleCoord","_enterable","_firstShow","_longHide","createElement","domBelongToZr","_zr","_appendToBody","appendChild","_container","self","onmouseenter","clearTimeout","_hideTimeout","_inContent","window","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","domStyle","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","innerHTML","display","setContent","content","markers","arrow","isDom","parentNode","childNodes","arrowEl","setEnterable","getSize","offsetWidth","offsetHeight","moveTo","style_1","transforms","ratioX","ratioY","visibility","opacity","willChange","setTimeout","time","isShow","removeChild","TooltipRichContent","markupStyleCreator","throwError","ZRText","rich","richTextStyles","lineHeight","textShadowColor","propName","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","Rect","TooltipView","init","getDom","_renderMode","getTooltipRenderMode","_tooltipContent","_tooltipModel","_ecModel","_alwaysShowContent","tooltipContent","_initGlobalListener","_keepShow","createOrUpdate","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_lastDataByCoordSys","from","uid","_ticket","cmptRef","findComponentReference","positionDefault","tooltip","tooltipConfig","_manuallyAxisShowTip","pointInfo","cx","cy","findHover","manuallyHideTip","tooltipCascadedModel","buildTooltipModel","getItemModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","findEventDispatcher","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","createTooltipMarkup","blocks","noHeader","markupTextArrLegacy","TooltipMarkupStyleCreator","itemCoordSys","axisItem","axisValue","axisValueLabel","axisPointerViewHelper","axisSectionMarkup","header","trim","sortBlocks","cbParams","marker","makeTooltipMarker","seriesTooltipResult","normalizeTooltipFormatResult","formatTooltip","frag","valueFormatter","positionExpr","orderMode","builtMarkupText","buildTooltipMarkup","unshift","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","dispatcher","ecData","dataModel","dataType","tooltipTrigger","params","markupText","asyncTicket","tooltipModelCascade","cmpt","componentMainType","subTooltipModel","defaultHtml","formatterParams","html","nearPoint","_getNearestPoint","useUTC","params0","isTimeAxis","timeFormat","formatTpl","callback","cbTicket","tooltipDataParams","contentSize","vAlign","viewSize","parsePercent","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","ceil","rectWidth","rectHeight","queryOptionMap","preParseFinder","keys","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","models","view","getViewOfComponentModel","subEl","use","installAxisPointer","noop","getDefaultSelectorOptions","title","getLocaleModel","LegendModel","parentModel","mergeDefaultAndTheme","selected","_updateSelector","mergeOption","call","selector","optionUpdated","_updateData","legendData","_data","hasSelected","name_1","isSelected","select","potentialData","availableNames","eachRawSeries","isPotential","seriesName","legendVisualProvider","provider","names","getAllNames","isSeriesFiltered","concat","isNameSpecified","_availableNames","rawData","dataItem","selectedMode","unSelect","toggleSelected","hasOwnProperty","allSelect","inverseSelect","getOrient","orient","itemWidth","itemHeight","symbolRotate","symbolKeepAspect","inactiveColor","inactiveBorderColor","inactiveBorderWidth","itemStyle","borderCap","borderJoin","borderDashOffset","borderMiterLimit","inactiveWidth","cap","dashOffset","miterLimit","selectorLabel","fontFamily","emphasis","selectorPosition","selectorItemGap","selectorButtonGap","makeBackground","Group","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","viewportSize","maxSize","layoutUtil","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","legendItemModel","g","newline","getSeriesByName","lineVisualStyle","getVisual","legendIcon","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","set","containName","indexOfName","getItemVisual","colorArr","stringify","process","_createSelector","selectorGroup","selectorItem","labelText","onclick","emphasisLabelModel","setLabelStyle","normal","defaultText","enableHoverEmphasis","itemVisualStyle","drawType","visualDrawType","iconRotate","legendIconType","getLegendStyle","getLegendIcon","getDefaultLegendIcon","textX","hitRect","invisible","itemTooltipOption","eachChild","child","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","iconType","handleCommonProps","visualStyle","propVal","itemStyleModel","iconBrushType","lastIndexOf","decalStyle","decal","createOrUpdatePatternFromDecal","legendLineModel","visualHasBorder","symboType","setOrigin","dataName","isUseHoverLayer","emphasisState","storage","getDisplayList","states","hoverLayer","legendFilter","legendModels","findComponents","filterSeries","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","eachComponent","isItemSelected","installLegendAction","SERIES_FILTER","registerSubTypeDefaulter","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","inputPositionParams","getLayoutParams","mergeAndNormalizeLayoutParams","inheritDefaultOption","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","raw","mergeLayoutParam","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","removeClipPath","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","setPosition","clipShape","setClipPath","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","to","legendId","canJump","childOfName","pageText","total","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","children","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","s","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","start","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","subType","query","installLegendPlain","installLegendScroll","categoryFilter","eachSeriesByType","graphSeries","categoriesData","getCategoriesData","graph","getGraph","categoryNames","mapArray","getName","filterSelf","category","categoryVisual","paletteScope","categoryNameIdxMap","itemModel","getColorFromPalette","setItemVisual","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","ensureUniqueItemVisual","visualList","normalize","a","Array","graphEdgeVisual","edgeData","getEdgeData","symbolType","symbolSize","setVisual","edge","getEdgeByIndex","existsStyle","nodeStyle","node1","node2","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","__curvenessList","getKeyOfEdges","n1","n2","source","getOppositeKey","split","getEdgeFromMap","__edgeMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","isForward","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","eachNode","node","setLayout","simpleLayoutEdge","eachEdge","curveness","vec2","getLayout","points","graphSimpleLayout","data_1","dimensions_1","coordDim","hasValue","setItemLayout","NaN","getNodeGlobalScale","nodeScaleRatio","groupZoom","roamZoom","getZoom","nodeScale","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","nodeData","_a","tempX","tempY","v","circularRotateLabel","rotateNodeLabel","_layoutNodesBasedOn","cp1","x12","y12","angle","sum","getSum","unitAngle","getValue","radianHalf","sumRadian","symbolRadianHalf","asin","halfRemainRadian","fixed","getGraphicEl","nodeModel","symbolPath","getSymbolPath","rad","atan2","isLeft","setTextConfig","origin","ensureState","textConfig","graphCircularLayout","scaleAndAdd","forceLayout","inNodes","inEdges","opts","nodes","edges","center","gravity","n","p","pp","beforeStepCallback","afterStepCallback","initialFriction","friction","warmUp","setFixed","setUnfixed","beforeStep","afterStep","step","v12","nLen","ignoreForceLayout","d","w","repFact","rep","finished","graphForceLayout","preservedPoints_1","preservedPoints","graph_1","nodeData_1","forceModel","initLayout","getId","nodeDataExtent_1","getDataExtent","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","getItemLayout","linearMap","edgeModel","forceInstance","l","getNodeByIndex","stopped","vector","View","_roamTransformable","Transformable","_rawTransformable","setBoundingRect","_rect","BoundingRect","setViewRect","_transformTo","_viewRect","rawTransform","calculateTransform","rawParent","parent","_updateTransform","setCenter","centerCoord","_center","_updateCenterAndZoom","setZoom","zoom","zoomLimit","_zoom","getDefaultCenter","rawRect","getCenter","getRoamTransform","rawTransformMatrix","roamTransform","defaultCenter","originX","originY","roamTransformable","rawTransformable","copy","_rawTransform","invTransform","invert","getTransformInfo","dummyTransformable","roam","getViewRect","getViewRectAfterRoam","noRoam","convertToPixel","getCoordSys","convertFromPixel","pixel","contain","aspect","createViewCoordSys","viewList","positions","bbox","viewRect","bbWidth","bbHeight","viewCoordSys","getDefaultLabel","labelDims","rawVal","retrieveRawValue","vals","Symbol","seriesScope","updateData","_createSymbol","keepAspect","culling","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","childAt","getSymbolType","highlight","enterEmphasis","downplay","leaveEmphasis","setZ","setDraggable","hasCursorOption","hostModel","disableAnimation","saveOldStyle","_updateCommon","_sizeX","_sizeY","emphasisItemStyle","blurItemStyle","selectItemStyle","focus","blurScope","emphasisDisabled","labelStatesModels","hoverScale","cursorStyle","hasItemOption","emphasisModel","getLabelStatesModels","symbolOffset","symbolStyle","visualColor","ZRImage","pathStyle","useStyle","image","__isEmptyBrush","setColor","symbolInnerColor","strokeNoScale","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","labelFetcher","labelDataIndex","inheritColor","defaultOpacity","scaleRatio","setSymbolScale","toggleHoverEmphasis","fadeOut","animationOpt","fadeLabel","textContent","getTextContent","removeOpt","removeTextContent","normalizeSymbolSize","symbolNeedsDraw","isIgnore","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","SymbolClz","_progressiveEls","oldData","symbolUpdateOpt","getSymbolPoint","newIdx","symbolEl","setItemGraphicEl","oldIdx","newSymbolType","oldSymbolType","execute","_getSymbolPoint","updateLayout","eachItemGraphicEl","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","incremental","end","eachRendered","traverseElements","enableAnimation","straightLineProto","bezierCurveProto","StraightLineShape","percent","CurveShape","isStraightLine","cpx1","cpy1","ECLinePath","getDefaultStyle","getDefaultShape","buildPath","ctx","pointAt","t","tangentAt","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","lineData","symbolSizeArr","symbolUtil","symbolOffsetArr","__specifiedRotation","createLine","setLinePoints","Line","_createLine","linePoints","_updateCommonStl","getLinePath","emphasisLineStyle","blurLineStyle","selectLineStyle","SPECIAL_STATES","stateName","lineState","getState","lineStateStyle","state","stateStyle","getRawValue","getFormattedLabel","labelNormalModel","__align","__verticalAlign","__position","distance","__labelDistance","local","inside","linePath","dirty","beforeUpdate","lineGroup","symbolFrom","symbolTo","invScale","__dirty","fromPos","toPos","sub","setSymbolRotation","distanceX","distanceY","halfPercent","tangent","cp","dir","specifiedRotation","LineDraw","LineCtor","_LineCtor","LineGroup","lineDraw","oldLineData","_lineData","_doAdd","_doUpdate","isEffectObject","itemLayout","lineNeedsDraw","newLineData","itemEl","animators","isPointNaN","pts","ATTR","isTaken","resourceKey","getStore","echarts","RoamController","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","disable","_opt","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","off","isDragging","isPinching","_pinching","setPointerChecker","pointerChecker","__hostTarget","_x","_y","isAvailableBehavior","gestureEvent","interactionMutex","oldX","oldY","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","Eventful","controller","eventName","behaviorToCheck","contollerEvent","settings","setting","updateViewOnPan","controllerHost","updateViewOnZoom","zoomDelta","zoomX","zoomY","newZoom","zoomMin","zoomMax","Infinity","zoomScale","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","v1","v2","v3","quadraticAt","curveTool","v2DistSquare","mathAbs","intersectCurveCircle","curvePoints","radius","p0","radiusSquare","interval","_t","nextDiff","adjustEdge","tmp0","quadraticSubdivide","pts2","fromSymbol","toSymbol","__original","originalPoints","isViewCoordSys","GraphView","symbolDraw","_controller","_controllerHost","_symbolDraw","_lineDraw","_firstRender","_model","groupNewProp","_updateNodeAndLinkScale","_updateController","_layoutTimeout","layoutAnimation","_startForceLayoutIteration","_layouting","getAdjacentDataIndices","roamHelper","seriesId","updateLabelLayout","ChartView","generateNodeKey","Graph","directed","_nodesMap","_edgesMap","_directed","isDirected","addNode","nodesMap","GraphNode","hostGraph","rawIdx","getNodeById","addEdge","edgesMap","GraphEdge","outEdges","getEdge","context","breadthFirstTraverse","startNode","edgeType","__visited","queue","currentNode","shift","otherNode","degree","inDegree","outDegree","path","adjacentEdge","createGraphDataProxyMixin","hostName","dimension","getDimensionIndex","merge","linkSeriesData","mainData","datas","main","datasAttr","linkAll","TRANSFERABLE_METHODS","wrapMethod","transferInjection","cloneShallowInjection","CHANGABLE_METHODS","changeInjection","assert","res","isMainData","linkSingle","struct","cloneShallow","getLinkedData","getLinkedDataAll","structAttr","createGraphFromNodeEdge","beforeLink","linkNameList","validEdges","linkCount","convertOptionIdName","createSeriesData","coordSysCtor","CoordinateSystem","coordDimensions","prepareSeriesDataSchema","encodeDefine","getEncode","SeriesData","initData","LegendVisualProvider","getDataWithEncodedVisual","getRawData","_getDataWithEncodedVisual","_getRawData","dataWithEncodedVisual","GraphSeriesModel","hasSymbolVisual","_categoriesData","fillDataTextStyle","links","_updateCategoriesData","defaultEmphasis","getInitialData","categoriesModels","_categoriesModels","categoryModel","oldGetModel","newGetModel","resolveParentPath","pathArr","newPathArr","multipleSeries","sourceName","targetName","nameArr","noValue","nodeMarkup","defaultSeriesFormatTooltip","categories","isAnimationEnabled","legendHoverLink","circular","rotateLabel","force","edgeSymbol","edgeSymbolSize","edgeLabel","SeriesModel","getCenterCoord","pointToProjected","updateCenterAndZoom","previousZoom","projectedToPoint","fixX","fixY","actionInfo","registerChartView","registerSeriesModel","registerVisual","edgeVisual","registerLayout","VISUAL","POST_CHART_LAYOUT","registerCoordinateSystem","createView","undefined","createDom","dpr","newDom","platformApi","newDomStyle","setAttribute","Layer","dom","motionBlur","lastFrameAlpha","virtual","config","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","devicePixelRatio","util","disableUserSelect","onselectstart","getElementCount","afterBrush","initContext","getContext","setUnpainted","createBackBuffer","domBack","ctxBack","createRepaintRects","displayList","prevList","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","isZero","boundingRect","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","union","aArea","bArea","pendingArea","deltaArea","shouldPaint","shouldBePainted","prevRect","__isRendered","REDRAW_BIT","getPrevPaintRect","curRect","getPaintRect","__zr","splice","_paintRects","debugGetPaintRects","resize","clearAll","clearColor","repaintRects","haveMotionBLur","globalCompositeOperation","drawImage","clearRect","clearColorGradientOrPattern","isGradientObject","__canvasGradient","getCanvasGradient","isImagePatternObject","createCanvasPattern","__painter","refresh","save","fillStyle","fillRect","restore","globalAlpha","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","layer","__builtin__","createRoot","domRoot","CanvasPainter","root","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","_singleCanvas","rootStyle","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","getType","isSingleCanvas","viewportRoot","paintAll","_redrawId","_paintList","_backgroundColor","useDirtyRect","refreshHover","_paintHoverList","_hoverlayer","scope","inHover","__inHover","getLayer","brush","getHoverLayer","paintOne","brushSingle","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","eachLayer","requestAnimationFrame","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","Date","now","startTime","firstEl","notClear","console","error","repaint","repaintRect","allClipped","prevEl","_doPaintEl","dTime","prevElClipPaths","beginPath","clip","draw","currentLayer","isLast","paintRect","setPrevPaintRect","insertLayer","layersMap","prevLayer","prevDom","nextSibling","insertBefore","firstChild","eachOtherLayer","getLayers","updatePrevLayer","i_1","prevZlevel","incrementalLayerCount","logError","_clearLayer","setBackgroundColor","configLayer","layerConfig","_zlevel","delLayer","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","registerPainter","components","computed","watch","methods","onLoad","TitleComponent","TooltipComponent","LegendComponent","GraphChart","CanvasRenderer","myChart","legend","animationDuration","mounted"],"sourceRoot":""}